(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37956,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});class r{constructor(t=new Set){this.collection=t}isObjectForValueEqualityCheck(t){return"object"==typeof t&&null!==t}valueEqualityCheck(t,e){let i=Object.keys(t).sort(),r=Object.keys(e).sort();if(i.length!==r.length)return!1;{let n=i.map(e=>{let i=t[e];return this.isObjectForValueEqualityCheck(i)?[void 0,e]:[e,void 0]});return!!n.filter(([t,e])=>"string"==typeof t).map(([t,e])=>t).every(i=>{let n=r.find(t=>t===i);return n&&e[n]===t[i]})&&n.filter(([t,e])=>"string"==typeof e).map(([t,e])=>e).every(i=>{let n=r.find(t=>t===i);return n&&this.valueEqualityCheck(t[i],e[n])})}}elemInSet(t){return Array.from(this.collection).findIndex(e=>this.valueEqualityCheck(t,e))>-1}add(t){this.elemInSet(t)||this.collection.add(t)}addAll(t){t.filter(t=>!this.elemInSet(t)).forEach(t=>{this.collection.add(t)})}copy(){return new r(this.collection)}remove(t){let e=Array.from(this.collection),i=e.findIndex(e=>this.valueEqualityCheck(t,e));if(!(i>-1))return!1;{let t=e.slice(0,i).concat(e.slice(i+1,e.length));return this.collection=new Set(t),!0}}clear(){this.collection.clear()}findAndRemoveFirstOccurrence(t){let e=Array.from(this.collection),i=e.findIndex(e=>t(e));if(!(i>-1))return!1;{let t=e.slice(0,i).concat(e.slice(i+1,e.length));return this.collection=new Set(t),!0}}returnFirstOccurrenceIfFound(t){let e=Array.from(this.collection),i=e.findIndex(e=>t(e));return i>-1?e[i]:void 0}map(t){return new r(new Set(Array.from(this.collection).map(t)))}forEach(t){this.collection.forEach(t)}filter(t){return new r(new Set(Array.from(this.collection).filter(t)))}isEmpty(){return 0===this.collection.size}isNonEmpty(){return!this.isEmpty()}size(){return this.collection.size}*[Symbol.iterator](){for(let t of this.collection)yield t}}i.default=r},14696,(t,e,i)=>{"use strict";var r=t.e&&t.e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t=new Set){let e=new n.default(t),[i,r]=(0,a.useState)(e),s=(0,a.useCallback)(t=>{r(e=>{let i=e.copy();return i.add(t),i})},[]),o=(0,a.useCallback)(t=>{r(e=>{let i=e.copy();return i.addAll(t),i})},[]),h=(0,a.useCallback)(t=>{r(e=>{let i=e.copy();return i.remove(t),i})},[]);return{addToCollection:s,addAllToCollection:o,removeFromCollection:h,removeFirstFoundFromCollection:(0,a.useCallback)(t=>{r(e=>{let i=e.copy();return i.findAndRemoveFirstOccurrence(t),i})},[]),clearCollection:(0,a.useCallback)(()=>{r(t=>{let e=t.copy();return t.clear(),e})},[]),collection:i}};let n=r(t.r(37956)),a=t.r(71645)},30343,(t,e,i)=>{!function(r,n){if("object"==typeof i){var a=n();e&&e.exports&&(i=e.exports=a),i.randomColor=a}else if("function"==typeof define&&define.amd){let e;void 0!==(e=n())&&t.v(e)}else r.randomColor=n()}(t.e,function(){var t=null,e={};s("monochrome",null,[[0,0],[100,0]]),s("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),s("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),s("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),s("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),s("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),s("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),s("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]);var i=[],r=function(s){if(void 0!==(s=s||{}).seed&&null!==s.seed&&s.seed===parseInt(s.seed,10))t=s.seed;else if("string"==typeof s.seed)t=function(t){for(var e=0,i=0;i!==t.length&&!(e>=Number.MAX_SAFE_INTEGER);i++)e+=t.charCodeAt(i);return e}(s.seed);else if(void 0!==s.seed&&null!==s.seed)throw TypeError("The seed value must be an integer or string");else t=null;if(null!==s.count&&void 0!==s.count){for(var d,u,c,f=s.count,g=[],p=0;p<s.count;p++)i.push(!1);for(s.count=null;f>g.length;){var _=r(s);null!==t&&(s.seed=t),g.push(_)}return s.count=f,g}return u=function(t,e){if("monochrome"===e.hue)return 0;if("random"===e.luminosity)return a([0,100]);var i=n(t).saturationRange,r=i[0],s=i[1];switch(e.luminosity){case"bright":r=55;break;case"dark":r=s-10;break;case"light":s=55}return a([r,s])}(d=function(t){if(i.length>0){var r=function(t){if(isNaN(t)){if("string"==typeof t){if(e[t]){var i=e[t];if(i.hueRange)return i.hueRange}else if(t.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i))return n(h(t)[0]).hueRange}}else{var r=parseInt(t);if(r<360&&r>0)return n(t).hueRange}return[0,360]}(t.hue),s=a(r),o=(r[1]-r[0])/i.length,l=parseInt((s-r[0])/o);return!0===i[l]?l=(l+2)%i.length:i[l]=!0,(s=a(r=[(r[0]+l*o)%359,(r[0]+(l+1)*o)%359]))<0&&(s=360+s),s}var r=function(t){if("number"==typeof parseInt(t)){var i=parseInt(t);if(i<360&&i>0)return[i,i]}if("string"==typeof t){if(e[t]){var r=e[t];if(r.hueRange)return r.hueRange}else if(t.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var n=h(t)[0];return[n,n]}}return[0,360]}(t.hue);return(s=a(r))<0&&(s=360+s),s}(s),s),c=function(t,e,i){var r=function(t,e){for(var i=n(t).lowerBounds,r=0;r<i.length-1;r++){var a=i[r][0],s=i[r][1],o=i[r+1][0],h=i[r+1][1];if(e>=a&&e<=o){var l=(h-s)/(o-a),d=s-l*a;return l*e+d}}return 0}(t,e),s=100;switch(i.luminosity){case"dark":s=r+20;break;case"light":r=(s+r)/2;break;case"random":r=0,s=100}return a([r,s])}(d,u,s),function(t,e){switch(e.format){case"hsvArray":return t;case"hslArray":return l(t);case"hsl":var i=l(t);return"hsl("+i[0]+", "+i[1]+"%, "+i[2]+"%)";case"hsla":var r=l(t),n=e.alpha||Math.random();return"hsla("+r[0]+", "+r[1]+"%, "+r[2]+"%, "+n+")";case"rgbArray":return o(t);case"rgb":return"rgb("+o(t).join(", ")+")";case"rgba":var a=o(t),n=e.alpha||Math.random();return"rgba("+a.join(", ")+", "+n+")";default:var s=t,h=o(s);function d(t){var e=t.toString(16);return 1==e.length?"0"+e:e}return"#"+d(h[0])+d(h[1])+d(h[2])}}([d,u,c],s)};function n(t){for(var i in t>=334&&t<=360&&(t-=360),e){var r=e[i];if(r.hueRange&&t>=r.hueRange[0]&&t<=r.hueRange[1])return e[i]}return"Color not found"}function a(e){if(null===t){var i=Math.random();return i+=.618033988749895,i%=1,Math.floor(e[0]+i*(e[1]+1-e[0]))}var r=e[1]||1,n=e[0]||0;return Math.floor(n+(t=(9301*t+49297)%233280)/233280*(r-n))}function s(t,i,r){var n=r[0][0],a=r[r.length-1][0],s=r[r.length-1][1],o=r[0][1];e[t]={hueRange:i,lowerBounds:r,saturationRange:[n,a],brightnessRange:[s,o]}}function o(t){var e=t[0];0===e&&(e=1),360===e&&(e=359),e/=360;var i=t[1]/100,r=t[2]/100,n=Math.floor(6*e),a=6*e-n,s=r*(1-i),o=r*(1-a*i),h=r*(1-(1-a)*i),l=256,d=256,u=256;switch(n){case 0:l=r,d=h,u=s;break;case 1:l=o,d=r,u=s;break;case 2:l=s,d=r,u=h;break;case 3:l=s,d=o,u=r;break;case 4:l=h,d=s,u=r;break;case 5:l=r,d=s,u=o}return[Math.floor(255*l),Math.floor(255*d),Math.floor(255*u)]}function h(t){var e=parseInt((t=3===(t=t.replace(/^#/,"")).length?t.replace(/(.)/g,"$1$1"):t).substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,r=parseInt(t.substr(4,2),16)/255,n=Math.max(e,i,r),a=n-Math.min(e,i,r),s=n?a/n:0;switch(n){case e:return[(i-r)/a%6*60||0,s,n];case i:return[60*((r-e)/a+2)||0,s,n];case r:return[60*((e-i)/a+4)||0,s,n]}}function l(t){var e=t[0],i=t[1]/100,r=t[2]/100,n=(2-i)*r;return[e,Math.round(i*r/(n<1?n:2-n)*1e4)/100,n/2*100]}return r})},77585,t=>{"use strict";let e,i,r;var n,a,s,o,h,l=t.i(43476);let d=Math.PI/180,u=t.g,c={_global:u,version:"10.0.8",isBrowser:"undefined"!=typeof window&&("[object Window]"===({}).toString.call(window)||"[object global]"===({}).toString.call(window)),isUnminified:/param/.test((function(t){}).toString()),dblClickWindow:400,getAngle:t=>c.angleDeg?t*d:t,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>c.DD.isDragging,isTransforming(){var t,e;return null!=(e=null==(t=c.Transformer)?void 0:t.isTransforming())&&e},isDragReady:()=>!!c.DD.node,releaseCanvasOnDestroy:!0,document:u.document,_injectGlobal(t){void 0!==u.Konva&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),u.Konva=t}},f=t=>{c[t.prototype.getClassName()]=t};c._injectGlobal(c);let g=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,p=()=>{if("undefined"==typeof document)throw Error(g)};class _{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new _(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){let e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}}translate(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}scale(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}rotate(t){let e=Math.cos(t),i=Math.sin(t),r=this.m[0]*e+this.m[2]*i,n=this.m[1]*e+this.m[3]*i,a=-(this.m[0]*i)+this.m[2]*e,s=-(this.m[1]*i)+this.m[3]*e;return this.m[0]=r,this.m[1]=n,this.m[2]=a,this.m[3]=s,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,e){let i=this.m[0]+this.m[2]*e,r=this.m[1]+this.m[3]*e,n=this.m[2]+this.m[0]*t,a=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=r,this.m[2]=n,this.m[3]=a,this}multiply(t){let e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],r=this.m[0]*t.m[2]+this.m[2]*t.m[3],n=this.m[1]*t.m[2]+this.m[3]*t.m[3],a=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],s=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=r,this.m[3]=n,this.m[4]=a,this.m[5]=s,this}invert(){let t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,r=-this.m[2]*t,n=this.m[0]*t,a=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),s=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=i,this.m[2]=r,this.m[3]=n,this.m[4]=a,this.m[5]=s,this}getMatrix(){return this.m}decompose(){let t=this.m[0],e=this.m[1],i=this.m[2],r=this.m[3],n=this.m[4],a=this.m[5],s=t*r-e*i,o={x:n,y:a,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=t||0!=e){let n=Math.sqrt(t*t+e*e);o.rotation=e>0?Math.acos(t/n):-Math.acos(t/n),o.scaleX=n,o.scaleY=s/n,o.skewX=(t*i+e*r)/s,o.skewY=0}else if(0!=i||0!=r){let n=Math.sqrt(i*i+r*r);o.rotation=Math.PI/2-(r>0?Math.acos(-i/n):-Math.acos(i/n)),o.scaleX=s/n,o.scaleY=n,o.skewX=0,o.skewY=(t*i+e*r)/s}return o.rotation=C._getRotation(o.rotation),o}}let m=Math.PI/180,v=180/Math.PI,y="Konva error: ",x={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},b=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,w=[],S="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(t){setTimeout(t,60)},C={_isElement:t=>!!(t&&1==t.nodeType),_isFunction:t=>!!(t&&t.constructor&&t.call&&t.apply),_isPlainObject:t=>!!t&&t.constructor===Object,_isArray:t=>"[object Array]"===Object.prototype.toString.call(t),_isNumber:t=>"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t),_isString:t=>"[object String]"===Object.prototype.toString.call(t),_isBoolean:t=>"[object Boolean]"===Object.prototype.toString.call(t),isObject:t=>t instanceof Object,isValidSelector(t){if("string"!=typeof t)return!1;let e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign:t=>0===t||t>0?1:-1,requestAnimFrame(t){w.push(t),1===w.length&&S(function(){let t=w;w=[],t.forEach(function(t){t()})})},createCanvasElement(){p();let t=document.createElement("canvas");try{t.style=t.style||{}}catch(t){}return t},createImageElement:()=>(p(),document.createElement("img")),_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,e){let i=C.createImageElement();i.onload=function(){e(i)},i.src=t},_rgbToHex:(t,e,i)=>(0x1000000+(t<<16)+(e<<8)+i).toString(16).slice(1),_hexToRgb(t){let e=parseInt(t=t.replace("#",""),16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor(){let t=(0xffffff*Math.random()|0).toString(16);for(;t.length<6;)t="0"+t;return"#"+t},getRGB(t){let e;return t in x?{r:(e=x[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?{r:parseInt((e=b.exec(t.replace(/ /g,"")))[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}:{r:0,g:0,b:0}},colorToRGBA:t=>(t=t||"black",C._namedColorToRBA(t)||C._hex3ColorToRGBA(t)||C._hex4ColorToRGBA(t)||C._hex6ColorToRGBA(t)||C._hex8ColorToRGBA(t)||C._rgbColorToRGBA(t)||C._rgbaColorToRGBA(t)||C._hslColorToRGBA(t)),_namedColorToRBA(t){let e=x[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(0===t.indexOf("rgb(")){let e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(0===t.indexOf("rgba(")){let e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((t,e)=>"%"===t.slice(-1)?3===e?parseInt(t)/100:parseInt(t)/100*255:Number(t));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(t){if("#"===t[0]&&9===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:parseInt(t.slice(7,9),16)/255}},_hex6ColorToRGBA(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex4ColorToRGBA(t){if("#"===t[0]&&5===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:parseInt(t[4]+t[4],16)/255}},_hex3ColorToRGBA(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){let e,i,r,[n,...a]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),s=Number(a[0])/360,o=Number(a[1])/100,h=Number(a[2])/100;if(0===o)return{r:Math.round(r=255*h),g:Math.round(r),b:Math.round(r),a:1};e=h<.5?h*(1+o):h+o-h*o;let l=2*h-e,d=[0,0,0];for(let t=0;t<3;t++)(i=s+-(1/3*(t-1)))<0&&i++,i>1&&i--,r=6*i<1?l+(e-l)*6*i:2*i<1?e:3*i<2?l+(e-l)*(2/3-i)*6:l,d[t]=255*r;return{r:Math.round(d[0]),g:Math.round(d[1]),b:Math.round(d[2]),a:1}}},haveIntersection:(t,e)=>!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y),cloneObject(t){let e={};for(let i in t)this._isPlainObject(t[i])?e[i]=this.cloneObject(t[i]):this._isArray(t[i])?e[i]=this.cloneArray(t[i]):e[i]=t[i];return e},cloneArray:t=>t.slice(0),degToRad:t=>t*m,radToDeg:t=>t*v,_degToRad:t=>(C.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),C.degToRad(t)),_radToDeg:t=>(C.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),C.radToDeg(t)),_getRotation:t=>c.angleDeg?C.radToDeg(t):t,_capitalize:t=>t.charAt(0).toUpperCase()+t.slice(1),throw(t){throw Error(y+t)},error(t){console.error(y+t)},warn(t){c.showWarnings&&console.warn("Konva warning: "+t)},each(t,e){for(let i in t)e(i,t[i])},_inRange:(t,e,i)=>e<=t&&t<i,_getProjectionToSegment(t,e,i,r,n,a){let s,o,h,l=(t-i)*(t-i)+(e-r)*(e-r);if(0==l)s=t,o=e,h=(n-i)*(n-i)+(a-r)*(a-r);else{let d=((n-t)*(i-t)+(a-e)*(r-e))/l;d<0?(s=t,o=e,h=(t-n)*(t-n)+(e-a)*(e-a)):d>1?(s=i,o=r,h=(i-n)*(i-n)+(r-a)*(r-a)):h=((s=t+d*(i-t))-n)*(s-n)+((o=e+d*(r-e))-a)*(o-a)}return[s,o,h]},_getProjectionToLine(t,e,i){let r=C.cloneObject(t),n=Number.MAX_VALUE;return e.forEach(function(a,s){if(!i&&s===e.length-1)return;let o=e[(s+1)%e.length],h=C._getProjectionToSegment(a.x,a.y,o.x,o.y,t.x,t.y),l=h[0],d=h[1],u=h[2];u<n&&(r.x=l,r.y=d,n=u)}),r},_prepareArrayForTween(t,e,i){let r=[],n=[];if(t.length>e.length){let i=e;e=t,t=i}for(let e=0;e<t.length;e+=2)r.push({x:t[e],y:t[e+1]});for(let t=0;t<e.length;t+=2)n.push({x:e[t],y:e[t+1]});let a=[];return n.forEach(function(t){let e=C._getProjectionToLine(t,r,i);a.push(e.x),a.push(e.y)}),a},_prepareToStringify(t){let e;for(let i in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(i)&&t[i]&&"object"==typeof t[i]){if(e=Object.getOwnPropertyDescriptor(t,i),t[i].visitedByCircularReferenceRemoval||C._isElement(t[i]))if(!e.configurable)return null;else delete t[i];else if(null===C._prepareToStringify(t[i]))if(!e.configurable)return null;else delete t[i]}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(let i in e)t[i]=e[i];return t},_getFirstPointerId:t=>t.touches?t.changedTouches[0].identifier:t.pointerId||999,releaseCanvas(...t){c.releaseCanvasOnDestroy&&t.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(t,e,i,r){let n=e<0?e:0,a=i<0?i:0;e=Math.abs(e),i=Math.abs(i);let s=0,o=0,h=0,l=0;"number"==typeof r?s=o=h=l=Math.min(r,e/2,i/2):(s=Math.min(r[0]||0,e/2,i/2),o=Math.min(r[1]||0,e/2,i/2),l=Math.min(r[2]||0,e/2,i/2),h=Math.min(r[3]||0,e/2,i/2)),t.moveTo(n+s,a),t.lineTo(n+e-o,a),t.arc(n+e-o,a+o,o,3*Math.PI/2,0,!1),t.lineTo(n+e,a+i-l),t.arc(n+e-l,a+i-l,l,0,Math.PI/2,!1),t.lineTo(n+h,a+i),t.arc(n+h,a+i-h,h,Math.PI/2,Math.PI,!1),t.lineTo(n,a+s),t.arc(n+s,a+s,s,Math.PI,3*Math.PI/2,!1)},drawRoundedPolygonPath(t,e,i,r,n){r=Math.abs(r);for(let a=0;a<i;a++){let s,o=e[(a-1+i)%i],h=e[a],l=e[(a+1)%i],d={x:h.x-o.x,y:h.y-o.y},u={x:l.x-h.x,y:l.y-h.y},c=Math.hypot(d.x,d.y),f=Math.hypot(u.x,u.y);s="number"==typeof n?n:a<n.length?n[a]:0,s=r*Math.cos(Math.PI/i)*Math.min(1,s/r*2);let g={x:d.x/c,y:d.y/c},p={x:u.x/f,y:u.y/f},_={x:h.x-g.x*s,y:h.y-g.y*s},m={x:h.x+p.x*s,y:h.y+p.y*s};0===a?t.moveTo(_.x,_.y):t.lineTo(_.x,_.y),t.arcTo(h.x,h.y,m.x,m.y,s)}}},T=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],k=null;function P(){if(null!==k)return k;try{let t=C.createCanvasElement().getContext("2d");if(!t)return k=!1,!1;return!!t&&"filter"in t}catch(t){return k=!1,!1}}class A{constructor(t){this.canvas=t,c.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,e){let i=this.traceArr,r=i.length,n="",a,s,o,h;for(a=0;a<r;a++)(o=(s=i[a]).method)?(h=s.args,n+=o,t?n+="()":C._isArray(h[0])?n+="(["+h.join(",")+"])":(e&&(h=h.map(t=>"number"==typeof t?Math.floor(t):t)),n+="("+h.join(",")+")")):(n+=s.property,t||(n+="="+s.val)),n+=";";return n}clearTrace(){this.traceArr=[]}_trace(t){let e=this.traceArr;e.push(t),e.length>=100&&e.shift()}reset(){let t=this.getCanvas().getPixelRatio();this.setTransform(+t,0,0,+t,0,0)}getCanvas(){return this.canvas}clear(t){let e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}_applyLineCap(t){let e=t.attrs.lineCap;e&&this.setAttr("lineCap",e)}_applyOpacity(t){let e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)}_applyLineJoin(t){let e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}_applyMiterLimit(t){let e=t.attrs.miterLimit;null!=e&&this.setAttr("miterLimit",e)}setAttr(t,e){this._context[t]=e}arc(t,e,i,r,n,a){this._context.arc(t,e,i,r,n,a)}arcTo(t,e,i,r,n){this._context.arcTo(t,e,i,r,n)}beginPath(){this._context.beginPath()}bezierCurveTo(t,e,i,r,n,a){this._context.bezierCurveTo(t,e,i,r,n,a)}clearRect(t,e,i,r){this._context.clearRect(t,e,i,r)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,e){let i=arguments;return 2===i.length?this._context.createImageData(t,e):1===i.length?this._context.createImageData(t):void 0}createLinearGradient(t,e,i,r){return this._context.createLinearGradient(t,e,i,r)}createPattern(t,e){return this._context.createPattern(t,e)}createRadialGradient(t,e,i,r,n,a){return this._context.createRadialGradient(t,e,i,r,n,a)}drawImage(t,e,i,r,n,a,s,o,h){let l=arguments,d=this._context;3===l.length?d.drawImage(t,e,i):5===l.length?d.drawImage(t,e,i,r,n):9===l.length&&d.drawImage(t,e,i,r,n,a,s,o,h)}ellipse(t,e,i,r,n,a,s,o){this._context.ellipse(t,e,i,r,n,a,s,o)}isPointInPath(t,e,i,r){return i?this._context.isPointInPath(i,t,e,r):this._context.isPointInPath(t,e,r)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,e,i,r){this._context.fillRect(t,e,i,r)}strokeRect(t,e,i,r){this._context.strokeRect(t,e,i,r)}fillText(t,e,i,r){r?this._context.fillText(t,e,i,r):this._context.fillText(t,e,i)}measureText(t){return this._context.measureText(t)}getImageData(t,e,i,r){return this._context.getImageData(t,e,i,r)}lineTo(t,e){this._context.lineTo(t,e)}moveTo(t,e){this._context.moveTo(t,e)}rect(t,e,i,r){this._context.rect(t,e,i,r)}roundRect(t,e,i,r,n){this._context.roundRect(t,e,i,r,n)}putImageData(t,e,i){this._context.putImageData(t,e,i)}quadraticCurveTo(t,e,i,r){this._context.quadraticCurveTo(t,e,i,r)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,e){this._context.scale(t,e)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,e,i,r,n,a){this._context.setTransform(t,e,i,r,n,a)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,e,i,r){this._context.strokeText(t,e,i,r)}transform(t,e,i,r,n,a){this._context.transform(t,e,i,r,n,a)}translate(t,e){this._context.translate(t,e)}_enableTrace(){let t=this,e=T.length,i=this.setAttr,r,n,a=function(e){let i=t[e],r;t[e]=function(){return n=function(t){let e=[],i=t.length;for(let r=0;r<i;r++){let i=t[r];C._isNumber(i)?i=Math.round(1e3*i)/1e3:C._isString(i)||(i+=""),e.push(i)}return e}(Array.prototype.slice.call(arguments,0)),r=i.apply(t,arguments),t._trace({method:e,args:n}),r}};for(r=0;r<e;r++)a(T[r]);t.setAttr=function(){i.apply(t,arguments);let e=arguments[0],r=arguments[1];("shadowOffsetX"===e||"shadowOffsetY"===e||"shadowBlur"===e)&&(r/=this.canvas.getPixelRatio()),t._trace({property:e,val:r})}}_applyGlobalCompositeOperation(t){let e=t.attrs.globalCompositeOperation;e&&"source-over"!==e&&this.setAttr("globalCompositeOperation",e)}}["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"].forEach(function(t){Object.defineProperty(A.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class M extends A{constructor(t,{willReadFrequently:e=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:e})}_fillColor(t){let e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){let e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fillRadialGradient(t){let e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fill(t){let e=t.fill(),i=t.getFillPriority();if(e&&"color"===i)return void this._fillColor(t);let r=t.getFillPatternImage();if(r&&"pattern"===i)return void this._fillPattern(t);let n=t.getFillLinearGradientColorStops();if(n&&"linear-gradient"===i)return void this._fillLinearGradient(t);let a=t.getFillRadialGradientColorStops();a&&"radial-gradient"===i?this._fillRadialGradient(t):e?this._fillColor(t):r?this._fillPattern(t):n?this._fillLinearGradient(t):a&&this._fillRadialGradient(t)}_strokeLinearGradient(t){let e=t.getStrokeLinearGradientStartPoint(),i=t.getStrokeLinearGradientEndPoint(),r=t.getStrokeLinearGradientColorStops(),n=this.createLinearGradient(e.x,e.y,i.x,i.y);if(r){for(let t=0;t<r.length;t+=2)n.addColorStop(r[t],r[t+1]);this.setAttr("strokeStyle",n)}}_stroke(t){let e=t.dash(),i=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!i){this.save();let t=this.getCanvas().getPixelRatio();this.setTransform(t,0,0,t,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),i||this.restore()}}_applyShadow(t){var e,i,r;let n=null!=(e=t.getShadowRGBA())?e:"black",a=null!=(i=t.getShadowBlur())?i:5,s=null!=(r=t.getShadowOffset())?r:{x:0,y:0},o=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),l=o.x*h,d=o.y*h;this.setAttr("shadowColor",n),this.setAttr("shadowBlur",a*Math.min(Math.abs(l),Math.abs(d))),this.setAttr("shadowOffsetX",s.x*l),this.setAttr("shadowOffsetY",s.y*d)}}class R extends A{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){let e=t.getStrokeScaleEnabled();if(!e){this.save();let t=this.getCanvas().getPixelRatio();this.setTransform(t,0,0,t,0,0)}this._applyLineCap(t);let i=t.hitStrokeWidth(),r="auto"===i?t.strokeWidth():i;this.setAttr("lineWidth",r),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}}class E{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const i=(t||{}).pixelRatio||c.pixelRatio||function(){if(e)return e;let t=C.createCanvasElement(),i=t.getContext("2d");return e=(c._global.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1),C.releaseCanvas(t),e}();this.pixelRatio=i,this._canvas=C.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){let e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";let e=this.pixelRatio;this.getContext()._context.scale(e,e)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";let e=this.pixelRatio;this.getContext()._context.scale(e,e)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,e){this.setWidth(t||0),this.setHeight(e||0)}toDataURL(t,e){try{return this._canvas.toDataURL(t,e)}catch(t){try{return this._canvas.toDataURL()}catch(t){return C.error("Unable to get data URL. "+t.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class I extends E{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new M(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}function O(){let t=C.createCanvasElement();t.width=1,t.height=1;let e=t.getContext("2d",{willReadFrequently:!0});e.clearRect(0,0,1,1),e.fillStyle="rgba(255,0,255,1)",e.fillRect(0,0,1,1);let i=e.getImageData(0,0,1,1).data;return 255!==i[0]||0!==i[1]||255!==i[2]||255!==i[3]}function D(){var t,e;return"undefined"!=typeof navigator&&null!=(e=null==(t=navigator.brave)?void 0:t.isBrave())&&e}let G=!1;class L extends E{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new R(this),this.setSize(t.width,t.height),D()&&O()&&!G&&(G=!0,C.error('Looks like you have "Brave shield" enabled in your browser. It breaks KonvaJS internals. Please disable it. You may need to ask your users to do the same.')),D()&&O()}}let F={get isDragging(){let t=!1;return F._dragElements.forEach(e=>{"dragging"===e.dragStatus&&(t=!0)}),t},justDragged:!1,get node(){let t;return F._dragElements.forEach(e=>{t=e.node}),t},_dragElements:new Map,_drag(t){let e=[];F._dragElements.forEach((i,r)=>{let{node:n}=i,a=n.getStage();a.setPointersPositions(t),void 0===i.pointerId&&(i.pointerId=C._getFirstPointerId(t));let s=a._changedPointerPositions.find(t=>t.id===i.pointerId);if(s){if("dragging"!==i.dragStatus){let e=n.dragDistance();if(Math.max(Math.abs(s.x-i.startPointerPos.x),Math.abs(s.y-i.startPointerPos.y))<e||(n.startDrag({evt:t}),!n.isDragging()))return}n._setDragPosition(t,i),e.push(n)}}),e.forEach(e=>{e.fire("dragmove",{type:"dragmove",target:e,evt:t},!0)})},_endDragBefore(t){let e=[];F._dragElements.forEach(i=>{let{node:r}=i,n=r.getStage();if(t&&n.setPointersPositions(t),!n._changedPointerPositions.find(t=>t.id===i.pointerId))return;("dragging"===i.dragStatus||"stopped"===i.dragStatus)&&(F.justDragged=!0,c._mouseListenClick=!1,c._touchListenClick=!1,c._pointerListenClick=!1,i.dragStatus="stopped");let a=i.node.getLayer()||i.node instanceof c.Stage&&i.node;a&&-1===e.indexOf(a)&&e.push(a)}),e.forEach(t=>{t.draw()})},_endDragAfter(t){F._dragElements.forEach((e,i)=>{"stopped"===e.dragStatus&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),"dragging"!==e.dragStatus&&F._dragElements.delete(i)})}};function B(t){return C._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)||C._isBoolean(t)?t:Object.prototype.toString.call(t)}function N(t){return t>255?255:t<0?0:Math.round(t)}function z(){if(c.isUnminified)return function(t,e){return C._isNumber(t)||C.warn(B(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function W(t){if(c.isUnminified)return function(e,i){let r=C._isNumber(e),n=C._isArray(e)&&e.length==t;return r||n||C.warn(B(e)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function H(){if(c.isUnminified)return function(t,e){let i=C._isNumber(t),r="auto"===t;return i||r||C.warn(B(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function Y(){if(c.isUnminified)return function(t,e){return C._isString(t)||C.warn(B(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function X(){if(c.isUnminified)return function(t,e){let i=C._isString(t),r="[object CanvasGradient]"===Object.prototype.toString.call(t)||t&&t.addColorStop;return i||r||C.warn(B(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function j(){if(c.isUnminified)return function(t,e){return!0!==t&&!1!==t&&C.warn(B(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}c.isBrowser&&(window.addEventListener("mouseup",F._endDragBefore,!0),window.addEventListener("touchend",F._endDragBefore,!0),window.addEventListener("touchcancel",F._endDragBefore,!0),window.addEventListener("mousemove",F._drag),window.addEventListener("touchmove",F._drag),window.addEventListener("mouseup",F._endDragAfter,!1),window.addEventListener("touchend",F._endDragAfter,!1),window.addEventListener("touchcancel",F._endDragAfter,!1));let q={addGetterSetter(t,e,i,r,n){q.addGetter(t,e,i),q.addSetter(t,e,r,n),q.addOverloadedGetterSetter(t,e)},addGetter(t,e,i){let r="get"+C._capitalize(e);t.prototype[r]=t.prototype[r]||function(){let t=this.attrs[e];return void 0===t?i:t}},addSetter(t,e,i,r){let n="set"+C._capitalize(e);t.prototype[n]||q.overWriteSetter(t,e,i,r)},overWriteSetter(t,e,i,r){let n="set"+C._capitalize(e);t.prototype[n]=function(t){return i&&null!=t&&(t=i.call(this,t,e)),this._setAttr(e,t),r&&r.call(this),this}},addComponentsGetterSetter(t,e,i,r,n){let a=i.length,s=C._capitalize,o="get"+s(e),h="set"+s(e);t.prototype[o]=function(){let t={};for(let r=0;r<a;r++){let n=i[r];t[n]=this.getAttr(e+s(n))}return t};let l=function(t){if(c.isUnminified)return function(e,i){return null==e||C.isObject(e)||C.warn(B(e)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+t),e}}(i);t.prototype[h]=function(t){let a=this.attrs[e];for(let i in r&&(t=r.call(this,t,e)),l&&l.call(this,t,e),t)t.hasOwnProperty(i)&&this._setAttr(e+s(i),t[i]);return t||i.forEach(t=>{this._setAttr(e+s(t),void 0)}),this._fireChangeEvent(e,a,t),n&&n.call(this),this},q.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter(t,e){let i=C._capitalize(e),r="set"+i,n="get"+i;t.prototype[e]=function(){return arguments.length?(this[r](arguments[0]),this):this[n]()}},addDeprecatedGetterSetter(t,e,i,r){C.error("Adding deprecated "+e);let n="get"+C._capitalize(e),a=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[n]=function(){C.error(a);let t=this.attrs[e];return void 0===t?i:t},q.addSetter(t,e,r,function(){C.error(a)}),q.addOverloadedGetterSetter(t,e)},backCompat(t,e){C.each(e,function(e,i){let r=t.prototype[i],n="get"+C._capitalize(e),a="set"+C._capitalize(e);function s(){r.apply(this,arguments),C.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}t.prototype[e]=s,t.prototype[n]=s,t.prototype[a]=s})},afterSetFilter(){this._filterUpToDate=!1}},U="absoluteOpacity",V="allEventListeners",K="absoluteTransform",$="absoluteScale",Q="canvas",J="listening",Z="Shape",tt="stage",te="transform",ti="visible",tr=1;class tn{constructor(t){this._id=tr++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===te||t===K)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,e){let i=this._cache.get(t),r=t===te||t===K;return(void 0===i||r&&!0===i.dirty)&&(i=e.call(this),this._cache.set(t,i)),i}_calculate(t,e,i){if(!this._attachedDepsListeners.get(t)){let i=e.map(t=>t+"Change.konva").join(" ");this.on(i,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,i)}_getCanvasCache(){return this._cache.get(Q)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===K&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Q)){let{scene:t,filter:e,hit:i,buffer:r}=this._cache.get(Q);C.releaseCanvas(t,e,i,r),this._cache.delete(Q)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){let e=t||{},i={};(void 0===e.x||void 0===e.y||void 0===e.width||void 0===e.height)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let r=Math.ceil(e.width||i.width),n=Math.ceil(e.height||i.height),a=e.pixelRatio,s=void 0===e.x?Math.floor(i.x):e.x,o=void 0===e.y?Math.floor(i.y):e.y,h=e.offset||0,l=e.drawBorder||!1,d=e.hitCanvasPixelRatio||1;if(!r||!n)return void C.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");let u=+(Math.abs(Math.round(i.x)-s)>.5),c=+(Math.abs(Math.round(i.y)-o)>.5);r+=2*h+u,n+=2*h+c,s-=h,o-=h;let f=new I({pixelRatio:a,width:r,height:n}),g=new I({pixelRatio:a,width:0,height:0,willReadFrequently:!0}),p=new L({pixelRatio:d,width:r,height:n}),_=f.getContext(),m=p.getContext(),v=new I({width:f.width/f.pixelRatio+Math.abs(s),height:f.height/f.pixelRatio+Math.abs(o),pixelRatio:f.pixelRatio}),y=v.getContext();return p.isCache=!0,f.isCache=!0,this._cache.delete(Q),this._filterUpToDate=!1,!1===e.imageSmoothingEnabled&&(f.getContext()._context.imageSmoothingEnabled=!1,g.getContext()._context.imageSmoothingEnabled=!1),_.save(),m.save(),y.save(),_.translate(-s,-o),m.translate(-s,-o),y.translate(-s,-o),v.x=s,v.y=o,this._isUnderCache=!0,this._clearSelfAndDescendantCache(U),this._clearSelfAndDescendantCache($),this.drawScene(f,this,v),this.drawHit(p,this),this._isUnderCache=!1,_.restore(),m.restore(),l&&(_.save(),_.beginPath(),_.rect(0,0,r,n),_.closePath(),_.setAttr("strokeStyle","red"),_.setAttr("lineWidth",5),_.stroke(),_.restore()),this._cache.set(Q,{scene:f,filter:g,hit:p,buffer:v,x:s,y:o}),this._requestDraw(),this}isCached(){return this._cache.has(Q)}getClientRect(t){throw Error('abstract "getClientRect" method call')}_transformedRect(t,e){let i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],r=1/0,n=1/0,a=-1/0,s=-1/0,o=this.getAbsoluteTransform(e);return i.forEach(function(t){let e=o.point(t);void 0===r&&(r=a=e.x,n=s=e.y),r=Math.min(r,e.x),n=Math.min(n,e.y),a=Math.max(a,e.x),s=Math.max(s,e.y)}),{x:r,y:n,width:a-r,height:s-n}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);let e=this._getCanvasCache();t.translate(e.x,e.y);let i=this._getCachedSceneCanvas(),r=i.pixelRatio;t.drawImage(i._canvas,0,0,i.width/r,i.height/r),t.restore()}_drawCachedHitCanvas(t){let e=this._getCanvasCache(),i=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),e=this._getCanvasCache(),i=e.scene,r=e.filter,n=r.getContext(),a,s,o,h;if(!t||0===t.length)return i;if(this._filterUpToDate)return r;let l=!0;for(let e=0;e<t.length;e++)if("string"==typeof t[e]&&!P(),"string"!=typeof t[e]||!P()){l=!1;break}let d=i.pixelRatio;if(r.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio),l){let e=t.join(" ");return n.save(),n.setAttr("filter",e),n.drawImage(i._canvas,0,0,i.getWidth()/d,i.getHeight()/d),n.restore(),this._filterUpToDate=!0,r}try{for(a=t.length,n.clear(),n.drawImage(i._canvas,0,0,i.getWidth()/d,i.getHeight()/d),s=n.getImageData(0,0,r.getWidth(),r.getHeight()),o=0;o<a;o++)h=t[o],"string"==typeof h&&(h=function(t){let e,i=/(\w+)\(([^)]+)\)/g;for(;null!==(e=i.exec(t));){let[,t,i]=e;switch(t){case"blur":{let t=parseFloat(i.replace("px",""));return function(e){this.blurRadius(.5*t);let i=c.Filters;i&&i.Blur&&i.Blur.call(this,e)}}case"brightness":{let t=i.includes("%")?parseFloat(i)/100:parseFloat(i);return function(e){this.brightness(t);let i=c.Filters;i&&i.Brightness&&i.Brightness.call(this,e)}}case"contrast":{let t=parseFloat(i);return function(e){let i=100*(Math.sqrt(t)-1);this.contrast(i);let r=c.Filters;r&&r.Contrast&&r.Contrast.call(this,e)}}case"grayscale":return function(t){let e=c.Filters;e&&e.Grayscale&&e.Grayscale.call(this,t)};case"sepia":return function(t){let e=c.Filters;e&&e.Sepia&&e.Sepia.call(this,t)};case"invert":return function(t){let e=c.Filters;e&&e.Invert&&e.Invert.call(this,t)};default:C.warn(`CSS filter "${t}" is not supported in fallback mode. Consider using function filters for better compatibility.`)}}return()=>{}}(h)),h.call(this,s),n.putImageData(s,0,0)}catch(t){C.error("Unable to apply filter. "+t.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,r}on(t,e){if(this._cache&&this._cache.delete(V),3==arguments.length)return this._delegate.apply(this,arguments);let i=t.split(" ");for(let t=0;t<i.length;t++){let r=i[t].split("."),n=r[0],a=r[1]||"";this.eventListeners[n]||(this.eventListeners[n]=[]),this.eventListeners[n].push({name:a,handler:e})}return this}off(t,e){let i=(t||"").split(" "),r=i.length,n,a,s,o,h;if(this._cache&&this._cache.delete(V),!t)for(a in this.eventListeners)this._off(a);for(n=0;n<r;n++)if(o=(s=i[n].split("."))[0],h=s[1],o)this.eventListeners[o]&&this._off(o,h,e);else for(a in this.eventListeners)this._off(a,h,e);return this}dispatchEvent(t){let e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}addEventListener(t,e){return this.on(t,function(t){e.call(this,t.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,e,i){let r=this;this.on(t,function(t){let n=t.target.findAncestors(e,!0,r);for(let e=0;e<n.length;e++)(t=C.cloneObject(t)).currentTarget=n[e],i.call(n[e],t)})}remove(){return this.isDragging()&&this.stopDrag(),F._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(K),this._clearSelfAndDescendantCache(U),this._clearSelfAndDescendantCache($),this._clearSelfAndDescendantCache(tt),this._clearSelfAndDescendantCache(ti),this._clearSelfAndDescendantCache(J)}_remove(){this._clearCaches();let t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){let e="get"+C._capitalize(t);return C._isFunction(this[e])?this[e]():this.attrs[t]}getAncestors(){let t=this.getParent(),e=[];for(;t;)e.push(t),t=t.getParent();return e}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let e,i;if(!t)return this;for(e in t)"children"!==e&&(i="set"+C._capitalize(e),C._isFunction(this[i])?this[i](t[e]):this._setAttr(e,t[e]))}),this}isListening(){return this._getCache(J,this._isListening)}_isListening(t){if(!this.listening())return!1;let e=this.getParent();return!e||e===t||this===t||e._isListening(t)}isVisible(){return this._getCache(ti,this._isVisible)}_isVisible(t){if(!this.visible())return!1;let e=this.getParent();return!e||e===t||this===t||e._isVisible(t)}shouldDrawHit(t,e=!1){if(t)return this._isVisible(t)&&this._isListening(t);let i=this.getLayer(),r=!1;F._dragElements.forEach(t=>{"dragging"!==t.dragStatus||("Stage"===t.node.nodeType?r=!0:t.node.getLayer()===i&&(r=!0))});let n=!e&&!c.hitOnDragEnabled&&(r||c.isTransforming());return this.isListening()&&this.isVisible()&&!n}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),e=this,i=0,r,n,a,s,o=this.getStage();return"Stage"!==e.nodeType&&o&&function o(h){for(a=0,r=[],n=h.length;a<n;a++)s=h[a],i++,s.nodeType!==Z&&(r=r.concat(s.getChildren().slice())),s._id===e._id&&(a=n);r.length>0&&r[0].getDepth()<=t&&o(r)}(o.getChildren()),i}getDepth(){let t=0,e=this.parent;for(;e;)t++,e=e.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(te),this._clearSelfAndDescendantCache(K)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){let t=this.getStage();if(!t)return null;let e=t.getPointerPosition();if(!e)return null;let i=this.getAbsoluteTransform().copy();return i.invert(),i.point(e)}getAbsolutePosition(t){let e=!1,i=this.parent;for(;i;){if(i.isCached()){e=!0;break}i=i.parent}e&&!t&&(t=!0);let r=this.getAbsoluteTransform(t).getMatrix(),n=new _,a=this.offset();return n.m=r.slice(),n.translate(a.x,a.y),n.getTranslation()}setAbsolutePosition(t){let{x:e,y:i,...r}=this._clearTransform();this.attrs.x=e,this.attrs.y=i,this._clearCache(te);let n=this._getAbsoluteTransform().copy();return n.invert(),n.translate(t.x,t.y),t={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this._setTransform(r),this.setPosition({x:t.x,y:t.y}),this._clearCache(te),this._clearSelfAndDescendantCache(K),this}_setTransform(t){let e;for(e in t)this.attrs[e]=t[e]}_clearTransform(){let t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let e=t.x,i=t.y,r=this.x(),n=this.y();return void 0!==e&&(r+=e),void 0!==i&&(n+=i),this.setPosition({x:r,y:n}),this}_eachAncestorReverse(t,e){let i=[],r=this.getParent(),n,a;if(!e||e._id!==this._id){for(i.unshift(this);r&&(!e||r._id!==e._id);)i.unshift(r),r=r.parent;for(a=0,n=i.length;a<n;a++)t(i[a])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return C.warn("Node has no parent. moveToTop function is ignored."),!1;let t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return C.warn("Node has no parent. moveUp function is ignored."),!1;let t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return C.warn("Node has no parent. moveDown function is ignored."),!1;let t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return C.warn("Node has no parent. moveToBottom function is ignored."),!1;let t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(t){if(!this.parent)return C.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&C.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");let e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(U,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),e,i,r,n,a={attrs:{},className:this.getClassName()};for(e in t)i=t[e],(!C.isObject(i)||C._isPlainObject(i)||C._isArray(i))&&(r="function"==typeof this[e]&&this[e],delete t[e],n=r?r.call(this):null,t[e]=i,n!==i&&(a.attrs[e]=i));return C._prepareToStringify(a)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,e,i){let r=[];e&&this._isMatch(t)&&r.push(this);let n=this.parent;for(;n&&n!==i;)n._isMatch(t)&&r.push(n),n=n.parent;return r}isAncestorOf(t){return!1}findAncestor(t,e,i){return this.findAncestors(t,e,i)[0]}_isMatch(t){if(!t)return!1;if("function"==typeof t)return t(this);let e=t.replace(/ /g,"").split(","),i=e.length,r,n;for(r=0;r<i;r++)if(n=e[r],C.isValidSelector(n)||(C.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),C.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),C.warn("Konva is awesome, right?")),"#"===n.charAt(0)){if(this.id()===n.slice(1))return!0}else if("."===n.charAt(0)){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1}getLayer(){let t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(tt,this._getStage)}_getStage(){let t=this.getParent();return t?t.getStage():null}fire(t,e={},i){return e.target=e.target||this,i?this._fireAndBubble(t,e):this._fire(t,e),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(K,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let e;if(t)return e=new _,this._eachAncestorReverse(function(t){let i=t.transformsEnabled();"all"===i?e.multiply(t.getTransform()):"position"===i&&e.translate(t.x()-t.offsetX(),t.y()-t.offsetY())},t),e;{e=this._cache.get(K)||new _,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();let t=this.transformsEnabled();if("all"===t)e.multiply(this.getTransform());else if("position"===t){let t=this.attrs.x||0,i=this.attrs.y||0,r=this.attrs.offsetX||0,n=this.attrs.offsetY||0;e.translate(t-r,i-n)}return e.dirty=!1,e}}getAbsoluteScale(t){let e=this;for(;e;)e._isUnderCache&&(t=e),e=e.getParent();let i=this.getAbsoluteTransform(t).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(te,this._getTransform)}_getTransform(){var t,e;let i=this._cache.get(te)||new _;i.reset();let r=this.x(),n=this.y(),a=c.getAngle(this.rotation()),s=null!=(t=this.attrs.scaleX)?t:1,o=null!=(e=this.attrs.scaleY)?e:1,h=this.attrs.skewX||0,l=this.attrs.skewY||0,d=this.attrs.offsetX||0,u=this.attrs.offsetY||0;return(0!==r||0!==n)&&i.translate(r,n),0!==a&&i.rotate(a),(0!==h||0!==l)&&i.skew(h,l),(1!==s||1!==o)&&i.scale(s,o),(0!==d||0!==u)&&i.translate(-1*d,-1*u),i.dirty=!1,i}clone(t){let e=C.cloneObject(this.attrs),i,r,n,a,s;for(i in t)e[i]=t[i];let o=new this.constructor(e);for(i in this.eventListeners)for(a=0,n=(r=this.eventListeners[i]).length;a<n;a++)0>(s=r[a]).name.indexOf("konva")&&(o.eventListeners[i]||(o.eventListeners[i]=[]),o.eventListeners[i].push(s));return o}_toKonvaCanvas(t){t=t||{};let e=this.getClientRect(),i=this.getStage(),r=void 0!==t.x?t.x:Math.floor(e.x),n=void 0!==t.y?t.y:Math.floor(e.y),a=t.pixelRatio||1,s=new I({width:t.width||Math.ceil(e.width)||(i?i.width():0),height:t.height||Math.ceil(e.height)||(i?i.height():0),pixelRatio:a}),o=s.getContext(),h=new I({width:s.width/s.pixelRatio+Math.abs(r),height:s.height/s.pixelRatio+Math.abs(n),pixelRatio:s.pixelRatio});return!1===t.imageSmoothingEnabled&&(o._context.imageSmoothingEnabled=!1),o.save(),(r||n)&&o.translate(-1*r,-1*n),this.drawScene(s,void 0,h),o.restore(),s}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){let e=(t=t||{}).mimeType||null,i=t.quality||null,r=this._toKonvaCanvas(t).toDataURL(e,i);return t.callback&&t.callback(r),r}toImage(t){return new Promise((e,i)=>{try{let i=null==t?void 0:t.callback;i&&delete t.callback,C._urlToImage(this.toDataURL(t),function(t){e(t),null==i||i(t)})}catch(t){i(t)}})}toBlob(t){return new Promise((e,i)=>{try{let i=null==t?void 0:t.callback;i&&delete t.callback,this.toCanvas(t).toBlob(t=>{e(t),null==i||i(t)},null==t?void 0:t.mimeType,null==t?void 0:t.quality)}catch(t){i(t)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():c.dragDistance}_off(t,e,i){let r=this.eventListeners[t],n,a,s;for(n=0;n<r.length;n++)if(a=r[n].name,s=r[n].handler,("konva"!==a||"konva"===e)&&(!e||a===e)&&(!i||i===s)){if(r.splice(n,1),0===r.length){delete this.eventListeners[t];break}n--}}_fireChangeEvent(t,e,i){this._fire(t+"Change",{oldVal:e,newVal:i})}addName(t){if(!this.hasName(t)){let e=this.name();this.name(e?e+" "+t:t)}return this}hasName(t){if(!t)return!1;let e=this.name();return!!e&&-1!==(e||"").split(/\s/g).indexOf(t)}removeName(t){let e=(this.name()||"").split(/\s/g),i=e.indexOf(t);return -1!==i&&(e.splice(i,1),this.name(e.join(" "))),this}setAttr(t,e){let i=this["set"+C._capitalize(t)];return C._isFunction(i)?i.call(this,e):this._setAttr(t,e),this}_requestDraw(){if(c.autoDrawEnabled){let t=this.getLayer()||this.getStage();null==t||t.batchDraw()}}_setAttr(t,e){let i=this.attrs[t];(i!==e||C.isObject(e))&&(null==e?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,i,e),this._requestDraw())}_setComponentAttr(t,e,i){let r;void 0!==i&&((r=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=i,this._fireChangeEvent(t,r,i))}_fireAndBubble(t,e,i){e&&this.nodeType===Z&&(e.target=this);let r=["mouseenter","mouseleave","pointerenter","pointerleave","touchenter","touchleave"];if(!(-1!==r.indexOf(t)&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||"Stage"===this.nodeType&&!i))){this._fire(t,e);let n=-1!==r.indexOf(t)&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!n&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i):this._fireAndBubble.call(this.parent,t,e))}}_getProtoListeners(t){var e,i,r;let n=null!=(e=this._cache.get(V))?e:{},a=null==n?void 0:n[t];if(void 0===a){a=[];let e=Object.getPrototypeOf(this);for(;e;){let n=null!=(r=null==(i=e.eventListeners)?void 0:i[t])?r:[];a.push(...n),e=Object.getPrototypeOf(e)}n[t]=a,this._cache.set(V,n)}return a}_fire(t,e){(e=e||{}).currentTarget=this,e.type=t;let i=this._getProtoListeners(t);if(i)for(let t=0;t<i.length;t++)i[t].handler.call(this,e);let r=this.eventListeners[t];if(r)for(let t=0;t<r.length;t++)r[t].handler.call(this,e)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){let e=t?t.pointerId:void 0,i=this.getStage(),r=this.getAbsolutePosition();if(!i)return;let n=i._getPointerById(e)||i._changedPointerPositions[0]||r;F._dragElements.set(this._id,{node:this,startPointerPos:n,offset:{x:n.x-r.x,y:n.y-r.y},dragStatus:"ready",pointerId:e})}startDrag(t,e=!0){F._dragElements.has(this._id)||this._createDragElement(t),F._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}_setDragPosition(t,e){let i=this.getStage()._getPointerById(e.pointerId);if(!i)return;let r={x:i.x-e.offset.x,y:i.y-e.offset.y},n=this.dragBoundFunc();if(void 0!==n){let e=n.call(this,r,t);e?r=e:C.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===r.x&&this._lastPos.y===r.y||(this.setAbsolutePosition(r),this._requestDraw()),this._lastPos=r}stopDrag(t){let e=F._dragElements.get(this._id);e&&(e.dragStatus="stopped"),F._endDragBefore(t),F._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){let t=F._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(void 0===t.evt.button||c.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let e=!1;F._dragElements.forEach(t=>{this.isAncestorOf(t.node)&&(e=!0)}),e||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;let t=F._dragElements.get(this._id),e=t&&"dragging"===t.dragStatus,i=t&&"ready"===t.dragStatus;e?this.stopDrag():i&&F._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){let e=this.getStage();if(!e)return!1;let i={x:-t.x,y:-t.y,width:e.width()+2*t.x,height:e.height()+2*t.y};return C.haveIntersection(i,this.getClientRect())}static create(t,e){return C._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}static _createNode(t,e){let i=tn.prototype.getClassName.call(t),r=t.children,n,a,s;if(e&&(t.attrs.container=e),c[i]||(C.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape"),n=new c[i](t.attrs),r)for(s=0,a=r.length;s<a;s++)n.add(tn._createNode(r[s]));return n}}tn.prototype.nodeType="Node",tn.prototype._attrsAffectingSize=[],tn.prototype.eventListeners={},tn.prototype.on.call(tn.prototype,"xChange.konva yChange.konva scaleXChange.konva scaleYChange.konva skewXChange.konva skewYChange.konva rotationChange.konva offsetXChange.konva offsetYChange.konva transformsEnabledChange.konva",function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(te),this._clearSelfAndDescendantCache(K)}),tn.prototype.on.call(tn.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(ti)}),tn.prototype.on.call(tn.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(J)}),tn.prototype.on.call(tn.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(U)});let ta=q.addGetterSetter;ta(tn,"zIndex"),ta(tn,"absolutePosition"),ta(tn,"position"),ta(tn,"x",0,z()),ta(tn,"y",0,z()),ta(tn,"globalCompositeOperation","source-over",Y()),ta(tn,"opacity",1,z()),ta(tn,"name","",Y()),ta(tn,"id","",Y()),ta(tn,"rotation",0,z()),q.addComponentsGetterSetter(tn,"scale",["x","y"]),ta(tn,"scaleX",1,z()),ta(tn,"scaleY",1,z()),q.addComponentsGetterSetter(tn,"skew",["x","y"]),ta(tn,"skewX",0,z()),ta(tn,"skewY",0,z()),q.addComponentsGetterSetter(tn,"offset",["x","y"]),ta(tn,"offsetX",0,z()),ta(tn,"offsetY",0,z()),ta(tn,"dragDistance",void 0,z()),ta(tn,"width",0,z()),ta(tn,"height",0,z()),ta(tn,"listening",!0,j()),ta(tn,"preventDefault",!0,j()),ta(tn,"filters",void 0,function(t){return this._filterUpToDate=!1,t}),ta(tn,"visible",!0,j()),ta(tn,"transformsEnabled","all",Y()),ta(tn,"size"),ta(tn,"dragBoundFunc"),ta(tn,"draggable",!1,j()),q.backCompat(tn,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class ts extends tn{constructor(){super(...arguments),this.children=[]}getChildren(t){let e=this.children||[];return t?e.filter(t):e}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(0===t.length)return this;if(t.length>1){for(let e=0;e<t.length;e++)this.add(t[e]);return this}let e=t[0];return e.getParent()?e.moveTo(this):(this._validateAdd(e),e.index=this.getChildren().length,e.parent=this,e._clearCaches(),this.getChildren().push(e),this._fire("add",{child:e}),this._requestDraw()),this}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){let e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}_generalFind(t,e){let i=[];return this._descendants(r=>{let n=r._isMatch(t);return n&&i.push(r),!!n&&!!e}),i}_descendants(t){for(let e of this.getChildren())if(t(e)||e.hasChildren()&&e._descendants(t))return!0;return!1}toObject(){let t=tn.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(e=>{t.children.push(e.toObject())}),t}isAncestorOf(t){let e=t.getParent();for(;e;){if(e._id===this._id)return!0;e=e.getParent()}return!1}clone(t){let e=tn.prototype.clone.call(this,t);return this.getChildren().forEach(function(t){e.add(t.clone())}),e}getAllIntersections(t){let e=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(t)&&e.push(i)}),e}_clearSelfAndDescendantCache(t){var e;super._clearSelfAndDescendantCache(t),this.isCached()||null==(e=this.children)||e.forEach(function(e){e._clearSelfAndDescendantCache(t)})}_setChildrenIndices(){var t;null==(t=this.children)||t.forEach(function(t,e){t.index=e}),this._requestDraw()}drawScene(t,e,i){let r=this.getLayer(),n=t||r&&r.getCanvas(),a=n&&n.getContext(),s=this._getCanvasCache(),o=s&&s.scene,h=n&&n.isCache;if(!this.isVisible()&&!h)return this;if(o){a.save();let t=this.getAbsoluteTransform(e).getMatrix();a.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this._drawCachedSceneCanvas(a),a.restore()}else this._drawChildren("drawScene",n,e,i);return this}drawHit(t,e){if(!this.shouldDrawHit(e))return this;let i=this.getLayer(),r=t||i&&i.hitCanvas,n=r&&r.getContext(),a=this._getCanvasCache();if(a&&a.hit){n.save();let t=this.getAbsoluteTransform(e).getMatrix();n.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this._drawCachedHitCanvas(n),n.restore()}else this._drawChildren("drawHit",r,e);return this}_drawChildren(t,e,i,r){var n;let a=e&&e.getContext(),s=this.clipWidth(),o=this.clipHeight(),h=this.clipFunc(),l="number"==typeof s&&"number"==typeof o||h,d=i===this;if(l){let t;a.save();let e=this.getAbsoluteTransform(i),r=e.getMatrix();if(a.transform(r[0],r[1],r[2],r[3],r[4],r[5]),a.beginPath(),h)t=h.call(this,a,this);else{let t=this.clipX(),e=this.clipY();a.rect(t||0,e||0,s,o)}a.clip.apply(a,t),r=e.copy().invert().getMatrix(),a.transform(r[0],r[1],r[2],r[3],r[4],r[5])}let u=!d&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===t;u&&(a.save(),a._applyGlobalCompositeOperation(this)),null==(n=this.children)||n.forEach(function(n){n[t](e,i,r)}),u&&a.restore(),l&&a.restore()}getClientRect(t={}){var e;let i,r,n,a,s=t.skipTransform,o=t.relativeTo,h={x:1/0,y:1/0,width:0,height:0},l=this;null==(e=this.children)||e.forEach(function(e){if(!e.visible())return;let s=e.getClientRect({relativeTo:l,skipShadow:t.skipShadow,skipStroke:t.skipStroke});(0!==s.width||0!==s.height)&&(void 0===i?(i=s.x,r=s.y,n=s.x+s.width,a=s.y+s.height):(i=Math.min(i,s.x),r=Math.min(r,s.y),n=Math.max(n,s.x+s.width),a=Math.max(a,s.y+s.height)))});let d=this.find("Shape"),u=!1;for(let t=0;t<d.length;t++)if(d[t]._isVisible(this)){u=!0;break}return(h=u&&void 0!==i?{x:i,y:r,width:n-i,height:a-r}:{x:0,y:0,width:0,height:0},s)?h:this._transformedRect(h,o)}}q.addComponentsGetterSetter(ts,"clip",["x","y","width","height"]),q.addGetterSetter(ts,"clipX",void 0,z()),q.addGetterSetter(ts,"clipY",void 0,z()),q.addGetterSetter(ts,"clipWidth",void 0,z()),q.addGetterSetter(ts,"clipHeight",void 0,z()),q.addGetterSetter(ts,"clipFunc");let to=new Map,th=void 0!==c._global.PointerEvent;function tl(t){return{evt:t,pointerId:t.pointerId}}function td(t,e){tu(t),e.getStage()&&(to.set(t,e),th&&e._fire("gotpointercapture",tl(new PointerEvent("gotpointercapture"))))}function tu(t,e){let i=to.get(t);if(!i)return;let r=i.getStage();r&&r.content,to.delete(t),th&&i._fire("lostpointercapture",tl(new PointerEvent("lostpointercapture")))}let tc="mouseleave",tf="mouseover",tg="mouseenter",tp="mousemove",t_="mousedown",tm="mouseup",tv="pointermove",ty="pointerdown",tx="pointerup",tb="pointercancel",tw="pointerout",tS="pointerleave",tC="pointerover",tT="pointerenter",tk="contextmenu",tP="touchstart",tA="touchend",tM="touchmove",tR="touchcancel",tE="wheel",tI=[[tg,"_pointerenter"],[t_,"_pointerdown"],[tp,"_pointermove"],[tm,"_pointerup"],[tc,"_pointerleave"],[tP,"_pointerdown"],[tM,"_pointermove"],[tA,"_pointerup"],[tR,"_pointercancel"],[tf,"_pointerover"],[tE,"_wheel"],[tk,"_contextmenu"],[ty,"_pointerdown"],[tv,"_pointermove"],[tx,"_pointerup"],[tb,"_pointercancel"],[tS,"_pointerleave"],["lostpointercapture","_lostpointercapture"]],tO={[tw]:"mouseout",[tS]:tc,[tC]:tf,[tT]:tg,[tv]:tp,[ty]:t_,[tx]:tm,[tb]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},tD={[tw]:"touchout",[tS]:"touchleave",[tC]:"touchover",[tT]:"touchenter",[tv]:tM,[ty]:tP,[tx]:tA,[tb]:tR,pointerclick:"tap",pointerdblclick:"dbltap"},tG={[tw]:tw,[tS]:tS,[tC]:tC,[tT]:tT,[tv]:tv,[ty]:ty,[tx]:tx,[tb]:tb,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"},tL=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",tF=t=>{let e=tL(t);return"pointer"===e?c.pointerEventsEnabled&&tG:"touch"===e?tD:"mouse"===e?tO:void 0};function tB(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&C.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}let tN=[];class tz extends ts{constructor(t){super(tB(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),tN.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{tB(this.attrs)}),this._checkVisibility()}_validateAdd(t){let e="Layer"===t.getType(),i="FastLayer"===t.getType();e||i||C.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;let t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if("string"==typeof t){let e;if("."===t.charAt(0)){let e=t.slice(1);t=document.getElementsByClassName(e)[0]}else e="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(e);if(!t)throw"Can not find container in document with id "+e}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){let t=this.children,e=t.length;for(let i=0;i<e;i++)t[i].clear();return this}clone(t){return t||(t={}),t.container="undefined"!=typeof document&&document.createElement("div"),ts.prototype.clone.call(this,t)}destroy(){super.destroy();let t=this.content;t&&C._isInDocument(t)&&this.container().removeChild(t);let e=tN.indexOf(this);return e>-1&&tN.splice(e,1),C.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){let t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(C.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(t){return this._pointerPositions.find(e=>e.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){(t={...t}).x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();let e=new I({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),i=e.getContext()._context,r=this.children;return(t.x||t.y)&&i.translate(-1*t.x,-1*t.y),r.forEach(function(e){if(!e.isVisible())return;let r=e._toKonvaCanvas(t);i.drawImage(r._canvas,t.x,t.y,r.getWidth()/r.getPixelRatio(),r.getHeight()/r.getPixelRatio())}),e}getIntersection(t){if(!t)return null;let e=this.children,i=e.length-1;for(let r=i;r>=0;r--){let i=e[r].getIntersection(t);if(i)return i}return null}_resizeDOM(){let t=this.width(),e=this.height();this.content&&(this.content.style.width=t+"px",this.content.style.height=e+"px"),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach(i=>{i.setSize({width:t,height:e}),i.draw()})}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}super.add(t);let e=this.children.length;return e>5&&C.warn("The stage has "+e+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),c.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return to.get(t)===this}setPointerCapture(t){td(t,this)}releaseCapture(t){tu(t,this)}getLayers(){return this.children}_bindContentEvents(){c.isBrowser&&tI.forEach(([t,e])=>{this.content.addEventListener(t,t=>{this[e](t)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);let e=tF(t.type);e&&this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);let e=tF(t.type);e&&this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}_pointerleave(t){let e=tF(t.type),i=tL(t.type);if(!e)return;this.setPointersPositions(t);let r=this._getTargetShape(i),n=!(c.isDragging()||c.isTransforming())||c.hitOnDragEnabled;r&&n?(r._fireAndBubble(e.pointerout,{evt:t}),r._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[i+"targetShape"]=null):n&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){let e=tF(t.type),i=tL(t.type);if(!e)return;this.setPointersPositions(t);let r=!1;this._changedPointerPositions.forEach(n=>{let a=this.getIntersection(n);if(F.justDragged=!1,c["_"+i+"ListenClick"]=!0,!a||!a.isListening()){this[i+"ClickStartShape"]=void 0;return}c.capturePointerEventsEnabled&&a.setPointerCapture(n.id),this[i+"ClickStartShape"]=a,a._fireAndBubble(e.pointerdown,{evt:t,pointerId:n.id}),r=!0;let s=t.type.indexOf("touch")>=0;a.preventDefault()&&t.cancelable&&s&&t.preventDefault()}),r||this._fire(e.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){let e=tF(t.type),i=tL(t.type);if(!e)return;let r=t.type.indexOf("touch")>=0||"touch"===t.pointerType;if(c.isDragging()&&F.node.preventDefault()&&t.cancelable&&r&&t.preventDefault(),this.setPointersPositions(t),!(!(c.isDragging()||c.isTransforming())||c.hitOnDragEnabled))return;let n={},a=!1,s=this._getTargetShape(i);this._changedPointerPositions.forEach(r=>{var o;let h=(o=r.id,to.get(o)||this.getIntersection(r)),l=r.id,d={evt:t,pointerId:l},u=s!==h;if(u&&s&&(s._fireAndBubble(e.pointerout,{...d},h),s._fireAndBubble(e.pointerleave,{...d},h)),h){if(n[h._id])return;n[h._id]=!0}h&&h.isListening()?(a=!0,u&&(h._fireAndBubble(e.pointerover,{...d},s),h._fireAndBubble(e.pointerenter,{...d},s),this[i+"targetShape"]=h),h._fireAndBubble(e.pointermove,{...d})):s&&(this._fire(e.pointerover,{evt:t,target:this,currentTarget:this,pointerId:l}),this[i+"targetShape"]=null)}),a||this._fire(e.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){let e=tF(t.type),i=tL(t.type);if(!e)return;this.setPointersPositions(t);let r=this[i+"ClickStartShape"],n=this[i+"ClickEndShape"],a={},s=!1;this._changedPointerPositions.forEach(o=>{var h;let l=(h=o.id,to.get(h)||this.getIntersection(o));if(l){if(l.releaseCapture(o.id),a[l._id])return;a[l._id]=!0}let d=o.id,u={evt:t,pointerId:d},f=!1;c["_"+i+"InDblClickWindow"]?(f=!0,clearTimeout(this[i+"DblTimeout"])):F.justDragged||(c["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){c["_"+i+"InDblClickWindow"]=!1},c.dblClickWindow),l&&l.isListening()?(s=!0,this[i+"ClickEndShape"]=l,l._fireAndBubble(e.pointerup,{...u}),c["_"+i+"ListenClick"]&&r&&r===l&&(l._fireAndBubble(e.pointerclick,{...u}),f&&n&&n===l&&l._fireAndBubble(e.pointerdblclick,{...u}))):(this[i+"ClickEndShape"]=null,s||(this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s=!0),c["_"+i+"ListenClick"]&&this._fire(e.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:d}),f&&this._fire(e.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:d}))}),s||this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),c["_"+i+"ListenClick"]=!1,t.cancelable&&"touch"!==i&&"pointer"!==i&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);let e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(tk,{evt:t}):this._fire(tk,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);let e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(tE,{evt:t}):this._fire(tE,{evt:t,target:this,currentTarget:this})}_pointercancel(t){var e;this.setPointersPositions(t);let i=(e=t.pointerId,to.get(e)||this.getIntersection(this.getPointerPosition()));i&&i._fireAndBubble(tx,tl(t)),tu(t.pointerId)}_lostpointercapture(t){tu(t.pointerId)}setPointersPositions(t){let e=this._getContentPosition(),i=null,r=null;void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,t=>{this._pointerPositions.push({id:t.identifier,x:(t.clientX-e.left)/e.scaleX,y:(t.clientY-e.top)/e.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,t=>{this._changedPointerPositions.push({id:t.identifier,x:(t.clientX-e.left)/e.scaleX,y:(t.clientY-e.top)/e.scaleY})})):(i=(t.clientX-e.left)/e.scaleX,r=(t.clientY-e.top)/e.scaleY,this.pointerPos={x:i,y:r},this._pointerPositions=[{x:i,y:r,id:C._getFirstPointerId(t)}],this._changedPointerPositions=[{x:i,y:r,id:C._getFirstPointerId(t)}])}_setPointerPosition(t){C.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};let t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new I({width:this.width(),height:this.height()}),this.bufferHitCanvas=new L({pixelRatio:1,width:this.width(),height:this.height()}),!c.isBrowser)return;let t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return C.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}}tz.prototype.nodeType="Stage",f(tz),q.addGetterSetter(tz,"container"),c.isBrowser&&document.addEventListener("visibilitychange",()=>{tN.forEach(t=>{t.batchDraw()})});let tW="hasShadow",tH="shadowRGBA",tY="patternImage",tX="linearGradient",tj="radialGradient";function tq(){return i||(i=C.createCanvasElement().getContext("2d"))}let tU={};class tV extends tn{constructor(t){let e;for(super(t);!(e=C.getRandomColor())||e in tU;);this.colorKey=e,tU[e]=this}getContext(){return C.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return C.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(tW,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(tY,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){let t=tq().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(t&&t.setTransform){let e=new _;e.translate(this.fillPatternX(),this.fillPatternY()),e.rotate(c.getAngle(this.fillPatternRotation())),e.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),e.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());let i=e.getMatrix(),r="undefined"==typeof DOMMatrix?{a:i[0],b:i[1],c:i[2],d:i[3],e:i[4],f:i[5]}:new DOMMatrix(i);t.setTransform(r)}return t}}_getLinearGradient(){return this._getCache(tX,this.__getLinearGradient)}__getLinearGradient(){let t=this.fillLinearGradientColorStops();if(t){let e=tq(),i=this.fillLinearGradientStartPoint(),r=this.fillLinearGradientEndPoint(),n=e.createLinearGradient(i.x,i.y,r.x,r.y);for(let e=0;e<t.length;e+=2)n.addColorStop(t[e],t[e+1]);return n}}_getRadialGradient(){return this._getCache(tj,this.__getRadialGradient)}__getRadialGradient(){let t=this.fillRadialGradientColorStops();if(t){let e=tq(),i=this.fillRadialGradientStartPoint(),r=this.fillRadialGradientEndPoint(),n=e.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),r.x,r.y,this.fillRadialGradientEndRadius());for(let e=0;e<t.length;e+=2)n.addColorStop(t[e],t[e+1]);return n}}getShadowRGBA(){return this._getCache(tH,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;let t=C.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){let t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){let e=this.getStage();if(!e)return!1;let i=e.bufferHitCanvas;return i.getContext().clear(),this.drawHit(i,void 0,!0),i.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return tn.prototype.destroy.call(this),delete tU[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var e;if(!(null==(e=this.attrs.perfectDrawEnabled)||e))return!1;let i=t||this.hasFill(),r=this.hasStroke(),n=1!==this.getAbsoluteOpacity();if(i&&r&&n)return!0;let a=this.hasShadow(),s=this.shadowForStrokeEnabled();return!!i&&!!r&&!!a&&!!s}setStrokeHitEnabled(t){C.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){let t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let e=!1,i=this.getParent();for(;i;){if(i.isCached()){e=!0;break}i=i.getParent()}let r=t.skipTransform,n=t.relativeTo||e&&this.getStage()||void 0,a=this.getSelfRect(),s=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=a.width+s,h=a.height+s,l=!t.skipShadow&&this.hasShadow(),d=l?this.shadowOffsetX():0,u=l?this.shadowOffsetY():0,c=o+Math.abs(d),f=h+Math.abs(u),g=l&&this.shadowBlur()||0,p={width:c+2*g,height:f+2*g,x:-(s/2+g)+Math.min(d,0)+a.x,y:-(s/2+g)+Math.min(u,0)+a.y};return r?p:this._transformedRect(p,n)}drawScene(t,e,i){let r,n=this.getLayer(),a=(t||n.getCanvas()).getContext(),s=this._getCanvasCache(),o=this.getSceneFunc(),h=this.hasShadow(),l=e===this;if(!this.isVisible()&&!l)return this;if(s){a.save();let t=this.getAbsoluteTransform(e).getMatrix();return a.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this._drawCachedSceneCanvas(a),a.restore(),this}if(!o)return this;if(a.save(),this._useBufferCanvas()&&1){r=this.getStage();let t=i||r.bufferCanvas,n=t.getContext();n.clear(),n.save(),n._applyLineJoin(this),n._applyMiterLimit(this);let s=this.getAbsoluteTransform(e).getMatrix();n.transform(s[0],s[1],s[2],s[3],s[4],s[5]),o.call(this,n,this),n.restore();let d=t.pixelRatio;h&&a._applyShadow(this),l||(a._applyOpacity(this),a._applyGlobalCompositeOperation(this)),a.drawImage(t._canvas,t.x||0,t.y||0,t.width/d,t.height/d)}else{if(a._applyLineJoin(this),a._applyMiterLimit(this),!l){let t=this.getAbsoluteTransform(e).getMatrix();a.transform(t[0],t[1],t[2],t[3],t[4],t[5]),a._applyOpacity(this),a._applyGlobalCompositeOperation(this)}h&&a._applyShadow(this),o.call(this,a,this)}return a.restore(),this}drawHit(t,e,i=!1){if(!this.shouldDrawHit(e,i))return this;let r=this.getLayer(),n=t||r.hitCanvas,a=n&&n.getContext(),s=this.hitFunc()||this.sceneFunc(),o=this._getCanvasCache(),h=o&&o.hit;if(this.colorKey||C.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),h){a.save();let t=this.getAbsoluteTransform(e).getMatrix();return a.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!s)return this;if(a.save(),a._applyLineJoin(this),a._applyMiterLimit(this),this!==e){let t=this.getAbsoluteTransform(e).getMatrix();a.transform(t[0],t[1],t[2],t[3],t[4],t[5])}return s.call(this,a,this),a.restore(),this}drawHitFromCache(t=0){let e=this._getCanvasCache(),i=this._getCachedSceneCanvas(),r=e.hit,n=r.getContext(),a=r.getWidth(),s=r.getHeight();n.clear(),n.drawImage(i._canvas,0,0,a,s);try{let e=n.getImageData(0,0,a,s),i=e.data,r=i.length,o=C._hexToRgb(this.colorKey);for(let e=0;e<r;e+=4)i[e+3]>t?(i[e]=o.r,i[e+1]=o.g,i[e+2]=o.b,i[e+3]=255):i[e+3]=0;n.putImageData(e,0,0)}catch(t){C.error("Unable to draw hit graph from cached scene canvas. "+t.message)}return this}hasPointerCapture(t){return to.get(t)===this}setPointerCapture(t){td(t,this)}releaseCapture(t){tu(t,this)}}tV.prototype._fillFunc=function(t){let e=this.attrs.fillRule;e?t.fill(e):t.fill()},tV.prototype._strokeFunc=function(t){t.stroke()},tV.prototype._fillFuncHit=function(t){let e=this.attrs.fillRule;e?t.fill(e):t.fill()},tV.prototype._strokeFuncHit=function(t){t.stroke()},tV.prototype._centroid=!1,tV.prototype.nodeType="Shape",f(tV),tV.prototype.eventListeners={},tV.prototype.on.call(tV.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(tW)}),tV.prototype.on.call(tV.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(tH)}),tV.prototype.on.call(tV.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",function(){this._clearCache(tY)}),tV.prototype.on.call(tV.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function(){this._clearCache(tX)}),tV.prototype.on.call(tV.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function(){this._clearCache(tj)}),q.addGetterSetter(tV,"stroke",void 0,X()),q.addGetterSetter(tV,"strokeWidth",2,z()),q.addGetterSetter(tV,"fillAfterStrokeEnabled",!1),q.addGetterSetter(tV,"hitStrokeWidth","auto",H()),q.addGetterSetter(tV,"strokeHitEnabled",!0,j()),q.addGetterSetter(tV,"perfectDrawEnabled",!0,j()),q.addGetterSetter(tV,"shadowForStrokeEnabled",!0,j()),q.addGetterSetter(tV,"lineJoin"),q.addGetterSetter(tV,"lineCap"),q.addGetterSetter(tV,"miterLimit"),q.addGetterSetter(tV,"sceneFunc"),q.addGetterSetter(tV,"hitFunc"),q.addGetterSetter(tV,"dash"),q.addGetterSetter(tV,"dashOffset",0,z()),q.addGetterSetter(tV,"shadowColor",void 0,Y()),q.addGetterSetter(tV,"shadowBlur",0,z()),q.addGetterSetter(tV,"shadowOpacity",1,z()),q.addComponentsGetterSetter(tV,"shadowOffset",["x","y"]),q.addGetterSetter(tV,"shadowOffsetX",0,z()),q.addGetterSetter(tV,"shadowOffsetY",0,z()),q.addGetterSetter(tV,"fillPatternImage"),q.addGetterSetter(tV,"fill",void 0,X()),q.addGetterSetter(tV,"fillPatternX",0,z()),q.addGetterSetter(tV,"fillPatternY",0,z()),q.addGetterSetter(tV,"fillLinearGradientColorStops"),q.addGetterSetter(tV,"strokeLinearGradientColorStops"),q.addGetterSetter(tV,"fillRadialGradientStartRadius",0),q.addGetterSetter(tV,"fillRadialGradientEndRadius",0),q.addGetterSetter(tV,"fillRadialGradientColorStops"),q.addGetterSetter(tV,"fillPatternRepeat","repeat"),q.addGetterSetter(tV,"fillEnabled",!0),q.addGetterSetter(tV,"strokeEnabled",!0),q.addGetterSetter(tV,"shadowEnabled",!0),q.addGetterSetter(tV,"dashEnabled",!0),q.addGetterSetter(tV,"strokeScaleEnabled",!0),q.addGetterSetter(tV,"fillPriority","color"),q.addComponentsGetterSetter(tV,"fillPatternOffset",["x","y"]),q.addGetterSetter(tV,"fillPatternOffsetX",0,z()),q.addGetterSetter(tV,"fillPatternOffsetY",0,z()),q.addComponentsGetterSetter(tV,"fillPatternScale",["x","y"]),q.addGetterSetter(tV,"fillPatternScaleX",1,z()),q.addGetterSetter(tV,"fillPatternScaleY",1,z()),q.addComponentsGetterSetter(tV,"fillLinearGradientStartPoint",["x","y"]),q.addComponentsGetterSetter(tV,"strokeLinearGradientStartPoint",["x","y"]),q.addGetterSetter(tV,"fillLinearGradientStartPointX",0),q.addGetterSetter(tV,"strokeLinearGradientStartPointX",0),q.addGetterSetter(tV,"fillLinearGradientStartPointY",0),q.addGetterSetter(tV,"strokeLinearGradientStartPointY",0),q.addComponentsGetterSetter(tV,"fillLinearGradientEndPoint",["x","y"]),q.addComponentsGetterSetter(tV,"strokeLinearGradientEndPoint",["x","y"]),q.addGetterSetter(tV,"fillLinearGradientEndPointX",0),q.addGetterSetter(tV,"strokeLinearGradientEndPointX",0),q.addGetterSetter(tV,"fillLinearGradientEndPointY",0),q.addGetterSetter(tV,"strokeLinearGradientEndPointY",0),q.addComponentsGetterSetter(tV,"fillRadialGradientStartPoint",["x","y"]),q.addGetterSetter(tV,"fillRadialGradientStartPointX",0),q.addGetterSetter(tV,"fillRadialGradientStartPointY",0),q.addComponentsGetterSetter(tV,"fillRadialGradientEndPoint",["x","y"]),q.addGetterSetter(tV,"fillRadialGradientEndPointX",0),q.addGetterSetter(tV,"fillRadialGradientEndPointY",0),q.addGetterSetter(tV,"fillPatternRotation",0),q.addGetterSetter(tV,"fillRule",void 0,Y()),q.backCompat(tV,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});let tK=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],t$=tK.length;class tQ extends ts{constructor(t){super(t),this.canvas=new I,this.hitCanvas=new L({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);let e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){tn.prototype.moveToTop.call(this);let t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!tn.prototype.moveUp.call(this))return!1;let t=this.getStage();return!!t&&!!t.content&&(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(tn.prototype.moveDown.call(this)){let t=this.getStage();if(t){let e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(tn.prototype.moveToBottom.call(this)){let t=this.getStage();if(t){let e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){let t=this.getNativeCanvasElement();return tn.prototype.remove.call(this),t&&t.parentNode&&C._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){let e=t.getType();"Group"!==e&&"Shape"!==e&&C.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return(t={...t}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),tn.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){C.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){C.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,C.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let e=1,i=!1;for(;;){for(let r=0;r<t$;r++){let n=tK[r],a=this._getIntersection({x:t.x+n.x*e,y:t.y+n.y*e}),s=a.shape;if(s)return s;if(i=!!a.antialiased,!a.antialiased)break}if(!i)return null;e+=1}}_getIntersection(t){let e=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,r=i[3];if(255===r){let t=tU["#"+C._rgbToHex(i[0],i[1],i[2])];return t?{shape:t}:{antialiased:!0}}return r>0?{antialiased:!0}:{}}drawScene(t,e,i){let r=this.getLayer(),n=t||r&&r.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&n.getContext().clear(),ts.prototype.drawScene.call(this,n,e,i),this._fire("draw",{node:this}),this}drawHit(t,e){let i=this.getLayer(),r=t||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),ts.prototype.drawHit.call(this,r,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){C.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return C.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;let t=this.parent;this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return C.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}tQ.prototype.nodeType="Layer",f(tQ),q.addGetterSetter(tQ,"imageSmoothingEnabled",!0),q.addGetterSetter(tQ,"clearBeforeDraw",!0),q.addGetterSetter(tQ,"hitGraphEnabled",!0,j());class tJ extends tQ{constructor(t){super(t),this.listening(!1),C.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}tJ.prototype.nodeType="FastLayer",f(tJ);class tZ extends ts{_validateAdd(t){let e=t.getType();"Group"!==e&&"Shape"!==e&&C.throw("You may only add groups and shapes to groups.")}}tZ.prototype.nodeType="Group",f(tZ);let t0=u.performance&&u.performance.now?function(){return u.performance.now()}:function(){return new Date().getTime()};class t1{constructor(t,e){this.id=t1.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:t0(),frameRate:0},this.func=t,this.setLayers(e)}setLayers(t){let e=[];return t&&(e=Array.isArray(t)?t:[t]),this.layers=e,this}getLayers(){return this.layers}addLayer(t){let e=this.layers,i=e.length;for(let r=0;r<i;r++)if(e[r]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){let t=t1.animations,e=t.length;for(let i=0;i<e;i++)if(t[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=t0(),t1._addAnimation(this),this}stop(){return t1._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){let e=t.id,i=this.animations,r=i.length;for(let t=0;t<r;t++)if(i[t].id===e){this.animations.splice(t,1);break}}static _runFrames(){let t={},e=this.animations;for(let i=0;i<e.length;i++){let r=e[i],n=r.layers,a=r.func;r._updateFrameObject(t0());let s=n.length;if(!a||!1!==a.call(r,r.frame))for(let e=0;e<s;e++){let i=n[e];void 0!==i._id&&(t[i._id]=i)}}for(let e in t)t.hasOwnProperty(e)&&t[e].batchDraw()}static _animationLoop(){t1.animations.length?(t1._runFrames(),C.requestAnimFrame(t1._animationLoop)):t1.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,C.requestAnimFrame(this._animationLoop))}}t1.animations=[],t1.animIdCounter=0,t1.animRunning=!1;let t2={node:1,duration:1,easing:1,onFinish:1,yoyo:1},t5=["fill","stroke","shadowColor"],t3=0;class t4{constructor(t,e,i,r,n,a,s){this.prop=t,this.propFunc=e,this.begin=r,this._pos=r,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=s,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=n-this.begin,this.pause()}fire(t){let e=this[t];e&&e()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){let t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)}pause(){this.state=1,this.fire("onPause")}getTimer(){return new Date().getTime()}}class t8{constructor(t){let e,i;const r=this,n=t.node,a=n._id,s=t.easing||t6.Linear,o=!!t.yoyo;e=void 0===t.duration?.3:0===t.duration?.001:t.duration,this.node=n,this._id=t3++;const h=n.getLayer()||(n instanceof c.Stage?n.getLayers():null);for(i in h||C.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new t1(function(){r.tween.onEnterFrame()},h),this.tween=new t4(i,function(t){r._tweenFunc(t)},s,0,1,1e3*e,o),this._addListeners(),t8.attrs[a]||(t8.attrs[a]={}),t8.attrs[a][this._id]||(t8.attrs[a][this._id]={}),t8.tweens[a]||(t8.tweens[a]={}),t)void 0===t2[i]&&this._addAttr(i,t[i]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,e){let i,r,n,a,s,o=this.node,h=o._id,l=t8.tweens[h][t];l&&delete t8.attrs[h][l][t];let d=o.getAttr(t);if(C._isArray(e))if(i=[],r=Math.max(e.length,d.length),"points"===t&&e.length!==d.length&&(e.length>d.length?(a=d,d=C._prepareArrayForTween(d,e,o.closed())):(n=e,e=C._prepareArrayForTween(e,d,o.closed()))),0===t.indexOf("fill"))for(let t=0;t<r;t++)if(t%2==0)i.push(e[t]-d[t]);else{let r=C.colorToRGBA(d[t]);s=C.colorToRGBA(e[t]),d[t]=r,i.push({r:s.r-r.r,g:s.g-r.g,b:s.b-r.b,a:s.a-r.a})}else for(let t=0;t<r;t++)i.push(e[t]-d[t]);else -1!==t5.indexOf(t)?(d=C.colorToRGBA(d),i={r:(s=C.colorToRGBA(e)).r-d.r,g:s.g-d.g,b:s.b-d.b,a:s.a-d.a}):i=e-d;t8.attrs[h][this._id][t]={start:d,diff:i,end:e,trueEnd:n,trueStart:a},t8.tweens[h][t]=this._id}_tweenFunc(t){let e,i,r,n,a,s,o,h,l=this.node,d=t8.attrs[l._id][this._id];for(e in d){if(r=(i=d[e]).start,n=i.diff,h=i.end,C._isArray(r))if(a=[],o=Math.max(r.length,h.length),0===e.indexOf("fill"))for(s=0;s<o;s++)s%2==0?a.push((r[s]||0)+n[s]*t):a.push("rgba("+Math.round(r[s].r+n[s].r*t)+","+Math.round(r[s].g+n[s].g*t)+","+Math.round(r[s].b+n[s].b*t)+","+(r[s].a+n[s].a*t)+")");else for(s=0;s<o;s++)a.push((r[s]||0)+n[s]*t);else a=-1!==t5.indexOf(e)?"rgba("+Math.round(r.r+n.r*t)+","+Math.round(r.g+n.g*t)+","+Math.round(r.b+n.b*t)+","+(r.a+n.a*t)+")":r+n*t;l.setAttr(e,a)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{let t=this.node,e=t8.attrs[t._id][this._id];e.points&&e.points.trueEnd&&t.setAttr("points",e.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{let t=this.node,e=t8.attrs[t._id][this._id];e.points&&e.points.trueStart&&t.points(e.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(1e3*t),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){let t=this.node._id,e=this._id,i=t8.tweens[t];for(let e in this.pause(),this.anim&&this.anim.stop(),i)delete t8.tweens[t][e];delete t8.attrs[t][e],t8.tweens[t]&&(0===Object.keys(t8.tweens[t]).length&&delete t8.tweens[t],0===Object.keys(t8.attrs[t]).length&&delete t8.attrs[t])}}t8.attrs={},t8.tweens={},tn.prototype.to=function(t){let e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new t8(t).play()};let t6={BackEaseIn:(t,e,i,r)=>i*(t/=r)*t*(2.70158*t-1.70158)+e,BackEaseOut:(t,e,i,r)=>i*((t=t/r-1)*t*(2.70158*t+1.70158)+1)+e,BackEaseInOut(t,e,i,r){let n=1.70158;return(t/=r/2)<1?i/2*(t*t*(((n*=1.525)+1)*t-n))+e:i/2*((t-=2)*t*(((n*=1.525)+1)*t+n)+2)+e},ElasticEaseIn(t,e,i,r,n,a){let s=0;return 0===t?e:1==(t/=r)?e+i:(a||(a=.3*r),!n||n<Math.abs(i)?(n=i,s=a/4):s=a/(2*Math.PI)*Math.asin(i/n),-(n*Math.pow(2,10*(t-=1))*Math.sin(2*Math.PI*(t*r-s)/a))+e)},ElasticEaseOut(t,e,i,r,n,a){let s=0;return 0===t?e:1==(t/=r)?e+i:(a||(a=.3*r),!n||n<Math.abs(i)?(n=i,s=a/4):s=a/(2*Math.PI)*Math.asin(i/n),n*Math.pow(2,-10*t)*Math.sin(2*Math.PI*(t*r-s)/a)+i+e)},ElasticEaseInOut(t,e,i,r,n,a){let s=0;return 0===t?e:2==(t/=r/2)?e+i:(a||(a=.3*1.5*r),!n||n<Math.abs(i)?(n=i,s=a/4):s=a/(2*Math.PI)*Math.asin(i/n),t<1)?-.5*(n*Math.pow(2,10*(t-=1))*Math.sin(2*Math.PI*(t*r-s)/a))+e:n*Math.pow(2,-10*(t-=1))*Math.sin(2*Math.PI*(t*r-s)/a)*.5+i+e},BounceEaseOut:(t,e,i,r)=>(t/=r)<1/2.75?7.5625*t*t*i+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e,BounceEaseIn:(t,e,i,r)=>i-t6.BounceEaseOut(r-t,0,i,r)+e,BounceEaseInOut:(t,e,i,r)=>t<r/2?.5*t6.BounceEaseIn(2*t,0,i,r)+e:.5*t6.BounceEaseOut(2*t-r,0,i,r)+.5*i+e,EaseIn:(t,e,i,r)=>i*(t/=r)*t+e,EaseOut:(t,e,i,r)=>-i*(t/=r)*(t-2)+e,EaseInOut:(t,e,i,r)=>(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e,StrongEaseIn:(t,e,i,r)=>i*(t/=r)*t*t*t*t+e,StrongEaseOut:(t,e,i,r)=>i*((t=t/r-1)*t*t*t*t+1)+e,StrongEaseInOut:(t,e,i,r)=>(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e,Linear:(t,e,i,r)=>i*t/r+e},t9=C._assign(c,{Util:C,Transform:_,Node:tn,Container:ts,Stage:tz,stages:tN,Layer:tQ,FastLayer:tJ,Group:tZ,DD:F,Shape:tV,shapes:tU,Animation:t1,Tween:t8,Easings:t6,Context:A,Canvas:E});class t7 extends tV{_sceneFunc(t){let e=c.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,i),t.arc(0,0,this.innerRadius(),e,0,!i),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){let t=this.innerRadius(),e=this.outerRadius(),i=this.clockwise(),r=c.getAngle(i?360-this.angle():this.angle()),n=Math.cos(Math.min(r,Math.PI)),a=Math.sin(Math.min(Math.max(Math.PI,r),3*Math.PI/2)),s=Math.sin(Math.min(r,Math.PI/2)),o=n*(n>0?t:e),h=a*(a>0?t:e),l=s*(s>0?e:t);return{x:o,y:i?-1*l:h,width:e-o,height:l-h}}}function et(t,e,i,r,n,a,s){let o=Math.sqrt(Math.pow(i-t,2)+Math.pow(r-e,2)),h=Math.sqrt(Math.pow(n-i,2)+Math.pow(a-r,2)),l=s*o/(o+h),d=s*h/(o+h);return[i-l*(n-t),r-l*(a-e),i+d*(n-t),r+d*(a-e)]}function ee(t,e){let i=t.length,r=[];for(let n=2;n<i-2;n+=2){let i=et(t[n-2],t[n-1],t[n],t[n+1],t[n+2],t[n+3],e);isNaN(i[0])||(r.push(i[0]),r.push(i[1]),r.push(t[n]),r.push(t[n+1]),r.push(i[2]),r.push(i[3]))}return r}t7.prototype._centroid=!0,t7.prototype.className="Arc",t7.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],f(t7),q.addGetterSetter(t7,"innerRadius",0,z()),q.addGetterSetter(t7,"outerRadius",0,z()),q.addGetterSetter(t7,"angle",0,z()),q.addGetterSetter(t7,"clockwise",!1,j());class ei extends tV{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){let e=this.points(),i=e.length,r=this.tension(),n=this.closed(),a=this.bezier();if(!i)return;let s=0;if(t.beginPath(),t.moveTo(e[0],e[1]),0!==r&&i>4){let r=this.getTensionPoints(),a=r.length;for(s=4*!n,n||t.quadraticCurveTo(r[0],r[1],r[2],r[3]);s<a-2;)t.bezierCurveTo(r[s++],r[s++],r[s++],r[s++],r[s++],r[s++]);n||t.quadraticCurveTo(r[a-2],r[a-1],e[i-2],e[i-1])}else if(a)for(s=2;s<i;)t.bezierCurveTo(e[s++],e[s++],e[s++],e[s++],e[s++],e[s++]);else for(s=2;s<i;s+=2)t.lineTo(e[s],e[s+1]);n?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():ee(this.points(),this.tension())}_getTensionPointsClosed(){let t=this.points(),e=t.length,i=this.tension(),r=et(t[e-2],t[e-1],t[0],t[1],t[2],t[3],i),n=et(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],i),a=ee(t,i);return[r[2],r[3]].concat(a).concat([n[0],n[1],t[e-2],t[e-1],n[2],n[3],r[0],r[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t,e,i=this.points();if(i.length<4)return{x:i[0]||0,y:i[1]||0,width:0,height:0};let r=(i=0!==this.tension()?[i[0],i[1],...this._getTensionPoints(),i[i.length-2],i[i.length-1]]:this.points())[0],n=i[0],a=i[1],s=i[1];for(let o=0;o<i.length/2;o++)t=i[2*o],e=i[2*o+1],r=Math.min(r,t),n=Math.max(n,t),a=Math.min(a,e),s=Math.max(s,e);return{x:r,y:a,width:n-r,height:s-a}}}ei.prototype.className="Line",ei.prototype._attrsAffectingSize=["points","bezier","tension"],f(ei),q.addGetterSetter(ei,"closed",!1),q.addGetterSetter(ei,"bezier",!1),q.addGetterSetter(ei,"tension",0,z()),q.addGetterSetter(ei,"points",[],function(){if(c.isUnminified)return function(t,e){let i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&t instanceof i||(C._isArray(t)?t.forEach(function(t){C._isNumber(t)||C.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")}):C.warn(B(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}());let er=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],en=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],ea=[[1],[1,1],[1,2,1],[1,3,3,1]],es=(t,e,i)=>{let r,n,a=i/2;r=0;for(let i=0;i<20;i++)n=a*er[20][i]+a,r+=en[20][i]*function(t,e,i){let r=eh(1,i,t),n=eh(1,i,e);return Math.sqrt(r*r+n*n)}(t,e,n);return a*r},eo=(t,e,i)=>{void 0===i&&(i=1);let r=t[0]-2*t[1]+t[2],n=e[0]-2*e[1]+e[2],a=2*t[1]-2*t[0],s=2*e[1]-2*e[0],o=4*(r*r+n*n);if(0===o)return i*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));let h=4*(r*a+n*s)/(2*o),l=i+h,d=(a*a+s*s)/o-h*h,u=l*l+d>0?Math.sqrt(l*l+d):0,c=h*h+d>0?Math.sqrt(h*h+d):0,f=h+Math.sqrt(h*h+d)!==0?d*Math.log(Math.abs((l+u)/(h+c))):0;return Math.sqrt(o)/2*(l*u-h*c+f)},eh=(t,e,i)=>{let r,n,a=i.length-1;if(0===a)return 0;if(0===t){n=0;for(let t=0;t<=a;t++)n+=ea[a][t]*Math.pow(1-e,a-t)*Math.pow(e,t)*i[t];return n}r=Array(a);for(let t=0;t<a;t++)r[t]=a*(i[t+1]-i[t]);return eh(t-1,e,r)},el=(t,e,i)=>{let r=1,n=t/e,a=(t-i(n))/e,s=0;for(;r>.001;){let o=Math.abs(t-i(n+a))/e;if(o<r)r=o,n+=a;else{let s=Math.abs(t-i(n-a))/e;s<r?(r=s,n-=a):a/=2}if(++s>500)break}return n};class ed extends tV{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=ed.parsePathData(this.data()),this.pathLength=ed.getPathLength(this.dataArray)}_sceneFunc(t){let e=this.dataArray;t.beginPath();let i=!1;for(let r=0;r<e.length;r++){let n=e[r].command,a=e[r].points;switch(n){case"L":t.lineTo(a[0],a[1]);break;case"M":t.moveTo(a[0],a[1]);break;case"C":t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"Q":t.quadraticCurveTo(a[0],a[1],a[2],a[3]);break;case"A":let s=a[0],o=a[1],h=a[2],l=a[3],d=a[4],u=a[5],c=a[6],f=a[7],g=h>l?h:l,p=h>l?1:h/l,_=h>l?l/h:1;t.translate(s,o),t.rotate(c),t.scale(p,_),t.arc(0,0,g,d,d+u,1-f),t.scale(1/p,1/_),t.rotate(-c),t.translate(-s,-o);break;case"z":i=!0,t.closePath()}}i||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)}getSelfRect(){let t,e,i=[];this.dataArray.forEach(function(t){if("A"===t.command){let e=t.points[4],r=t.points[5],n=t.points[4]+r,a=Math.PI/180;if(Math.abs(e-n)<a&&(a=Math.abs(e-n)),r<0)for(let r=e-a;r>n;r-=a){let e=ed.getPointOnEllipticalArc(t.points[0],t.points[1],t.points[2],t.points[3],r,0);i.push(e.x,e.y)}else for(let r=e+a;r<n;r+=a){let e=ed.getPointOnEllipticalArc(t.points[0],t.points[1],t.points[2],t.points[3],r,0);i.push(e.x,e.y)}}else if("C"===t.command)for(let e=0;e<=1;e+=.01){let r=ed.getPointOnCubicBezier(e,t.start.x,t.start.y,t.points[0],t.points[1],t.points[2],t.points[3],t.points[4],t.points[5]);i.push(r.x,r.y)}else i=i.concat(t.points)});let r=i[0],n=i[0],a=i[1],s=i[1];for(let o=0;o<i.length/2;o++)t=i[2*o],e=i[2*o+1],isNaN(t)||(r=Math.min(r,t),n=Math.max(n,t)),isNaN(e)||(a=Math.min(a,e),s=Math.max(s,e));return{x:r,y:a,width:n-r,height:s-a}}getLength(){return this.pathLength}getPointAtLength(t){return ed.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,e,i,r){return Math.sqrt((i-t)*(i-t)+(r-e)*(r-e))}static getPathLength(t){let e=0;for(let i=0;i<t.length;++i)e+=t[i].pathLength;return e}static getPointAtLengthOfDataArray(t,e){let i,r=0,n=e.length;if(!n)return null;for(;r<n&&t>e[r].pathLength;)t-=e[r].pathLength,++r;if(r===n)return{x:(i=e[r-1].points.slice(-2))[0],y:i[1]};if(t<.01)return"M"===e[r].command?{x:(i=e[r].points.slice(0,2))[0],y:i[1]}:{x:e[r].start.x,y:e[r].start.y};let a=e[r],s=a.points;switch(a.command){case"L":return ed.getPointOnLine(t,a.start.x,a.start.y,s[0],s[1]);case"C":return ed.getPointOnCubicBezier(el(t,ed.getPathLength(e),t=>es([a.start.x,s[0],s[2],s[4]],[a.start.y,s[1],s[3],s[5]],t)),a.start.x,a.start.y,s[0],s[1],s[2],s[3],s[4],s[5]);case"Q":return ed.getPointOnQuadraticBezier(el(t,ed.getPathLength(e),t=>eo([a.start.x,s[0],s[2]],[a.start.y,s[1],s[3]],t)),a.start.x,a.start.y,s[0],s[1],s[2],s[3]);case"A":let o=s[0],h=s[1],l=s[2],d=s[3],u=s[5],c=s[6],f=s[4];return f+=u*t/a.pathLength,ed.getPointOnEllipticalArc(o,h,l,d,f,c)}return null}static getPointOnLine(t,e,i,r,n,a,s){a=null!=a?a:e,s=null!=s?s:i;let o=this.getLineLength(e,i,r,n);if(o<1e-10)return{x:e,y:i};if(r===e)return{x:a,y:s+(n>i?t:-t)};let h=(n-i)/(r-e),l=Math.sqrt(t*t/(1+h*h))*(r<e?-1:1);if(1e-10>Math.abs(s-i-h*(a-e)))return{x:a+l,y:s+h*l};let d=((a-e)*(r-e)+(s-i)*(n-i))/(o*o),u=e+d*(r-e),c=i+d*(n-i),f=this.getLineLength(a,s,u,c),g=Math.sqrt(t*t-f*f),p=Math.sqrt(g*g/(1+h*h))*(r<e?-1:1);return{x:u+p,y:c+h*p}}static getPointOnCubicBezier(t,e,i,r,n,a,s,o,h){function l(t){return 3*t*(1-t)*(1-t)}return{x:t*t*t*o+3*t*t*(1-t)*a+r*l(t)+(1-t)*(1-t)*(1-t)*e,y:t*t*t*h+3*t*t*(1-t)*s+n*l(t)+(1-t)*(1-t)*(1-t)*i}}static getPointOnQuadraticBezier(t,e,i,r,n,a,s){return{x:t*t*a+2*t*(1-t)*r+(1-t)*(1-t)*e,y:t*t*s+2*t*(1-t)*n+(1-t)*(1-t)*i}}static getPointOnEllipticalArc(t,e,i,r,n,a){let s=Math.cos(a),o=Math.sin(a),h={x:i*Math.cos(n),y:r*Math.sin(n)};return{x:t+(h.x*s-h.y*o),y:e+(h.x*o+h.y*s)}}static parsePathData(t){let e;if(!t)return[];let i=t,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];i=i.replace(RegExp(" ","g"),",");for(let t=0;t<r.length;t++)i=i.replace(RegExp(r[t],"g"),"|"+r[t]);let n=i.split("|"),a=[],s=[],o=0,h=0,l=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(let t=1;t<n.length;t++){let i=n[t],r=i.charAt(0);for(i=i.slice(1),s.length=0;e=l.exec(i);)s.push(e[0]);let d=[],u="A"===r||"a"===r?0:-1;for(let t=0,e=s.length;t<e;t++){let e=s[t];if("00"===e){d.push(0,0),u>=0&&(u+=2)>=7&&(u-=7);continue}if(u>=0){if(3===u){if(/^[01]{2}\d+(?:\.\d+)?$/.test(e)){d.push(parseInt(e[0],10)),d.push(parseInt(e[1],10)),d.push(parseFloat(e.slice(2))),(u+=3)>=7&&(u-=7);continue}if("11"===e||"10"===e||"01"===e){d.push(parseInt(e[0],10)),d.push(parseInt(e[1],10)),(u+=2)>=7&&(u-=7);continue}if("0"===e||"1"===e){d.push(parseInt(e,10)),(u+=1)>=7&&(u-=7);continue}}else if(4===u){if(/^[01]\d+(?:\.\d+)?$/.test(e)){d.push(parseInt(e[0],10)),d.push(parseFloat(e.slice(1))),(u+=2)>=7&&(u-=7);continue}if("0"===e||"1"===e){d.push(parseInt(e,10)),(u+=1)>=7&&(u-=7);continue}}let t=parseFloat(e);isNaN(t)?d.push(0):d.push(t),(u+=1)>=7&&(u-=7)}else{let t=parseFloat(e);isNaN(t)?d.push(0):d.push(t)}}for(;d.length>0;){let t,e,i,n,s,l,u,c,f,g;if(isNaN(d[0]))break;let p="",_=[],m=o,v=h;switch(r){case"l":o+=d.shift(),h+=d.shift(),p="L",_.push(o,h);break;case"L":o=d.shift(),h=d.shift(),_.push(o,h);break;case"m":let y=d.shift(),x=d.shift();if(o+=y,h+=x,p="M",a.length>2&&"z"===a[a.length-1].command){for(let t=a.length-2;t>=0;t--)if("M"===a[t].command){o=a[t].points[0]+y,h=a[t].points[1]+x;break}}_.push(o,h),r="l";break;case"M":o=d.shift(),h=d.shift(),p="M",_.push(o,h),r="L";break;case"h":o+=d.shift(),p="L",_.push(o,h);break;case"H":o=d.shift(),p="L",_.push(o,h);break;case"v":h+=d.shift(),p="L",_.push(o,h);break;case"V":h=d.shift(),p="L",_.push(o,h);break;case"C":_.push(d.shift(),d.shift(),d.shift(),d.shift()),o=d.shift(),h=d.shift(),_.push(o,h);break;case"c":_.push(o+d.shift(),h+d.shift(),o+d.shift(),h+d.shift()),o+=d.shift(),h+=d.shift(),p="C",_.push(o,h);break;case"S":e=o,i=h,"C"===(t=a[a.length-1]).command&&(e=o+(o-t.points[2]),i=h+(h-t.points[3])),_.push(e,i,d.shift(),d.shift()),o=d.shift(),h=d.shift(),p="C",_.push(o,h);break;case"s":e=o,i=h,"C"===(t=a[a.length-1]).command&&(e=o+(o-t.points[2]),i=h+(h-t.points[3])),_.push(e,i,o+d.shift(),h+d.shift()),o+=d.shift(),h+=d.shift(),p="C",_.push(o,h);break;case"Q":_.push(d.shift(),d.shift()),o=d.shift(),h=d.shift(),_.push(o,h);break;case"q":_.push(o+d.shift(),h+d.shift()),o+=d.shift(),h+=d.shift(),p="Q",_.push(o,h);break;case"T":e=o,i=h,"Q"===(t=a[a.length-1]).command&&(e=o+(o-t.points[0]),i=h+(h-t.points[1])),o=d.shift(),h=d.shift(),p="Q",_.push(e,i,o,h);break;case"t":e=o,i=h,"Q"===(t=a[a.length-1]).command&&(e=o+(o-t.points[0]),i=h+(h-t.points[1])),o+=d.shift(),h+=d.shift(),p="Q",_.push(e,i,o,h);break;case"A":n=d.shift(),s=d.shift(),l=d.shift(),u=d.shift(),c=d.shift(),f=o,g=h,o=d.shift(),h=d.shift(),p="A",_=this.convertEndpointToCenterParameterization(f,g,o,h,u,c,n,s,l);break;case"a":n=d.shift(),s=d.shift(),l=d.shift(),u=d.shift(),c=d.shift(),f=o,g=h,o+=d.shift(),h+=d.shift(),p="A",_=this.convertEndpointToCenterParameterization(f,g,o,h,u,c,n,s,l)}a.push({command:p||r,points:_,start:{x:m,y:v},pathLength:this.calcLength(m,v,p||r,_)})}("z"===r||"Z"===r)&&a.push({command:"z",points:[],start:void 0,pathLength:0})}return a}static calcLength(t,e,i,r){let n,a,s,o;switch(i){case"L":return ed.getLineLength(t,e,r[0],r[1]);case"C":return es([t,r[0],r[2],r[4]],[e,r[1],r[3],r[5]],1);case"Q":return eo([t,r[0],r[2]],[e,r[1],r[3]],1);case"A":n=0;let h=r[4],l=r[5],d=r[4]+l,u=Math.PI/180;if(Math.abs(h-d)<u&&(u=Math.abs(h-d)),a=ed.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],h,0),l<0)for(o=h-u;o>d;o-=u)s=ed.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],o,0),n+=ed.getLineLength(a.x,a.y,s.x,s.y),a=s;else for(o=h+u;o<d;o+=u)s=ed.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],o,0),n+=ed.getLineLength(a.x,a.y,s.x,s.y),a=s;return s=ed.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],d,0),n+=ed.getLineLength(a.x,a.y,s.x,s.y)}return 0}static convertEndpointToCenterParameterization(t,e,i,r,n,a,s,o,h){let l=Math.PI/180*h,d=Math.cos(l)*(t-i)/2+Math.sin(l)*(e-r)/2,u=-1*Math.sin(l)*(t-i)/2+Math.cos(l)*(e-r)/2,c=d*d/(s*s)+u*u/(o*o);c>1&&(s*=Math.sqrt(c),o*=Math.sqrt(c));let f=Math.sqrt((s*s*(o*o)-s*s*(u*u)-o*o*(d*d))/(s*s*(u*u)+o*o*(d*d)));n===a&&(f*=-1),isNaN(f)&&(f=0);let g=f*s*u/o,p=-(f*o)*d/s,_=(t+i)/2+Math.cos(l)*g-Math.sin(l)*p,m=(e+r)/2+Math.sin(l)*g+Math.cos(l)*p,v=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},y=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(v(t)*v(e))},x=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(y(t,e))},b=x([1,0],[(d-g)/s,(u-p)/o]),w=[(d-g)/s,(u-p)/o],S=[(-1*d-g)/s,(-1*u-p)/o],C=x(w,S);return -1>=y(w,S)&&(C=Math.PI),y(w,S)>=1&&(C=0),0===a&&C>0&&(C-=2*Math.PI),1===a&&C<0&&(C+=2*Math.PI),[_,m,s,o,b,C,l,a]}}ed.prototype.className="Path",ed.prototype._attrsAffectingSize=["data"],f(ed),q.addGetterSetter(ed,"data");class eu extends ei{_sceneFunc(t){let e,i;super._sceneFunc(t);let r=2*Math.PI,n=this.points(),a=n,s=0!==this.tension()&&n.length>4;s&&(a=this.getTensionPoints());let o=this.pointerLength(),h=n.length;if(s){let t=[a[a.length-4],a[a.length-3],a[a.length-2],a[a.length-1],n[h-2],n[h-1]],r=ed.calcLength(a[a.length-4],a[a.length-3],"C",t),s=ed.getPointOnQuadraticBezier(Math.min(1,1-o/r),t[0],t[1],t[2],t[3],t[4],t[5]);e=n[h-2]-s.x,i=n[h-1]-s.y}else e=n[h-2]-n[h-4],i=n[h-1]-n[h-3];let l=(Math.atan2(i,e)+r)%r,d=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(n[h-2],n[h-1]),t.rotate(l),t.moveTo(0,0),t.lineTo(-o,d/2),t.lineTo(-o,-d/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(n[0],n[1]),s?(e=(a[0]+a[2])/2-n[0],i=(a[1]+a[3])/2-n[1]):(e=n[2]-n[0],i=n[3]-n[1]),t.rotate((Math.atan2(-i,-e)+r)%r),t.moveTo(0,0),t.lineTo(-o,d/2),t.lineTo(-o,-d/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){let e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)}getSelfRect(){let t=super.getSelfRect(),e=this.pointerWidth()/2;return{x:t.x,y:t.y-e,width:t.width,height:t.height+2*e}}}eu.prototype.className="Arrow",f(eu),q.addGetterSetter(eu,"pointerLength",10,z()),q.addGetterSetter(eu,"pointerWidth",10,z()),q.addGetterSetter(eu,"pointerAtBeginning",!1),q.addGetterSetter(eu,"pointerAtEnding",!0);class ec extends tV{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}ec.prototype._centroid=!0,ec.prototype.className="Circle",ec.prototype._attrsAffectingSize=["radius"],f(ec),q.addGetterSetter(ec,"radius",0,z());class ef extends tV{_sceneFunc(t){let e=this.radiusX(),i=this.radiusY();t.beginPath(),t.save(),e!==i&&t.scale(1,i/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}ef.prototype.className="Ellipse",ef.prototype._centroid=!0,ef.prototype._attrsAffectingSize=["radiusX","radiusY"],f(ef),q.addComponentsGetterSetter(ef,"radius",["x","y"]),q.addGetterSetter(ef,"radiusX",0,z()),q.addGetterSetter(ef,"radiusY",0,z());class eg extends tV{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",t=>{this._removeImageLoad(t.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){let t=this.image();t&&t.complete||(!t||4!==t.readyState)&&t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){let t=!!this.cornerRadius(),e=this.hasShadow();return!!t&&!!e||super._useBufferCanvas(!0)}_sceneFunc(t){let e,i=this.getWidth(),r=this.getHeight(),n=this.cornerRadius(),a=this.attrs.image;if(a){let t=this.attrs.cropWidth,n=this.attrs.cropHeight;e=t&&n?[a,this.cropX(),this.cropY(),t,n,0,0,i,r]:[a,0,0,i,r]}(this.hasFill()||this.hasStroke()||n)&&(t.beginPath(),n?C.drawRoundedRectPath(t,i,r,n):t.rect(0,0,i,r),t.closePath(),t.fillStrokeShape(this)),a&&(n&&t.clip(),t.drawImage.apply(t,e))}_hitFunc(t){let e=this.width(),i=this.height(),r=this.cornerRadius();t.beginPath(),r?C.drawRoundedRectPath(t,e,i,r):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,e,i;return null!=(i=null!=(t=this.attrs.width)?t:null==(e=this.image())?void 0:e.width)?i:0}getHeight(){var t,e,i;return null!=(i=null!=(t=this.attrs.height)?t:null==(e=this.image())?void 0:e.height)?i:0}static fromURL(t,e,i=null){let r=C.createImageElement();r.onload=function(){e(new eg({image:r}))},r.onerror=i,r.crossOrigin="Anonymous",r.src=t}}eg.prototype.className="Image",eg.prototype._attrsAffectingSize=["image"],f(eg),q.addGetterSetter(eg,"cornerRadius",0,W(4)),q.addGetterSetter(eg,"image"),q.addComponentsGetterSetter(eg,"crop",["x","y","width","height"]),q.addGetterSetter(eg,"cropX",0,z()),q.addGetterSetter(eg,"cropY",0,z()),q.addGetterSetter(eg,"cropWidth",0,z()),q.addGetterSetter(eg,"cropHeight",0,z());let ep=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],e_="right",em="down",ev="left",ey=ep.length;class ex extends tZ{constructor(t){super(t),this.on("add.konva",function(t){this._addListeners(t.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let e=this,i,r=function(){e._sync()};for(i=0;i<ey;i++)t.on(ep[i]+"Change.konva",r)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),e=this.getTag(),i,r,n,a,s,o,h;if(t&&e){switch(i=t.width(),r=t.height(),n=e.pointerDirection(),a=e.pointerWidth(),h=e.pointerHeight(),s=0,o=0,n){case"up":s=i/2,o=-1*h;break;case e_:s=i+a,o=r/2;break;case em:s=i/2,o=r+h;break;case ev:s=-1*a,o=r/2}e.setAttrs({x:-1*s,y:-1*o,width:i,height:r}),t.setAttrs({x:-1*s,y:-1*o})}}}ex.prototype.className="Label",f(ex);class eb extends tV{_sceneFunc(t){let e=this.width(),i=this.height(),r=this.pointerDirection(),n=this.pointerWidth(),a=this.pointerHeight(),s=this.cornerRadius(),o=0,h=0,l=0,d=0;"number"==typeof s?o=h=l=d=Math.min(s,e/2,i/2):(o=Math.min(s[0]||0,e/2,i/2),h=Math.min(s[1]||0,e/2,i/2),d=Math.min(s[2]||0,e/2,i/2),l=Math.min(s[3]||0,e/2,i/2)),t.beginPath(),t.moveTo(o,0),"up"===r&&(t.lineTo((e-n)/2,0),t.lineTo(e/2,-1*a),t.lineTo((e+n)/2,0)),t.lineTo(e-h,0),t.arc(e-h,h,h,3*Math.PI/2,0,!1),r===e_&&(t.lineTo(e,(i-a)/2),t.lineTo(e+n,i/2),t.lineTo(e,(i+a)/2)),t.lineTo(e,i-d),t.arc(e-d,i-d,d,0,Math.PI/2,!1),r===em&&(t.lineTo((e+n)/2,i),t.lineTo(e/2,i+a),t.lineTo((e-n)/2,i)),t.lineTo(l,i),t.arc(l,i-l,l,Math.PI/2,Math.PI,!1),r===ev&&(t.lineTo(0,(i+a)/2),t.lineTo(-1*n,i/2),t.lineTo(0,(i-a)/2)),t.lineTo(0,o),t.arc(o,o,o,Math.PI,3*Math.PI/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,e=0,i=this.pointerWidth(),r=this.pointerHeight(),n=this.pointerDirection(),a=this.width(),s=this.height();return"up"===n?(e-=r,s+=r):n===em?s+=r:n===ev?(t-=1.5*i,a+=i):n===e_&&(a+=1.5*i),{x:t,y:e,width:a,height:s}}}eb.prototype.className="Tag",f(eb),q.addGetterSetter(eb,"pointerDirection","none"),q.addGetterSetter(eb,"pointerWidth",0,z()),q.addGetterSetter(eb,"pointerHeight",0,z()),q.addGetterSetter(eb,"cornerRadius",0,W(4));class ew extends tV{_sceneFunc(t){let e=this.cornerRadius(),i=this.width(),r=this.height();t.beginPath(),e?C.drawRoundedRectPath(t,i,r,e):t.rect(0,0,i,r),t.closePath(),t.fillStrokeShape(this)}}ew.prototype.className="Rect",f(ew),q.addGetterSetter(ew,"cornerRadius",0,W(4));class eS extends tV{_sceneFunc(t){let e=this._getPoints(),i=this.radius(),r=this.sides(),n=this.cornerRadius();if(t.beginPath(),n)C.drawRoundedPolygonPath(t,e,r,i,n);else{t.moveTo(e[0].x,e[0].y);for(let i=1;i<e.length;i++)t.lineTo(e[i].x,e[i].y)}t.closePath(),t.fillStrokeShape(this)}_getPoints(){let t=this.attrs.sides,e=this.attrs.radius||0,i=[];for(let r=0;r<t;r++)i.push({x:e*Math.sin(2*r*Math.PI/t),y:-1*e*Math.cos(2*r*Math.PI/t)});return i}getSelfRect(){let t=this._getPoints(),e=t[0].x,i=t[0].y,r=t[0].x,n=t[0].y;return t.forEach(t=>{e=Math.min(e,t.x),i=Math.max(i,t.x),r=Math.min(r,t.y),n=Math.max(n,t.y)}),{x:e,y:r,width:i-e,height:n-r}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}eS.prototype.className="RegularPolygon",eS.prototype._centroid=!0,eS.prototype._attrsAffectingSize=["radius"],f(eS),q.addGetterSetter(eS,"radius",0,z()),q.addGetterSetter(eS,"sides",0,z()),q.addGetterSetter(eS,"cornerRadius",0,W(4));let eC=2*Math.PI;class eT extends tV{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,eC,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),eC,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}eT.prototype.className="Ring",eT.prototype._centroid=!0,eT.prototype._attrsAffectingSize=["innerRadius","outerRadius"],f(eT),q.addGetterSetter(eT,"innerRadius",0,z()),q.addGetterSetter(eT,"outerRadius",0,z());class ek extends tV{constructor(t){super(t),this._updated=!0,this.anim=new t1(()=>{let t=this._updated;return this._updated=!1,t}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){let e=this.animation(),i=this.frameIndex(),r=4*i,n=this.animations()[e],a=this.frameOffsets(),s=n[r+0],o=n[r+1],h=n[r+2],l=n[r+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,l),t.closePath(),t.fillStrokeShape(this)),d)if(a){let r=a[e],n=2*i;t.drawImage(d,s,o,h,l,r[n+0],r[n+1],h,l)}else t.drawImage(d,s,o,h,l,0,0,h,l)}_hitFunc(t){let e=this.animation(),i=this.frameIndex(),r=4*i,n=this.animations()[e],a=this.frameOffsets(),s=n[r+2],o=n[r+3];if(t.beginPath(),a){let r=a[e],n=2*i;t.rect(r[n+0],r[n+1],s,o)}else t.rect(0,0,s,o);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){let t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;let t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){let t=this.frameIndex(),e=this.animation();t<this.animations()[e].length/4-1?this.frameIndex(t+1):this.frameIndex(0)}}ek.prototype.className="Sprite",f(ek),q.addGetterSetter(ek,"animation"),q.addGetterSetter(ek,"animations"),q.addGetterSetter(ek,"frameOffsets"),q.addGetterSetter(ek,"image"),q.addGetterSetter(ek,"frameIndex",0,z()),q.addGetterSetter(ek,"frameRate",17,z()),q.backCompat(ek,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class eP extends tV{_sceneFunc(t){let e=this.innerRadius(),i=this.outerRadius(),r=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(let n=1;n<2*r;n++){let a=n%2==0?i:e,s=a*Math.sin(n*Math.PI/r),o=-1*a*Math.cos(n*Math.PI/r);t.lineTo(s,o)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}function eA(t){return[...t].reduce((t,e,i,r)=>{if(/\p{Emoji}/u.test(e)){let n=r[i+1];n&&/\p{Emoji_Modifier}|\u200D/u.test(n)?(t.push(e+n),r[i+1]=""):t.push(e)}else/\p{Regional_Indicator}{2}/u.test(e+(r[i+1]||""))?t.push(e+r[i+1]):i>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(e)?t[t.length-1]+=e:e&&t.push(e);return t},[])}eP.prototype.className="Star",eP.prototype._centroid=!0,eP.prototype._attrsAffectingSize=["innerRadius","outerRadius"],f(eP),q.addGetterSetter(eP,"numPoints",5,z()),q.addGetterSetter(eP,"innerRadius",0,z()),q.addGetterSetter(eP,"outerRadius",0,z());let eM="auto",eR="inherit",eE="justify",eI="left",eO="middle",eD="normal",eG="none",eL=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],eF=eL.length;function eB(){return r||(r=C.createCanvasElement().getContext("2d"))}class eN extends tV{constructor(t){super(function(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}(t)),this._partialTextX=0,this._partialTextY=0;for(let t=0;t<eF;t++)this.on(eL[t]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(t){var e,i;let r=this.textArr,n=r.length;if(!this.text())return;let a=this.padding(),s=this.fontSize(),o=this.lineHeight()*s,h=this.verticalAlign(),l=this.direction(),d=0,u=this.align(),f=this.getWidth(),g=this.letterSpacing(),p=this.charRenderFunc(),_=this.fill(),m=this.textDecoration(),v=-1!==m.indexOf("underline"),y=-1!==m.indexOf("line-through"),x;l=l===eR?t.direction:l;let b=o/2,w=eO;if(!c.legacyTextRendering){let t=this.measureSize("M");w="alphabetic",b=((null!=(e=t.fontBoundingBoxAscent)?e:t.actualBoundingBoxAscent)-(null!=(i=t.fontBoundingBoxDescent)?i:t.actualBoundingBoxDescent))/2+o/2}for("rtl"===l&&t.setAttr("direction",l),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",w),t.setAttr("textAlign",eI),h===eO?d=(this.getHeight()-n*o-2*a)/2:"bottom"===h&&(d=this.getHeight()-n*o-2*a),t.translate(a,d+a),x=0;x<n;x++){let e=0,i=r[x],h=i.text,d=i.width,m=i.lastInParagraph;if(t.save(),"right"===u?e+=f-d-2*a:"center"===u&&(e+=(f-d-2*a)/2),v){t.save(),t.beginPath();let i=c.legacyTextRendering?Math.round(s/2):Math.round(s/4),r=e,n=b+0+i;t.moveTo(r,n);let o=u!==eE||m?d:f-2*a;t.lineTo(r+Math.round(o),n),t.lineWidth=s/15,t.strokeStyle=this._getLinearGradient()||_,t.stroke(),t.restore()}if("rtl"!==l&&(0!==g||u===eE||p)){let i=h.split(" ").length-1,n=eA(h);for(let s=0;s<n.length;s++){let o=n[s];" "!==o||m||u!==eE||(e+=(f-2*a-d)/i),this._partialTextX=e,this._partialTextY=b+0,this._partialText=o,p&&(t.save(),p({char:o,index:s+r.slice(0,x).reduce((t,e)=>t+eA(e.text).length,0),x:e,y:b+0,lineIndex:x,column:s,isLastInLine:m,width:this.measureSize(o).width,context:t})),t.fillStrokeShape(this),p&&t.restore(),e+=this.measureSize(o).width+g}}else 0!==g&&t.setAttr("letterSpacing",`${g}px`),this._partialTextX=e,this._partialTextY=b+0,this._partialText=h,t.fillStrokeShape(this);if(y){t.save(),t.beginPath();let i=c.legacyTextRendering?0:-Math.round(s/4),r=u===eE?0:e;t.moveTo(r,b+0+i);let n=u!==eE||m?d:f-2*a;t.lineTo(r+Math.round(n),b+0+i),t.lineWidth=s/15,t.strokeStyle=this._getLinearGradient()||_,t.stroke(),t.restore()}t.restore(),n>1&&(b+=o)}}_hitFunc(t){let e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}setText(t){let e=C._isString(t)?t:null==t?"":t+"";return this._setAttr("text",e),this}getWidth(){return this.attrs.width===eM||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===eM||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return C.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var e,i,r,n,a,s,o,h,l,d,u;let c=eB(),f=this.fontSize(),g;c.save(),c.font=this._getContextFont(),g=c.measureText(t),c.restore();let p=f/100;return{actualBoundingBoxAscent:null!=(e=g.actualBoundingBoxAscent)?e:71.58203125*p,actualBoundingBoxDescent:null!=(i=g.actualBoundingBoxDescent)?i:0,actualBoundingBoxLeft:null!=(r=g.actualBoundingBoxLeft)?r:-7.421875*p,actualBoundingBoxRight:null!=(n=g.actualBoundingBoxRight)?n:75.732421875*p,alphabeticBaseline:null!=(a=g.alphabeticBaseline)?a:0,emHeightAscent:null!=(s=g.emHeightAscent)?s:100*p,emHeightDescent:null!=(o=g.emHeightDescent)?o:-20*p,fontBoundingBoxAscent:null!=(h=g.fontBoundingBoxAscent)?h:91*p,fontBoundingBoxDescent:null!=(l=g.fontBoundingBoxDescent)?l:21*p,hangingBaseline:null!=(d=g.hangingBaseline)?d:72.80000305175781*p,ideographicBaseline:null!=(u=g.ideographicBaseline)?u:-21*p,width:g.width,height:f}}_getContextFont(){return this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+this.fontFamily().split(",").map(t=>{let e=(t=t.trim()).indexOf(" ")>=0,i=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!i&&(t=`"${t}"`),t}).join(", ")}_addTextLine(t){this.align()===eE&&(t=t.trim());let e=this._getTextWidth(t);return this.textArr.push({text:t,width:e,lastInParagraph:!1})}_getTextWidth(t){let e=this.letterSpacing(),i=t.length;return eB().measureText(t).width+e*i}_setTextData(){let t=this.text().split("\n"),e=+this.fontSize(),i=0,r=this.lineHeight()*e,n=this.attrs.width,a=this.attrs.height,s=n!==eM&&void 0!==n,o=a!==eM&&void 0!==a,h=this.padding(),l=n-2*h,d=a-2*h,u=0,c=this.wrap(),f="char"!==c&&c!==eG,g=this.ellipsis();this.textArr=[],eB().font=this._getContextFont();let p=g?this._getTextWidth(""):0;for(let e=0,n=t.length;e<n;++e){let a=t[e],h=this._getTextWidth(a);if(s&&h>l)for(;a.length>0;){let t=0,e=eA(a).length,n="",s=0;for(;t<e;){let i=t+e>>>1,h=eA(a).slice(0,i+1).join(""),c=this._getTextWidth(h);(g&&o&&u+r>d?c+p:c)<=l?(t=i+1,n=h,s=c):e=i}if(n){if(f){let e,i=eA(a),r=eA(n),o=i[r.length];(e=(" "===o||"-"===o)&&s<=l?r.length:Math.max(r.lastIndexOf(" "),r.lastIndexOf("-"))+1)>0&&(t=e,n=i.slice(0,t).join(""),s=this._getTextWidth(n))}if(n=n.trimRight(),this._addTextLine(n),i=Math.max(i,s),u+=r,this._shouldHandleEllipsis(u)){this._tryToAddEllipsisToLastLine();break}if((a=eA(a).slice(t).join("").trimLeft()).length>0&&(h=this._getTextWidth(a))<=l){this._addTextLine(a),u+=r,i=Math.max(i,h);break}}else break}else this._addTextLine(a),u+=r,i=Math.max(i,h),this._shouldHandleEllipsis(u)&&e<n-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),o&&u+r>d)break}this.textHeight=e,this.textWidth=i}_shouldHandleEllipsis(t){let e=+this.fontSize(),i=this.lineHeight()*e,r=this.attrs.height,n=this.padding();return this.wrap()===eG||r!==eM&&void 0!==r&&t+i>r-2*n}_tryToAddEllipsisToLastLine(){let t=this.attrs.width,e=this.padding(),i=this.ellipsis(),r=this.textArr[this.textArr.length-1];r&&i&&(t!==eM&&void 0!==t&&(this._getTextWidth(r.text+"")<t-2*e||(r.text=r.text.slice(0,r.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(r.text+""))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){let t=-1!==this.textDecoration().indexOf("underline")||-1!==this.textDecoration().indexOf("line-through"),e=this.hasShadow();return!!t&&!!e||super._useBufferCanvas()}}eN.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},eN.prototype._strokeFunc=function(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},eN.prototype.className="Text",eN.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],f(eN),q.overWriteSetter(eN,"width",H()),q.overWriteSetter(eN,"height",H()),q.addGetterSetter(eN,"direction",eR),q.addGetterSetter(eN,"fontFamily","Arial"),q.addGetterSetter(eN,"fontSize",12,z()),q.addGetterSetter(eN,"fontStyle",eD),q.addGetterSetter(eN,"fontVariant",eD),q.addGetterSetter(eN,"padding",0,z()),q.addGetterSetter(eN,"align",eI),q.addGetterSetter(eN,"verticalAlign","top"),q.addGetterSetter(eN,"lineHeight",1,z()),q.addGetterSetter(eN,"wrap","word"),q.addGetterSetter(eN,"ellipsis",!1,j()),q.addGetterSetter(eN,"letterSpacing",0,z()),q.addGetterSetter(eN,"text","",Y()),q.addGetterSetter(eN,"textDecoration",""),q.addGetterSetter(eN,"charRenderFunc",void 0);let ez="normal";function eW(t){t.fillText(this.partialText,0,0)}function eH(t){t.strokeText(this.partialText,0,0)}class eY extends tV{constructor(t){super(t),this.dummyCanvas=C.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return ed.getPathLength(this.dataArray)}_getPointAtLength(t){return!this.attrs.data||t>this.pathLength?null:ed.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=ed.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();let e=this.textDecoration(),i=this.fill(),r=this.fontSize(),n=this.glyphInfo,a=-1!==e.indexOf("underline"),s=-1!==e.indexOf("line-through");a&&t.beginPath();for(let e=0;e<n.length;e++){t.save();let i=n[e].p0;t.translate(i.x,i.y),t.rotate(n[e].rotation),this.partialText=n[e].text,t.fillStrokeShape(this),a&&(0===e&&t.moveTo(0,r/2+1),t.lineTo(n[e].width,r/2+1)),t.restore()}if(a&&(t.strokeStyle=i,t.lineWidth=r/20,t.stroke()),s){t.beginPath();for(let e=0;e<n.length;e++){t.save();let i=n[e].p0;t.translate(i.x,i.y),t.rotate(n[e].rotation),0===e&&t.moveTo(0,0),t.lineTo(n[e].width,0),t.restore()}t.strokeStyle=i,t.lineWidth=r/20,t.stroke()}t.restore()}_hitFunc(t){t.beginPath();let e=this.glyphInfo;if(e.length>=1){let i=e[0].p0;t.moveTo(i.x,i.y)}for(let i=0;i<e.length;i++){let r=e[i].p1;t.lineTo(r.x,r.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return C.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return eN.prototype.setText.call(this,t)}_getContextFont(){return eN.prototype._getContextFont.call(this)}_getTextSize(t){let e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();let i=e.measureText(t);return e.restore(),{width:i.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){let t=eA(this.text()),e=[],i=0;for(let r=0;r<t.length;r++)e.push({char:t[r],width:this._getTextSize(t[r]).width}),i+=e[r].width;let{height:r}=this._getTextSize(this.attrs.text);if(this.textWidth=i,this.textHeight=r,this.glyphInfo=[],!this.attrs.data)return null;let n=this.letterSpacing(),a=this.align(),s=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0),h=0;"center"===a&&(h=Math.max(0,this.pathLength/2-o/2)),"right"===a&&(h=Math.max(0,this.pathLength-o));let l=h;for(let i=0;i<e.length;i++){let r=this._getPointAtLength(l);if(!r)return;let h=e[i].char,d=e[i].width+n;if(" "===h&&"justify"===a){let t=this.text().split(" ").length-1;d+=(this.pathLength-o)/t}let u=this._getPointAtLength(l+d);if(!u)return;let c=ed.getLineLength(r.x,r.y,u.x,u.y),f=0;if(s)try{f=s(e[i-1].char,h)*this.fontSize()}catch(t){f=0}r.x+=f,u.x+=f,this.textWidth+=f;let g=ed.getPointOnLine(f+c/2,r.x,r.y,u.x,u.y),p=Math.atan2(u.y-r.y,u.x-r.x);this.glyphInfo.push({transposeX:g.x,transposeY:g.y,text:t[i],rotation:p,p0:r,p1:u,width:c}),l+=d}}getSelfRect(){let t,e;if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};let i=[];this.glyphInfo.forEach(function(t){i.push(t.p0.x),i.push(t.p0.y),i.push(t.p1.x),i.push(t.p1.y)});let r=i[0]||0,n=i[0]||0,a=i[1]||0,s=i[1]||0;for(let o=0;o<i.length/2;o++)t=i[2*o],e=i[2*o+1],r=Math.min(r,t),n=Math.max(n,t),a=Math.min(a,e),s=Math.max(s,e);let o=this.fontSize();return{x:r-o/2,y:a-o/2,width:n-r+o,height:s-a+o}}destroy(){return C.releaseCanvas(this.dummyCanvas),super.destroy()}}eY.prototype._fillFunc=eW,eY.prototype._strokeFunc=eH,eY.prototype._fillFuncHit=eW,eY.prototype._strokeFuncHit=eH,eY.prototype.className="TextPath",eY.prototype._attrsAffectingSize=["text","fontSize","data"],f(eY),q.addGetterSetter(eY,"data"),q.addGetterSetter(eY,"fontFamily","Arial"),q.addGetterSetter(eY,"fontSize",12,z()),q.addGetterSetter(eY,"fontStyle",ez),q.addGetterSetter(eY,"align","left"),q.addGetterSetter(eY,"letterSpacing",0,z()),q.addGetterSetter(eY,"textBaseline","middle"),q.addGetterSetter(eY,"fontVariant",ez),q.addGetterSetter(eY,"text",""),q.addGetterSetter(eY,"textDecoration",""),q.addGetterSetter(eY,"kerningFunc",void 0);let eX="tr-konva",ej=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${eX}`).join(" "),eq="nodesRect",eU=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],eV={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},eK="ontouchstart"in c._global,e$=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function eQ(t,e,i){let r=i.x+(t.x-i.x)*Math.cos(e)-(t.y-i.y)*Math.sin(e),n=i.y+(t.x-i.x)*Math.sin(e)+(t.y-i.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:r,y:n}}let eJ=0;class eZ extends tZ{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(ej,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return C.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return eX+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();let e=t.filter(t=>!t.isAncestorOf(this)||(C.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1));return this._nodes=t=e,1===t.length&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(t=>{let e=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()};if(t._attrsAffectingSize.length){let i=t._attrsAffectingSize.map(t=>t+"Change."+this._getEventNamespace()).join(" ");t.on(i,e)}t.on(eU.map(t=>t+`.${this._getEventNamespace()}`).join(" "),e),t.on(`absoluteTransformChange.${this._getEventNamespace()}`,e),this._proxyDrag(t)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,i=>{e=t.getAbsolutePosition(),this.isDragging()||t===this.findOne(".back")||this.startDrag(i,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!e)return;let r=t.getAbsolutePosition(),n=r.x-e.x,a=r.y-e.y;this.nodes().forEach(e=>{if(e===t||e.isDragging())return;let r=e.getAbsolutePosition();e.setAbsolutePosition({x:r.x+n,y:r.y+a}),e.startDrag(i)}),e=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(eq),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(eq,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),i){let r=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),n=t.getAbsoluteScale(i),a=t.getAbsolutePosition(i),s=r.x*n.x-t.offsetX()*n.x,o=r.y*n.y-t.offsetY()*n.y,h=(c.getAngle(t.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return eQ({x:a.x+s*Math.cos(h)+o*Math.sin(-h),y:a.y+o*Math.cos(h)+s*Math.sin(h),width:r.width*n.x,height:r.height*n.y,rotation:h},-c.getAngle(e),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};let t=[];this.nodes().map(e=>{let i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),r=[{x:i.x,y:i.y},{x:i.x+i.width,y:i.y},{x:i.x+i.width,y:i.y+i.height},{x:i.x,y:i.y+i.height}],n=e.getAbsoluteTransform();r.forEach(function(e){let i=n.point(e);t.push(i)})});let e=new _;e.rotate(-c.getAngle(this.rotation()));let i=1/0,r=1/0,n=-1/0,a=-1/0;t.forEach(function(t){let s=e.point(t);void 0===i&&(i=n=s.x,r=a=s.y),i=Math.min(i,s.x),r=Math.min(r,s.y),n=Math.max(n,s.x),a=Math.max(a,s.y)}),e.invert();let s=e.point({x:i,y:r});return{x:s.x,y:s.y,width:n-i,height:a-r,rotation:c.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),e$.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){let e=new ew({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:eK?10:"auto"}),i=this;e.on("mousedown touchstart",function(t){i._handleMouseDown(t)}),e.on("dragstart",t=>{e.stopDrag(),t.cancelBubble=!0}),e.on("dragend",t=>{t.cancelBubble=!0}),e.on("mouseenter",()=>{let i=function(t,e,i){if("rotater"===t)return i;e+=C.degToRad(eV[t]||0);let r=(C.radToDeg(e)%360+360)%360;return C._inRange(r,337.5,360)||C._inRange(r,0,22.5)?"ns-resize":C._inRange(r,22.5,67.5)?"nesw-resize":C._inRange(r,67.5,112.5)?"ew-resize":C._inRange(r,112.5,157.5)?"nwse-resize":C._inRange(r,157.5,202.5)?"ns-resize":C._inRange(r,202.5,247.5)?"nesw-resize":C._inRange(r,247.5,292.5)?"ew-resize":C._inRange(r,292.5,337.5)?"nwse-resize":(C.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}(t,c.getAngle(this.rotation()),this.rotateAnchorCursor());e.getStage().content&&(e.getStage().content.style.cursor=i),this._cursorChange=!0}),e.on("mouseout",()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(e)}_createBack(){let t=new tV({name:"back",width:0,height:0,sceneFunc(t,e){let i=e.getParent(),r=i.padding();t.beginPath(),t.rect(-r,-r,e.width()+2*r,e.height()+2*r),t.moveTo(e.width()/2,-r),i.rotateEnabled()&&i.rotateLineVisible()&&t.lineTo(e.width()/2,-i.rotateAnchorOffset()*C._sign(e.height())-r),t.fillStrokeShape(e)},hitFunc:(t,e)=>{if(!this.shouldOverdrawWholeArea())return;let i=this.padding();t.beginPath(),t.rect(-i,-i,e.width()+2*i,e.height()+2*i),t.fillStrokeShape(e)}});this.add(t),this._proxyDrag(t),t.on("dragstart",t=>{t.cancelBubble=!0}),t.on("dragmove",t=>{t.cancelBubble=!0}),t.on("dragend",t=>{t.cancelBubble=!0}),this.on("dragmove",t=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];let e=this._getNodeRect(),i=e.width,r=e.height,n=Math.sqrt(Math.pow(i,2)+Math.pow(r,2));this.sin=Math.abs(r/n),this.cos=Math.abs(i/n),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;let a=t.target.getAbsolutePosition(),s=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:s.x-a.x,y:s.y-a.y},eJ++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(e=>{e._fire("transformstart",{evt:t.evt,target:e})})}_handleMouseMove(t){let e,i,r,n,a=this.findOne("."+this._movingAnchorName),s=a.getStage();s.setPointersPositions(t);let o=s.getPointerPosition(),h={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y},l=a.getAbsolutePosition();this.anchorDragBoundFunc()&&(h=this.anchorDragBoundFunc()(l,h,t)),a.setAbsolutePosition(h);let d=a.getAbsolutePosition();if(l.x===d.x&&l.y===d.y)return;if("rotater"===this._movingAnchorName){let r,n=this._getNodeRect();e=a.x()-n.width/2;let s=Math.atan2(-(i=-a.y()+n.height/2),e)+Math.PI/2;n.height<0&&(s-=Math.PI);let o=c.getAngle(this.rotation())+s,h=c.getAngle(this.rotationSnapTolerance()),l=function(t,e,i){let r=e;for(let n=0;n<t.length;n++){let a=c.getAngle(t[n]),s=Math.abs(a-e)%(2*Math.PI);Math.min(s,2*Math.PI-s)<i&&(r=a)}return r}(this.rotationSnaps(),o,h)-n.rotation,d=(r={x:n.x+n.width/2*Math.cos(n.rotation)+n.height/2*Math.sin(-n.rotation),y:n.y+n.height/2*Math.cos(n.rotation)+n.width/2*Math.sin(n.rotation)},eQ(n,l,r));this._fitNodesInto(d,t);return}let u=this.shiftBehavior();n="inverted"===u?this.keepRatio()&&!t.shiftKey:"none"===u?this.keepRatio():this.keepRatio()||t.shiftKey;let f=this.centeredScaling()||t.altKey;if("top-left"===this._movingAnchorName){if(n){let t=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(t.x-a.x(),2)+Math.pow(t.y-a.y(),2));let n=this.findOne(".top-left").x()>t.x?-1:1,s=this.findOne(".top-left").y()>t.y?-1:1;e=r*this.cos*n,i=r*this.sin*s,this.findOne(".top-left").x(t.x-e),this.findOne(".top-left").y(t.y-i)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(a.y());else if("top-right"===this._movingAnchorName){if(n){let t=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};r=Math.sqrt(Math.pow(a.x()-t.x,2)+Math.pow(t.y-a.y(),2));let n=this.findOne(".top-right").x()<t.x?-1:1,s=this.findOne(".top-right").y()>t.y?-1:1;e=r*this.cos*n,i=r*this.sin*s,this.findOne(".top-right").x(t.x+e),this.findOne(".top-right").y(t.y-i)}var g=a.position();this.findOne(".top-left").y(g.y),this.findOne(".bottom-right").x(g.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(a.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(a.x());else if("bottom-left"===this._movingAnchorName){if(n){let t=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};r=Math.sqrt(Math.pow(t.x-a.x(),2)+Math.pow(a.y()-t.y,2));let n=t.x<a.x()?-1:1,s=a.y()<t.y?-1:1;e=r*this.cos*n,i=r*this.sin*s,a.x(t.x-e),a.y(t.y+i)}g=a.position(),this.findOne(".top-left").x(g.x),this.findOne(".bottom-right").y(g.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(a.y());else if("bottom-right"===this._movingAnchorName){if(n){let t=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};r=Math.sqrt(Math.pow(a.x()-t.x,2)+Math.pow(a.y()-t.y,2));let n=this.findOne(".bottom-right").x()<t.x?-1:1,s=this.findOne(".bottom-right").y()<t.y?-1:1;e=r*this.cos*n,i=r*this.sin*s,this.findOne(".bottom-right").x(t.x+e),this.findOne(".bottom-right").y(t.y+i)}}else console.error(Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(f=this.centeredScaling()||t.altKey){let t=this.findOne(".top-left"),e=this.findOne(".bottom-right"),i=t.x(),r=t.y(),n=this.getWidth()-e.x(),a=this.getHeight()-e.y();e.move({x:-i,y:-r}),t.move({x:n,y:a})}let p=this.findOne(".top-left").getAbsolutePosition();e=p.x,i=p.y;let _=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),m=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:i,width:_,height:m,rotation:c.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var e;if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));let i=this.getNode();eJ--,this._fire("transformend",{evt:t,target:i}),null==(e=this.getLayer())||e.batchDraw(),i&&this._nodes.forEach(e=>{var i;e._fire("transformend",{evt:t,target:e}),null==(i=e.getLayer())||i.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,e){let i=this._getNodeRect();if(C._inRange(t.width,-(2*this.padding())-1,1)||C._inRange(t.height,-(2*this.padding())-1,1))return void this.update();let r=new _;if(r.rotate(c.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){let e=r.point({x:-(2*this.padding()),y:0});t.x+=e.x,t.y+=e.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){let e=r.point({x:2*this.padding(),y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.width+=2*this.padding()}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){let e=r.point({x:0,y:-(2*this.padding())});t.x+=e.x,t.y+=e.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding()}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){let e=r.point({x:0,y:2*this.padding()});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding()}if(this.boundBoxFunc()){let e=this.boundBoxFunc()(i,t);e?t=e:C.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}let n=new _;n.translate(i.x,i.y),n.rotate(i.rotation),n.scale(i.width/1e7,i.height/1e7);let a=new _,s=t.width/1e7,o=t.height/1e7;!1===this.flipEnabled()?(a.translate(t.x,t.y),a.rotate(t.rotation),a.translate(t.width<0?t.width:0,t.height<0?t.height:0),a.scale(Math.abs(s),Math.abs(o))):(a.translate(t.x,t.y),a.rotate(t.rotation),a.scale(s,o));let h=a.multiply(n.invert());this._nodes.forEach(t=>{var e;if(!t.getStage())return;let i=t.getParent().getAbsoluteTransform(),r=t.getTransform().copy();r.translate(t.offsetX(),t.offsetY());let n=new _;n.multiply(i.copy().invert()).multiply(h).multiply(i).multiply(r);let a=n.decompose();t.setAttrs(a),null==(e=t.getLayer())||e.batchDraw()}),this.rotation(C._getRotation(t.rotation)),this._nodes.forEach(t=>{this._fire("transform",{evt:e,target:t}),t._fire("transform",{evt:e,target:t})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t;let e=this._getNodeRect();this.rotation(C._getRotation(e.rotation));let i=e.width,r=e.height,n=this.enabledAnchors(),a=this.resizeEnabled(),s=this.padding(),o=this.anchorSize(),h=this.find("._anchor");h.forEach(t=>{t.setAttrs({width:o,height:o,offsetX:o/2,offsetY:o/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:o/2+s,offsetY:o/2+s,visible:a&&n.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:o/2+s,visible:a&&n.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:o/2-s,offsetY:o/2+s,visible:a&&n.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:o/2+s,visible:a&&n.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:r/2,offsetX:o/2-s,visible:a&&n.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:o/2+s,offsetY:o/2-s,visible:a&&n.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:r,offsetY:o/2-s,visible:a&&n.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:r,offsetX:o/2-s,offsetY:o/2-s,visible:a&&n.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*C._sign(r)-s,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(t=>t.draggable()),x:0,y:0});let l=this.anchorStyleFunc();l&&h.forEach(t=>{l(t)}),null==(t=this.getLayer())||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();let t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),tZ.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return tn.prototype.toObject.call(this)}clone(t){return tn.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}eZ.isTransforming=()=>eJ>0,eZ.prototype.className="Transformer",f(eZ),q.addGetterSetter(eZ,"enabledAnchors",e$,function(t){return t instanceof Array||C.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(t){-1===e$.indexOf(t)&&C.warn("Unknown anchor name: "+t+". Available names are: "+e$.join(", "))}),t||[]}),q.addGetterSetter(eZ,"flipEnabled",!0,j()),q.addGetterSetter(eZ,"resizeEnabled",!0),q.addGetterSetter(eZ,"anchorSize",10,z()),q.addGetterSetter(eZ,"rotateEnabled",!0),q.addGetterSetter(eZ,"rotateLineVisible",!0),q.addGetterSetter(eZ,"rotationSnaps",[]),q.addGetterSetter(eZ,"rotateAnchorOffset",50,z()),q.addGetterSetter(eZ,"rotateAnchorCursor","crosshair"),q.addGetterSetter(eZ,"rotationSnapTolerance",5,z()),q.addGetterSetter(eZ,"borderEnabled",!0),q.addGetterSetter(eZ,"anchorStroke","rgb(0, 161, 255)"),q.addGetterSetter(eZ,"anchorStrokeWidth",1,z()),q.addGetterSetter(eZ,"anchorFill","white"),q.addGetterSetter(eZ,"anchorCornerRadius",0,z()),q.addGetterSetter(eZ,"borderStroke","rgb(0, 161, 255)"),q.addGetterSetter(eZ,"borderStrokeWidth",1,z()),q.addGetterSetter(eZ,"borderDash"),q.addGetterSetter(eZ,"keepRatio",!0),q.addGetterSetter(eZ,"shiftBehavior","default"),q.addGetterSetter(eZ,"centeredScaling",!1),q.addGetterSetter(eZ,"ignoreStroke",!1),q.addGetterSetter(eZ,"padding",0,z()),q.addGetterSetter(eZ,"nodes"),q.addGetterSetter(eZ,"node"),q.addGetterSetter(eZ,"boundBoxFunc"),q.addGetterSetter(eZ,"anchorDragBoundFunc"),q.addGetterSetter(eZ,"anchorStyleFunc"),q.addGetterSetter(eZ,"shouldOverdrawWholeArea",!1),q.addGetterSetter(eZ,"useSingleNodeRotation",!0),q.backCompat(eZ,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class e0 extends tV{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,c.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}function e1(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}e0.prototype.className="Wedge",e0.prototype._centroid=!0,e0.prototype._attrsAffectingSize=["radius"],f(e0),q.addGetterSetter(e0,"radius",0,z()),q.addGetterSetter(e0,"angle",0,z()),q.addGetterSetter(e0,"clockwise",!1),q.backCompat(e0,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});let e2=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],e5=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function e3(t,e,i,r,n){let a=i-e,s=n-r;if(0===a)return r+s/2;if(0===s)return r;let o=(t-e)/a;return s*o+r}q.addGetterSetter(tn,"blurRadius",0,z(),q.afterSetFilter),q.addGetterSetter(tn,"brightness",0,z(),q.afterSetFilter),q.addGetterSetter(tn,"contrast",0,z(),q.afterSetFilter),q.addGetterSetter(tn,"embossStrength",.5,z(),q.afterSetFilter),q.addGetterSetter(tn,"embossWhiteLevel",.5,z(),q.afterSetFilter),q.addGetterSetter(tn,"embossDirection","top-left",void 0,q.afterSetFilter),q.addGetterSetter(tn,"embossBlend",!1,void 0,q.afterSetFilter),q.addGetterSetter(tn,"enhance",0,z(),q.afterSetFilter),q.addGetterSetter(tn,"hue",0,z(),q.afterSetFilter),q.addGetterSetter(tn,"saturation",0,z(),q.afterSetFilter),q.addGetterSetter(tn,"luminance",0,z(),q.afterSetFilter),q.addGetterSetter(tn,"hue",0,z(),q.afterSetFilter),q.addGetterSetter(tn,"saturation",0,z(),q.afterSetFilter),q.addGetterSetter(tn,"value",0,z(),q.afterSetFilter);let e4=function(t,e,i){let r=t.data,n=e.data,a=t.width,s=t.height,o=i.polarCenterX||a/2,h=i.polarCenterY||s/2,l=Math.sqrt(o*o+h*h),d=a-o,u=s-h,c=Math.sqrt(d*d+u*u);l=c>l?c:l;let f=360/a*Math.PI/180;for(let t=0;t<a;t+=1){let e=Math.sin(t*f),i=Math.cos(t*f);for(let c=0;c<s;c+=1){d=Math.floor(o+l*c/s*i);let f=((u=Math.floor(h+l*c/s*e))*a+d)*4,g=r[f+0],p=r[f+1],_=r[f+2],m=r[f+3];n[(f=(t+c*a)*4)+0]=g,n[f+1]=p,n[f+2]=_,n[f+3]=m}}},e8=function(t,e,i){let r,n=t.data,a=e.data,s=t.width,o=t.height,h=i.polarCenterX||s/2,l=i.polarCenterY||o/2,d=Math.sqrt(h*h+l*l),u=s-h,c=o-l,f=Math.sqrt(u*u+c*c);d=f>d?f:d;let g=i.polarRotation||0;for(u=0;u<s;u+=1)for(c=0;c<o;c+=1){let t=u-h,e=c-l,i=Math.sqrt(t*t+e*e)*o/d,f=(180*Math.atan2(e,t)/Math.PI+360+g)%360;r=Math.floor(f=f*s/360);let p=(Math.floor(i)*s+r)*4,_=n[p+0],m=n[p+1],v=n[p+2],y=n[p+3];a[(p=(c*s+u)*4)+0]=_,a[p+1]=m,a[p+2]=v,a[p+3]=y}};function e6(t,e,i){let r=(i*t.width+e)*4,n=[];return n.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),n}function e9(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}q.addGetterSetter(tn,"kaleidoscopePower",2,z(),q.afterSetFilter),q.addGetterSetter(tn,"kaleidoscopeAngle",0,z(),q.afterSetFilter),q.addGetterSetter(tn,"threshold",0,z(),q.afterSetFilter),q.addGetterSetter(tn,"noise",.2,z(),q.afterSetFilter),q.addGetterSetter(tn,"pixelSize",8,z(),q.afterSetFilter),q.addGetterSetter(tn,"levels",.5,z(),q.afterSetFilter),q.addGetterSetter(tn,"red",0,function(t){return(this._filterUpToDate=!1,t>255)?255:t<0?0:Math.round(t)}),q.addGetterSetter(tn,"green",0,function(t){return(this._filterUpToDate=!1,t>255)?255:t<0?0:Math.round(t)}),q.addGetterSetter(tn,"blue",0,N,q.afterSetFilter),q.addGetterSetter(tn,"red",0,function(t){return(this._filterUpToDate=!1,t>255)?255:t<0?0:Math.round(t)}),q.addGetterSetter(tn,"green",0,function(t){return(this._filterUpToDate=!1,t>255)?255:t<0?0:Math.round(t)}),q.addGetterSetter(tn,"blue",0,N,q.afterSetFilter),q.addGetterSetter(tn,"alpha",1,function(t){return(this._filterUpToDate=!1,t>1)?1:t<0?0:t}),q.addGetterSetter(tn,"threshold",.5,z(),q.afterSetFilter);let e7=t9.Util._assign(t9,{Arc:t7,Arrow:eu,Circle:ec,Ellipse:ef,Image:eg,Label:ex,Tag:eb,Line:ei,Path:ed,Rect:ew,RegularPolygon:eS,Ring:eT,Sprite:ek,Star:eP,Text:eN,TextPath:eY,Transformer:eZ,Wedge:e0,Filters:{Blur:function(t){let e=Math.round(this.blurRadius());e>0&&function(t,e){let i,r,n,a,s,o,h,l,d,u,c,f,g,p,_,m,v,y,x,b,w=t.data,S=t.width,C=t.height,T=e+e+1,k=S-1,P=C-1,A=e+1,M=A*(A+1)/2,R=new e1,E=e2[e],I=e5[e],O=null,D=R,G=null,L=null;for(let t=1;t<T;t++)D=D.next=new e1,t===A&&(O=D);D.next=R,n=r=0;for(let t=0;t<C;t++){f=g=p=_=a=s=o=h=0,l=A*(m=w[r]),d=A*(v=w[r+1]),u=A*(y=w[r+2]),c=A*(x=w[r+3]),a+=M*m,s+=M*v,o+=M*y,h+=M*x,D=R;for(let t=0;t<A;t++)D.r=m,D.g=v,D.b=y,D.a=x,D=D.next;for(let t=1;t<A;t++)i=r+((k<t?k:t)<<2),a+=(D.r=m=w[i])*(b=A-t),s+=(D.g=v=w[i+1])*b,o+=(D.b=y=w[i+2])*b,h+=(D.a=x=w[i+3])*b,f+=m,g+=v,p+=y,_+=x,D=D.next;G=R,L=O;for(let t=0;t<S;t++)w[r+3]=x=h*E>>I,0!==x?(x=255/x,w[r]=(a*E>>I)*x,w[r+1]=(s*E>>I)*x,w[r+2]=(o*E>>I)*x):w[r]=w[r+1]=w[r+2]=0,a-=l,s-=d,o-=u,h-=c,l-=G.r,d-=G.g,u-=G.b,c-=G.a,i=n+((i=t+e+1)<k?i:k)<<2,f+=G.r=w[i],g+=G.g=w[i+1],p+=G.b=w[i+2],_+=G.a=w[i+3],a+=f,s+=g,o+=p,h+=_,G=G.next,l+=m=L.r,d+=v=L.g,u+=y=L.b,c+=x=L.a,f-=m,g-=v,p-=y,_-=x,L=L.next,r+=4;n+=S}for(let t=0;t<S;t++){g=p=_=f=s=o=h=a=0,l=A*(m=w[r=t<<2]),d=A*(v=w[r+1]),u=A*(y=w[r+2]),c=A*(x=w[r+3]),a+=M*m,s+=M*v,o+=M*y,h+=M*x,D=R;for(let t=0;t<A;t++)D.r=m,D.g=v,D.b=y,D.a=x,D=D.next;let n=S;for(let i=1;i<=e;i++)r=n+t<<2,a+=(D.r=m=w[r])*(b=A-i),s+=(D.g=v=w[r+1])*b,o+=(D.b=y=w[r+2])*b,h+=(D.a=x=w[r+3])*b,f+=m,g+=v,p+=y,_+=x,D=D.next,i<P&&(n+=S);r=t,G=R,L=O;for(let e=0;e<C;e++)w[(i=r<<2)+3]=x=h*E>>I,x>0?(x=255/x,w[i]=(a*E>>I)*x,w[i+1]=(s*E>>I)*x,w[i+2]=(o*E>>I)*x):w[i]=w[i+1]=w[i+2]=0,a-=l,s-=d,o-=u,h-=c,l-=G.r,d-=G.g,u-=G.b,c-=G.a,i=t+((i=e+A)<P?i:P)*S<<2,a+=f+=G.r=w[i],s+=g+=G.g=w[i+1],o+=p+=G.b=w[i+2],h+=_+=G.a=w[i+3],G=G.next,l+=m=L.r,d+=v=L.g,u+=y=L.b,c+=x=L.a,f-=m,g-=v,p-=y,_-=x,L=L.next,r+=S}}(t,e)},Brightness:function(t){let e=this.brightness(),i=t.data,r=i.length;for(let t=0;t<r;t+=4)i[t]=Math.min(255,i[t]*e),i[t+1]=Math.min(255,i[t+1]*e),i[t+2]=Math.min(255,i[t+2]*e)},Brighten:function(t){let e=255*this.brightness(),i=t.data,r=i.length;for(let t=0;t<r;t+=4)i[t]+=e,i[t+1]+=e,i[t+2]+=e},Contrast:function(t){let e=Math.pow((this.contrast()+100)/100,2),i=t.data,r=i.length,n=150,a=150,s=150;for(let t=0;t<r;t+=4)n=i[t],a=i[t+1],s=i[t+2],n/=255,n-=.5,n*=e,n+=.5,n*=255,a/=255,a-=.5,a*=e,a+=.5,a*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,n=n<0?0:n>255?255:n,a=a<0?0:a>255?255:a,s=s<0?0:s>255?255:s,i[t]=n,i[t+1]=a,i[t+2]=s},Emboss:function(t){var e,i,r,n,a,s,o,h,l;let d=t.data,u=t.width,c=t.height,f=Math.min(1,Math.max(0,null!=(i=null==(e=this.embossStrength)?void 0:e.call(this))?i:.5)),g=Math.min(1,Math.max(0,null!=(n=null==(r=this.embossWhiteLevel)?void 0:r.call(this))?n:.5)),p=null!=(o=({"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0})[null!=(s=null==(a=this.embossDirection)?void 0:a.call(this))?s:"top-left"])?o:315,_=!!(null!=(l=null==(h=this.embossBlend)?void 0:h.call(this))&&l),m=255*g,v=p*Math.PI/180,y=Math.cos(v),x=Math.sin(v),b=128/1020*(10*f),w=new Uint8ClampedArray(d),S=new Float32Array(u*c);for(let t=0,e=0;e<d.length;e+=4,t++)S[t]=.2126*w[e]+.7152*w[e+1]+.0722*w[e+2];let C=[-u-1,-u,-u+1,-1,0,1,u-1,u,u+1],T=t=>t<0?0:t>255?255:t;for(let t=1;t<c-1;t++)for(let e=1;e<u-1;e++){let i=t*u+e,r,n=0;r=0+-1*S[i+C[0]],n+=-1*S[i+C[0]],r+=0*S[i+C[1]],n+=-2*S[i+C[1]],r+=+S[i+C[2]],n+=-1*S[i+C[2]],r+=-2*S[i+C[3]],n+=0*S[i+C[3]],r+=2*S[i+C[5]],n+=0*S[i+C[5]],r+=-1*S[i+C[6]],n+=+S[i+C[6]],r+=0*S[i+C[7]],n+=2*S[i+C[7]];let a=T(m+(y*(r+=+S[i+C[8]])+x*(n+=+S[i+C[8]]))*b),s=4*i;if(_){let t=a-m;d[s]=T(w[s]+t),d[s+1]=T(w[s+1]+t),d[s+2]=T(w[s+2]+t),d[s+3]=w[s+3]}else d[s]=d[s+1]=d[s+2]=a,d[s+3]=w[s+3]}for(let t=0;t<u;t++){let e=4*t,i=((c-1)*u+t)*4;d[e]=w[e],d[e+1]=w[e+1],d[e+2]=w[e+2],d[e+3]=w[e+3],d[i]=w[i],d[i+1]=w[i+1],d[i+2]=w[i+2],d[i+3]=w[i+3]}for(let t=1;t<c-1;t++){let e=t*u*4,i=(t*u+(u-1))*4;d[e]=w[e],d[e+1]=w[e+1],d[e+2]=w[e+2],d[e+3]=w[e+3],d[i]=w[i],d[i+1]=w[i+1],d[i+2]=w[i+2],d[i+3]=w[i+3]}return t},Enhance:function(t){let e,i,r,n,a,s,o=t.data,h=o.length,l=o[0],d=l,u,c=o[1],f=c,g,p=o[2],_=p,m,v=this.enhance();if(0!==v){for(let t=0;t<h;t+=4)(u=o[t+0])<l?l=u:u>d&&(d=u),(g=o[t+1])<c?c=g:g>f&&(f=g),(m=o[t+2])<p?p=m:m>_&&(_=m);if(d===l&&(d=255,l=0),f===c&&(f=255,c=0),_===p&&(_=255,p=0),v>0)e=d+v*(255-d),i=l-v*(l-0),r=f+v*(255-f),n=c-v*(c-0),a=_+v*(255-_),s=p-v*(p-0);else{let t=(d+l)*.5;e=d+v*(d-t),i=l+v*(l-t);let o=(f+c)*.5;r=f+v*(f-o),n=c+v*(c-o);let h=(_+p)*.5;a=_+v*(_-h),s=p+v*(p-h)}for(let t=0;t<h;t+=4)o[t+0]=e3(o[t+0],l,d,i,e),o[t+1]=e3(o[t+1],c,f,n,r),o[t+2]=e3(o[t+2],p,_,s,a)}},Grayscale:function(t){let e=t.data,i=e.length;for(let t=0;t<i;t+=4){let i=.34*e[t]+.5*e[t+1]+.16*e[t+2];e[t]=i,e[t+1]=i,e[t+2]=i}},HSL:function(t){let e,i,r,n,a=t.data,s=a.length,o=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,l=127*this.luminance(),d=o*Math.cos(h*Math.PI/180),u=o*Math.sin(h*Math.PI/180),c=.299+.701*d+.167*u,f=.587-.587*d+.33*u,g=.114-.114*d-.497*u,p=.299-.299*d-.328*u,_=.587+.413*d+.035*u,m=.114-.114*d+.293*u,v=.299-.3*d+1.25*u,y=.587-.586*d-1.05*u,x=.114+.886*d-.2*u;for(let t=0;t<s;t+=4)e=a[t+0],i=a[t+1],r=a[t+2],n=a[t+3],a[t+0]=c*e+f*i+g*r+l,a[t+1]=p*e+_*i+m*r+l,a[t+2]=v*e+y*i+x*r+l,a[t+3]=n},HSV:function(t){let e=t.data,i=e.length,r=Math.pow(2,this.value()),n=Math.pow(2,this.saturation()),a=Math.abs(this.hue()+360)%360,s=r*n*Math.cos(a*Math.PI/180),o=r*n*Math.sin(a*Math.PI/180),h=.299*r+.701*s+.167*o,l=.587*r-.587*s+.33*o,d=.114*r-.114*s-.497*o,u=.299*r-.299*s-.328*o,c=.587*r+.413*s+.035*o,f=.114*r-.114*s+.293*o,g=.299*r-.3*s+1.25*o,p=.587*r-.586*s-1.05*o,_=.114*r+.886*s-.2*o;for(let t=0;t<i;t+=4){let i=e[t+0],r=e[t+1],n=e[t+2],a=e[t+3];e[t+0]=h*i+l*r+d*n,e[t+1]=u*i+c*r+f*n,e[t+2]=g*i+p*r+_*n,e[t+3]=a}},Invert:function(t){let e=t.data,i=e.length;for(let t=0;t<i;t+=4)e[t]=255-e[t],e[t+1]=255-e[t+1],e[t+2]=255-e[t+2]},Kaleidoscope:function(t){let e,i,r,n,a,s,o,h,l,d,u=t.width,c=t.height,f=Math.round(this.kaleidoscopePower()),g=Math.floor(Math.round(this.kaleidoscopeAngle())%360*u/360);if(f<1)return;let p=C.createCanvasElement();p.width=u,p.height=c;let _=p.getContext("2d").getImageData(0,0,u,c);C.releaseCanvas(p),e4(t,_,{polarCenterX:u/2,polarCenterY:c/2});let m=u/Math.pow(2,f);for(;m<=8;)m*=2,f-=1;let v=m=Math.ceil(m),y=0,x=v,b=1;for(g+m>u&&(y=v,x=0,b=-1),i=0;i<c;i+=1)for(e=y;e!==x;e+=b)r=Math.round(e+g)%u,l=(u*i+r)*4,a=_.data[l+0],s=_.data[l+1],o=_.data[l+2],h=_.data[l+3],d=(u*i+e)*4,_.data[d+0]=a,_.data[d+1]=s,_.data[d+2]=o,_.data[d+3]=h;for(i=0;i<c;i+=1)for(n=0,v=Math.floor(m);n<f;n+=1){for(e=0;e<v+1;e+=1)l=(u*i+e)*4,a=_.data[l+0],s=_.data[l+1],o=_.data[l+2],h=_.data[l+3],d=(u*i+2*v-e-1)*4,_.data[d+0]=a,_.data[d+1]=s,_.data[d+2]=o,_.data[d+3]=h;v*=2}e8(_,t,{polarRotation:0})},Mask:function(t){let e=function(t,e){let i=e6(t,0,0),r=e6(t,t.width-1,0),n=e6(t,0,t.height-1),a=e6(t,t.width-1,t.height-1),s=e||10;if(e9(i,r)<s&&e9(r,a)<s&&e9(a,n)<s&&e9(n,i)<s){let e=function(t){let e=[0,0,0];for(let i=0;i<t.length;i++)e[0]+=t[i][0],e[1]+=t[i][1],e[2]+=t[i][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([r,i,a,n]),o=[];for(let i=0;i<t.width*t.height;i++){let r=e9(e,[t.data[4*i],t.data[4*i+1],t.data[4*i+2]]);o[i]=r<s?0:255}return o}}(t,this.threshold());if(e){var i=e=function(t,e,i){let r=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],n=Math.round(Math.sqrt(r.length)),a=Math.floor(n/2),s=[];for(let o=0;o<i;o++)for(let h=0;h<e;h++){let l=o*e+h,d=0;for(let s=0;s<n;s++)for(let l=0;l<n;l++){let u=o+s-a,c=h+l-a;if(u>=0&&u<i&&c>=0&&c<e){let i=u*e+c,a=r[s*n+l];d+=t[i]*a}}s[l]=d}return s}(e=function(t,e,i){let r=[1,1,1,1,1,1,1,1,1],n=Math.round(Math.sqrt(r.length)),a=Math.floor(n/2),s=[];for(let o=0;o<i;o++)for(let h=0;h<e;h++){let l=o*e+h,d=0;for(let s=0;s<n;s++)for(let l=0;l<n;l++){let u=o+s-a,c=h+l-a;if(u>=0&&u<i&&c>=0&&c<e){let i=u*e+c,a=r[s*n+l];d+=t[i]*a}}s[l]=255*(d>=1020)}return s}(e=function(t,e,i){let r=[1,1,1,1,0,1,1,1,1],n=Math.round(Math.sqrt(r.length)),a=Math.floor(n/2),s=[];for(let o=0;o<i;o++)for(let h=0;h<e;h++){let l=o*e+h,d=0;for(let s=0;s<n;s++)for(let l=0;l<n;l++){let u=o+s-a,c=h+l-a;if(u>=0&&u<i&&c>=0&&c<e){let i=u*e+c,a=r[s*n+l];d+=t[i]*a}}s[l]=255*(2040===d)}return s}(e,t.width,t.height),t.width,t.height),t.width,t.height);for(let e=0;e<t.width*t.height;e++)t.data[4*e+3]=i[e]}return t},Noise:function(t){let e=255*this.noise(),i=t.data,r=i.length,n=e/2;for(let t=0;t<r;t+=4)i[t+0]+=n-2*n*Math.random(),i[t+1]+=n-2*n*Math.random(),i[t+2]+=n-2*n*Math.random()},Pixelate:function(t){let e=Math.ceil(this.pixelSize()),i=t.width,r=t.height,n=Math.ceil(i/e),a=Math.ceil(r/e),s=t.data;if(e<=0)return void C.error("pixelSize value can not be <= 0");for(let t=0;t<n;t+=1)for(let n=0;n<a;n+=1){let a=0,o=0,h=0,l=0,d=t*e,u=d+e,c=n*e,f=c+e,g=0;for(let t=d;t<u;t+=1)if(!(t>=i))for(let e=c;e<f;e+=1){if(e>=r)continue;let n=(i*e+t)*4;a+=s[n+0],o+=s[n+1],h+=s[n+2],l+=s[n+3],g+=1}a/=g,o/=g,h/=g,l/=g;for(let t=d;t<u;t+=1)if(!(t>=i))for(let e=c;e<f;e+=1){if(e>=r)continue;let n=(i*e+t)*4;s[n+0]=a,s[n+1]=o,s[n+2]=h,s[n+3]=l}}},Posterize:function(t){let e=Math.round(254*this.levels())+1,i=t.data,r=i.length,n=255/e;for(let t=0;t<r;t+=1)i[t]=Math.floor(i[t]/n)*n},RGB:function(t){let e=t.data,i=e.length,r=this.red(),n=this.green(),a=this.blue();for(let t=0;t<i;t+=4){let i=(.34*e[t]+.5*e[t+1]+.16*e[t+2])/255;e[t]=i*r,e[t+1]=i*n,e[t+2]=i*a,e[t+3]=e[t+3]}},RGBA:function(t){let e=t.data,i=e.length,r=this.red(),n=this.green(),a=this.blue(),s=this.alpha();for(let t=0;t<i;t+=4){let i=1-s;e[t]=r*s+e[t]*i,e[t+1]=n*s+e[t+1]*i,e[t+2]=a*s+e[t+2]*i}},Sepia:function(t){let e=t.data,i=e.length;for(let t=0;t<i;t+=4){let i=e[t+0],r=e[t+1],n=e[t+2];e[t+0]=Math.min(255,.393*i+.769*r+.189*n),e[t+1]=Math.min(255,.349*i+.686*r+.168*n),e[t+2]=Math.min(255,.272*i+.534*r+.131*n)}},Solarize:function(t){let e=t.data;for(let t=0;t<e.length;t+=4){let i=e[t],r=e[t+1],n=e[t+2];.2126*i+.7152*r+.0722*n>=128&&(e[t]=255-i,e[t+1]=255-r,e[t+2]=255-n)}return t},Threshold:function(t){let e=255*this.threshold(),i=t.data,r=i.length;for(let t=0;t<r;t+=1)i[t]=i[t]<e?0:255}}});var it=t.i(71645),ie=t.i(37956),ii=t.i(14696);function ir(...t){var e=0n;for(var i of t)e+=i;return e}function ia(...t){var e=1n;for(var i of t)e*=i;return e}function is(t,e){let i=e.codePointAt(0);if(e.length>0&&void 0!==i&&e.length===String.fromCodePoint(i).length)return i;throw RangeError(`\`${e}\` (parameter \`${t}\`) is not a character which is in code point range 0 ~ 1114111!`)}function*io(t,e,i){let{excludes:r,step:n}=i;if(t<=e)for(let i=t;i<=e;i+=n)r.has(i)||(yield i);else for(let i=t;i>=e;i-=n)r.has(i)||(yield i)}var ih=t.i(30343);function il(t=[]){let[e,i]=it.useState(t),r=it.useCallback(t=>{i(e=>[...e,t])},[]);return{add:r,remove:it.useCallback(()=>{let t;return console.log("remove",e),i(([e,...i])=>(t=e,i)),t},[]),clear:it.useCallback(()=>{i([])},[]),first:e[0],last:e[e.length-1],size:e.length,queue:e}}function id(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iu(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}t.i(47167);var ic,ig,ip,i_,im,iv,iy,ix,ib,iw,iS,iC,iT,ik,iP,iA,iM,iR,iE,iI,iO,iD,iG,iL,iF,iB,iN={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},iz={duration:.5,overwrite:!1,delay:0},iW=2*Math.PI,iH=iW/4,iY=0,iX=Math.sqrt,ij=Math.cos,iq=Math.sin,iU=function(t){return"string"==typeof t},iV=function(t){return"function"==typeof t},iK=function(t){return"number"==typeof t},i$=function(t){return void 0===t},iQ=function(t){return"object"==typeof t},iJ=function(t){return!1!==t},iZ=function(){return"undefined"!=typeof window},i0=function(t){return iV(t)||iU(t)},i1="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},i2=Array.isArray,i5=/(?:-?\.?\d|\.)+/gi,i3=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,i4=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,i8=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,i6=/[+-]=-?[.\d]+/,i9=/[^,'"\[\]\s]+/gi,i7=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,rt={},re={},ri=function(t){return(re=rI(t,rt))&&aC},rr=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},rn=function(t,e){return!e&&console.warn(t)},ra=function(t,e){return t&&(rt[t]=e)&&re&&(re[t]=e)||rt},rs=function(){return 0},ro={suppressEvents:!0,isStart:!0,kill:!1},rh={suppressEvents:!0,kill:!1},rl={suppressEvents:!0},rd={},ru=[],rc={},rf={},rg={},rp=30,r_=[],rm="",rv=function(t){var e,i,r=t[0];if(iQ(r)||iV(r)||(t=[t]),!(e=(r._gsap||{}).harness)){for(i=r_.length;i--&&!r_[i].targetTest(r););e=r_[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new nz(t[i],e)))||t.splice(i,1);return t},ry=function(t){return t._gsap||rv(ni(t))[0]._gsap},rx=function(t,e,i){return(i=t[e])&&iV(i)?t[e]():i$(i)&&t.getAttribute&&t.getAttribute(e)||i},rb=function(t,e){return(t=t.split(",")).forEach(e)||t},rw=function(t){return Math.round(1e5*t)/1e5||0},rS=function(t){return Math.round(1e7*t)/1e7||0},rC=function(t,e){var i=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),"+"===i?t+r:"-"===i?t-r:"*"===i?t*r:t/r},rT=function(t,e){for(var i=e.length,r=0;0>t.indexOf(e[r])&&++r<i;);return r<i},rk=function(){var t,e,i=ru.length,r=ru.slice(0);for(t=0,rc={},ru.length=0;t<i;t++)(e=r[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},rP=function(t){return!!(t._initted||t._startAt||t.add)},rA=function(t,e,i,r){ru.length&&!iM&&rk(),t.render(e,i,r||!!(iM&&e<0&&rP(t))),ru.length&&!iM&&rk()},rM=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(i9).length<2?e:iU(t)?t.trim():t},rR=function(t){return t},rE=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},rI=function(t,e){for(var i in e)t[i]=e[i];return t},rO=function t(e,i){for(var r in i)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(e[r]=iQ(i[r])?t(e[r]||(e[r]={}),i[r]):i[r]);return e},rD=function(t,e){var i,r={};for(i in t)i in e||(r[i]=t[i]);return r},rG=function(t){var e,i=t.parent||iE,r=t.keyframes?(e=i2(t.keyframes),function(t,i){for(var r in i)r in t||"duration"===r&&e||"ease"===r||(t[r]=i[r])}):rE;if(iJ(t.inherit))for(;i;)r(t,i.vars.defaults),i=i.parent||i._dp;return t},rL=function(t,e){for(var i=t.length,r=i===e.length;r&&i--&&t[i]===e[i];);return i<0},rF=function(t,e,i,r,n){void 0===i&&(i="_first"),void 0===r&&(r="_last");var a,s=t[r];if(n)for(a=e[n];s&&s[n]>a;)s=s._prev;return s?(e._next=s._next,s._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[r]=e,e._prev=s,e.parent=e._dp=t,e},rB=function(t,e,i,r){void 0===i&&(i="_first"),void 0===r&&(r="_last");var n=e._prev,a=e._next;n?n._next=a:t[i]===e&&(t[i]=a),a?a._prev=n:t[r]===e&&(t[r]=n),e._next=e._prev=e.parent=null},rN=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},rz=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},rW=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},rH=function(t,e,i,r){return t._startAt&&(iM?t._startAt.revert(rh):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},rY=function(t){return t._repeat?rX(t._tTime,t=t.duration()+t._rDelay)*t:0},rX=function(t,e){var i=Math.floor(t=rS(t/e));return t&&i===t?i-1:i},rj=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},rq=function(t){return t._end=rS(t._start+(t._tDur/Math.abs(t._ts||t._rts||1e-8)||0))},rU=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=rS(i._time-(t._ts>0?e/t._ts:-(((t._dirty?t.totalDuration():t._tDur)-e)/t._ts))),rq(t),i._dirty||rz(i,t)),t},rV=function(t,e){var i;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(i=rj(t.rawTime(),e),(!e._dur||r9(0,e.totalDuration(),i)-e._tTime>1e-8)&&e.render(i,!0)),rz(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-1e-8}},rK=function(t,e,i,r){return e.parent&&rN(e),e._start=rS((iK(i)?i:i||t!==iE?r4(t,i,e):t._time)+e._delay),e._end=rS(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),rF(t,e,"_first","_last",t._sort?"_start":0),rZ(e)||(t._recent=e),r||rV(t,e),t._ts<0&&rU(t,t._tTime),t},r$=function(t,e){return(rt.ScrollTrigger||rr("scrollTrigger",e))&&rt.ScrollTrigger.create(e,t)},rQ=function(t,e,i,r,n){return(nZ(t,e,n),t._initted)?!i&&t._pt&&!iM&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&iL!==nT.frame?(ru.push(t),t._lazy=[n,r],1):void 0:1},rJ=function t(e){var i=e.parent;return i&&i._ts&&i._initted&&!i._lock&&(0>i.rawTime()||t(i))},rZ=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},r0=function(t,e,i,r){var n,a,s,o=t.ratio,h=e<0||!e&&(!t._start&&rJ(t)&&!(!t._initted&&rZ(t))||(t._ts<0||t._dp._ts<0)&&!rZ(t))?0:1,l=t._rDelay,d=0;if(l&&t._repeat&&(a=rX(d=r9(0,t._tDur,e),l),t._yoyo&&1&a&&(h=1-h),a!==rX(t._tTime,l)&&(o=1-h,t.vars.repeatRefresh&&t._initted&&t.invalidate())),h!==o||iM||r||1e-8===t._zTime||!e&&t._zTime){if(!t._initted&&rQ(t,e,r,i,d))return;for(s=t._zTime,t._zTime=e||1e-8*!!i,i||(i=e&&!s),t.ratio=h,t._from&&(h=1-h),t._time=0,t._tTime=d,n=t._pt;n;)n.r(h,n.d),n=n._next;e<0&&rH(t,e,i,!0),t._onUpdate&&!i&&nf(t,"onUpdate"),d&&t._repeat&&!i&&t.parent&&nf(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===h&&(h&&rN(t,1),i||iM||(nf(t,h?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},r1=function(t,e,i){var r;if(i>e)for(r=t._first;r&&r._start<=i;){if("isPause"===r.data&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=i;){if("isPause"===r.data&&r._start<e)return r;r=r._prev}},r2=function(t,e,i,r){var n=t._repeat,a=rS(e)||0,s=t._tTime/t._tDur;return s&&!r&&(t._time*=a/t._dur),t._dur=a,t._tDur=n?n<0?1e10:rS(a*(n+1)+t._rDelay*n):a,s>0&&!r&&rU(t,t._tTime=t._tDur*s),t.parent&&rq(t),i||rz(t.parent,t),t},r5=function(t){return t instanceof nH?rz(t):r2(t,t._dur)},r3={_start:0,endTime:rs,totalDuration:rs},r4=function t(e,i,r){var n,a,s,o=e.labels,h=e._recent||r3,l=e.duration()>=1e8?h.endTime(!1):e._dur;return iU(i)&&(isNaN(i)||i in o)?(a=i.charAt(0),s="%"===i.substr(-1),n=i.indexOf("="),"<"===a||">"===a)?(n>=0&&(i=i.replace(/=/,"")),("<"===a?h._start:h.endTime(h._repeat>=0))+(parseFloat(i.substr(1))||0)*(s?(n<0?h:r).totalDuration()/100:1)):n<0?(i in o||(o[i]=l),o[i]):(a=parseFloat(i.charAt(n-1)+i.substr(n+1)),s&&r&&(a=a/100*(i2(r)?r[0]:r).totalDuration()),n>1?t(e,i.substr(0,n-1),r)+a:l+a):null==i?l:+i},r8=function(t,e,i){var r,n,a=iK(e[1]),s=(a?2:1)+(t<2?0:1),o=e[s];if(a&&(o.duration=e[1]),o.parent=i,t){for(r=o,n=i;n&&!("immediateRender"in r);)r=n.vars.defaults||{},n=iJ(n.vars.inherit)&&n.parent;o.immediateRender=iJ(r.immediateRender),t<2?o.runBackwards=1:o.startAt=e[s-1]}return new n8(e[0],o,e[s+1])},r6=function(t,e){return t||0===t?e(t):e},r9=function(t,e,i){return i<t?t:i>e?e:i},r7=function(t,e){return iU(t)&&(e=i7.exec(t))?e[1]:""},nt=[].slice,ne=function(t,e){return t&&iQ(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&iQ(t[0]))&&!t.nodeType&&t!==iI},ni=function(t,e,i){var r;return iR&&!e&&iR.selector?iR.selector(t):iU(t)&&!i&&(iO||!nk())?nt.call((e||iD).querySelectorAll(t),0):i2(t)?(void 0===r&&(r=[]),t.forEach(function(t){var e;return iU(t)&&!i||ne(t,1)?(e=r).push.apply(e,ni(t)):r.push(t)})||r):ne(t)?nt.call(t,0):t?[t]:[]},nr=function(t){return t=ni(t)[0]||rn("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return ni(e,i.querySelectorAll?i:i===t?rn("Invalid scope")||iD.createElement("div"):t)}},nn=function(t){return t.sort(function(){return .5-Math.random()})},na=function(t){if(iV(t))return t;var e=iQ(t)?t:{each:t},i=nG(e.ease),r=e.from||0,n=parseFloat(e.base)||0,a={},s=r>0&&r<1,o=isNaN(r)||s,h=e.axis,l=r,d=r;return iU(r)?l=d=({center:.5,edges:.5,end:1})[r]||0:!s&&o&&(l=r[0],d=r[1]),function(t,s,u){var c,f,g,p,_,m,v,y,x,b=(u||e).length,w=a[b];if(!w){if(!(x="auto"===e.grid?0:(e.grid||[1,1e8])[1])){for(v=-1e8;v<(v=u[x++].getBoundingClientRect().left)&&x<b;);x<b&&x--}for(m=0,w=a[b]=[],c=o?Math.min(x,b)*l-.5:r%x,f=1e8===x?0:o?b*d/x-.5:r/x|0,v=0,y=1e8;m<b;m++)g=m%x-c,p=f-(m/x|0),w[m]=_=h?Math.abs("y"===h?p:g):iX(g*g+p*p),_>v&&(v=_),_<y&&(y=_);"random"===r&&nn(w),w.max=v-y,w.min=y,w.v=b=(parseFloat(e.amount)||parseFloat(e.each)*(x>b?b-1:h?"y"===h?b/x:x:Math.max(x,b/x))||0)*("edges"===r?-1:1),w.b=b<0?n-b:n,w.u=r7(e.amount||e.each)||0,i=i&&b<0?nO(i):i}return b=(w[t]-w.min)/w.max||0,rS(w.b+(i?i(b):b)*w.v)+w.u}},ns=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var r=rS(Math.round(parseFloat(i)/t)*t*e);return(r-r%1)/e+(iK(i)?0:r7(i))}},no=function(t,e){var i,r,n=i2(t);return!n&&iQ(t)&&(i=n=t.radius||1e8,t.values?(r=!iK((t=ni(t.values))[0]))&&(i*=i):t=ns(t.increment)),r6(e,n?iV(t)?function(e){return Math.abs((r=t(e))-e)<=i?r:e}:function(e){for(var n,a,s=parseFloat(r?e.x:e),o=parseFloat(r?e.y:0),h=1e8,l=0,d=t.length;d--;)(n=r?(n=t[d].x-s)*n+(a=t[d].y-o)*a:Math.abs(t[d]-s))<h&&(h=n,l=d);return l=!i||h<=i?t[l]:e,r||l===e||iK(e)?l:l+r7(e)}:ns(t))},nh=function(t,e,i,r){return r6(i2(t)?!e:!0===i?(i=0,!1):!r,function(){return i2(t)?t[~~(Math.random()*t.length)]:(r=(i=i||1e-5)<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+.99*i))/i)*i*r)/r})},nl=function(t,e,i){return r6(i,function(i){return t[~~e(i)]})},nd=function(t){for(var e,i,r,n,a=0,s="";~(e=t.indexOf("random(",a));)r=t.indexOf(")",e),n="["===t.charAt(e+7),i=t.substr(e+7,r-e-7).match(n?i9:i5),s+=t.substr(a,e-a)+nh(n?i:+i[0],n?0:+i[1],+i[2]||1e-5),a=r+1;return s+t.substr(a,t.length-a)},nu=function(t,e,i,r,n){var a=e-t,s=r-i;return r6(n,function(e){return i+((e-t)/a*s||0)})},nc=function(t,e,i){var r,n,a,s=t.labels,o=1e8;for(r in s)(n=s[r]-e)<0==!!i&&n&&o>(n=Math.abs(n))&&(a=r,o=n);return a},nf=function(t,e,i){var r,n,a,s=t.vars,o=s[e],h=iR,l=t._ctx;if(o)return r=s[e+"Params"],n=s.callbackScope||t,i&&ru.length&&rk(),l&&(iR=l),a=r?o.apply(n,r):o.call(n),iR=h,a},ng=function(t){return rN(t),t.scrollTrigger&&t.scrollTrigger.kill(!!iM),1>t.progress()&&nf(t,"onInterrupt"),t},np=[],n_=function(t){if(t)if(t=!t.name&&t.default||t,iZ()||t.headless){var e=t.name,i=iV(t),r=e&&!i&&t.init?function(){this._props=[]}:t,n={init:rs,render:aa,add:n$,kill:ao,modifier:as,rawVars:0},a={targetTest:0,get:0,getSetter:ae,aliases:{},register:0};if(nk(),t!==r){if(rf[e])return;rE(r,rE(rD(t,n),a)),rI(r.prototype,rI(n,rD(t,a))),rf[r.prop=e]=r,t.targetTest&&(r_.push(r),rd[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}ra(e,r),t.register&&t.register(aC,r,ad)}else np.push(t)},nm={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},nv=function(t,e,i){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)*255+.5|0},ny=function(t,e,i){var r,n,a,s,o,h,l,d,u,c,f=t?iK(t)?[t>>16,t>>8&255,255&t]:0:nm.black;if(!f){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),nm[t])f=nm[t];else if("#"===t.charAt(0)){if(t.length<6&&(r=t.charAt(1),t="#"+r+r+(n=t.charAt(2))+n+(a=t.charAt(3))+a+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(f=parseInt(t.substr(1,6),16))>>16,f>>8&255,255&f,parseInt(t.substr(7),16)/255];f=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]}else if("hsl"===t.substr(0,3))if(f=c=t.match(i5),e){if(~t.indexOf("="))return f=t.match(i3),i&&f.length<4&&(f[3]=1),f}else s=f[0]%360/360,o=f[1]/100,n=(h=f[2]/100)<=.5?h*(o+1):h+o-h*o,r=2*h-n,f.length>3&&(f[3]*=1),f[0]=nv(s+1/3,r,n),f[1]=nv(s,r,n),f[2]=nv(s-1/3,r,n);else f=t.match(i5)||nm.transparent;f=f.map(Number)}return e&&!c&&(r=f[0]/255,h=((l=Math.max(r,n=f[1]/255,a=f[2]/255))+(d=Math.min(r,n,a)))/2,l===d?s=o=0:(u=l-d,o=h>.5?u/(2-l-d):u/(l+d),s=(l===r?(n-a)/u+6*(n<a):l===n?(a-r)/u+2:(r-n)/u+4)*60),f[0]=~~(s+.5),f[1]=~~(100*o+.5),f[2]=~~(100*h+.5)),i&&f.length<4&&(f[3]=1),f},nx=function(t){var e=[],i=[],r=-1;return t.split(nw).forEach(function(t){var n=t.match(i4)||[];e.push.apply(e,n),i.push(r+=n.length+1)}),e.c=i,e},nb=function(t,e,i){var r,n,a,s,o="",h=(t+o).match(nw),l=e?"hsla(":"rgba(",d=0;if(!h)return t;if(h=h.map(function(t){return(t=ny(t,e,1))&&l+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"}),i&&(a=nx(t),(r=i.c).join(o)!==a.c.join(o)))for(s=(n=t.replace(nw,"1").split(i4)).length-1;d<s;d++)o+=n[d]+(~r.indexOf(d)?h.shift()||l+"0,0,0,0)":(a.length?a:h.length?h:i).shift());if(!n)for(s=(n=t.split(nw)).length-1;d<s;d++)o+=n[d]+h[d];return o+n[s]},nw=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in nm)e+="|"+t+"\\b";return RegExp(e+")","gi")}(),nS=/hsl[a]?\(/,nC=function(t){var e,i=t.join(" ");if(nw.lastIndex=0,nw.test(i))return e=nS.test(i),t[1]=nb(t[1],e),t[0]=nb(t[0],e,nx(t[1])),!0},nT=(iy=Date.now,ix=500,ib=33,iS=iw=iy(),iC=1e3/240,iT=1e3/240,ik=[],iP=function t(e){var i,r,n,a,s=iy()-iS,o=!0===e;if((s>ix||s<0)&&(iw+=s-ib),iS+=s,((i=(n=iS-iw)-iT)>0||o)&&(a=++i_.frame,im=n-1e3*i_.time,i_.time=n/=1e3,iT+=i+(i>=iC?4:iC-i),r=1),o||(ic=ig(t)),r)for(iv=0;iv<ik.length;iv++)ik[iv](n,im,a,e)},i_={time:0,frame:0,tick:function(){iP(!0)},deltaRatio:function(t){return im/(1e3/(t||60))},wake:function(){iG&&(!iO&&iZ()&&(iD=(iI=iO=window).document||{},rt.gsap=aC,(iI.gsapVersions||(iI.gsapVersions=[])).push(aC.version),ri(re||iI.GreenSockGlobals||!iI.gsap&&iI||{}),np.forEach(n_)),ip="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,ic&&i_.sleep(),ig=ip||function(t){return setTimeout(t,iT-1e3*i_.time+1|0)},iB=1,iP(2))},sleep:function(){(ip?cancelAnimationFrame:clearTimeout)(ic),iB=0,ig=rs},lagSmoothing:function(t,e){ib=Math.min(e||33,ix=t||1/0)},fps:function(t){iC=1e3/(t||240),iT=1e3*i_.time+iC},add:function(t,e,i){var r=e?function(e,i,n,a){t(e,i,n,a),i_.remove(r)}:t;return i_.remove(t),ik[i?"unshift":"push"](r),nk(),r},remove:function(t,e){~(e=ik.indexOf(t))&&ik.splice(e,1)&&iv>=e&&iv--},_listeners:ik}),nk=function(){return!iB&&nT.wake()},nP={},nA=/^[\d.\-M][\d.\-,\s]/,nM=/["']/g,nR=function(t){for(var e,i,r,n={},a=t.substr(1,t.length-3).split(":"),s=a[0],o=1,h=a.length;o<h;o++)i=a[o],e=o!==h-1?i.lastIndexOf(","):i.length,r=i.substr(0,e),n[s]=isNaN(r)?r.replace(nM,"").trim():+r,s=i.substr(e+1).trim();return n},nE=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<i?t.indexOf(")",i+1):i)},nI=function(t){var e=(t+"").split("("),i=nP[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[nR(e[1])]:nE(t).split(",").map(rM)):nP._CE&&nA.test(t)?nP._CE("",t):i},nO=function(t){return function(e){return 1-t(1-e)}},nD=function t(e,i){for(var r,n=e._first;n;)n instanceof nH?t(n,i):!n.vars.yoyoEase||n._yoyo&&n._repeat||n._yoyo===i||(n.timeline?t(n.timeline,i):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=i)),n=n._next},nG=function(t,e){return t&&(iV(t)?t:nP[t]||nI(t))||e},nL=function(t,e,i,r){void 0===i&&(i=function(t){return 1-e(1-t)}),void 0===r&&(r=function(t){return t<.5?e(2*t)/2:1-e((1-t)*2)/2});var n,a={easeIn:e,easeOut:i,easeInOut:r};return rb(t,function(t){for(var e in nP[t]=rt[t]=a,nP[n=t.toLowerCase()]=i,a)nP[n+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=nP[t+"."+e]=a[e]}),a},nF=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t((e-.5)*2)/2}},nB=function t(e,i,r){var n=i>=1?i:1,a=(r||(e?.3:.45))/(i<1?i:1),s=a/iW*(Math.asin(1/n)||0),o=function(t){return 1===t?1:n*Math.pow(2,-10*t)*iq((t-s)*a)+1},h="out"===e?o:"in"===e?function(t){return 1-o(1-t)}:nF(o);return a=iW/a,h.config=function(i,r){return t(e,i,r)},h},nN=function t(e,i){void 0===i&&(i=1.70158);var r=function(t){return t?--t*t*((i+1)*t+i)+1:0},n="out"===e?r:"in"===e?function(t){return 1-r(1-t)}:nF(r);return n.config=function(i){return t(e,i)},n};rb("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var i=e<5?e+1:e;nL(t+",Power"+(i-1),e?function(t){return Math.pow(t,i)}:function(t){return t},function(t){return 1-Math.pow(1-t,i)},function(t){return t<.5?Math.pow(2*t,i)/2:1-Math.pow((1-t)*2,i)/2})}),nP.Linear.easeNone=nP.none=nP.Linear.easeIn,nL("Elastic",nB("in"),nB("out"),nB()),nX=2*(nY=1/2.75),nj=2.5*nY,nL("Bounce",function(t){return 1-nq(1-t)},nq=function(t){return t<nY?7.5625*t*t:t<nX?7.5625*Math.pow(t-1.5/2.75,2)+.75:t<nj?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*Math.pow(t-2.625/2.75,2)+.984375}),nL("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)}),nL("Circ",function(t){return-(iX(1-t*t)-1)}),nL("Sine",function(t){return 1===t?1:-ij(t*iH)+1}),nL("Back",nN("in"),nN("out"),nN()),nP.SteppedEase=nP.steps=rt.SteppedEase={config:function(t,e){void 0===t&&(t=1);var i=1/t,r=t+ +!e,n=+!!e,a=.99999999;return function(t){return((r*r9(0,a,t)|0)+n)*i}}},iz.ease=nP["quad.out"],rb("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return rm+=t+","+t+"Params,"});var nz=function(t,e){this.id=iY++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:rx,this.set=e?e.getSetter:ae},nW=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,r2(this,+t.duration,1,1),this.data=t.data,iR&&(this._ctx=iR,iR.data.push(this)),iB||nT.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,r2(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(nk(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(rU(this,t),!i._dp||i.parent||rV(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:-((i.totalDuration()-i._tTime)/i._ts))&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&rK(this._dp,this,this._start-this._delay)}return this._tTime===t&&(this._dur||e)&&(!this._initted||1e-8!==Math.abs(this._zTime))&&(t||this._initted||!this.add&&!this._ptLookup)||(this._ts||(this._pTime=t),rA(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+rY(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(1&this.iteration())?1-t:t)+rY(this),e):this.duration()?Math.min(1,this._time/this._dur):+(this.rawTime()>0)},e.iteration=function(t,e){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*i,e):this._repeat?rX(this._tTime,i)+1:1},e.timeScale=function(t,e){if(!arguments.length)return -1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var i=this.parent&&this._ts?rj(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,this.totalTime(r9(-Math.abs(this._delay),this.totalDuration(),i),!1!==e),rq(this),rW(this)},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(nk(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&1e-8!==Math.abs(this._zTime)&&(this._tTime-=1e-8)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&rK(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(iJ(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&1>this.totalProgress())?this._tTime%(this._dur+this._rDelay):this._ts?rj(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){void 0===t&&(t=rl);var e=iM;return iM=t,rP(this)&&(this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents)),"nested"!==this.data&&!1!==t.kill&&this.kill(),iM=e,this},e.globalTime=function(t){for(var e=this,i=arguments.length?t:e.rawTime();e;)i=e._start+i/(Math.abs(e._ts)||1),e=e._dp;return!this.parent&&this._sat?this._sat.globalTime(t):i},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,r5(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,r5(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(r4(this,t),iJ(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,iJ(e)),this._dur||(this._zTime=-1e-8),this},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,i=this._start;return!!(!e||this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<this.endTime(!0)-1e-8)},e.eventCallback=function(t,e,i){var r=this.vars;return arguments.length>1?(e?(r[t]=e,i&&(r[t+"Params"]=i),"onUpdate"===t&&(this._onUpdate=e)):delete r[t],this):r[t]},e.then=function(t){var e=this;return new Promise(function(i){var r=iV(t)?t:rR,n=function(){var t=e.then;e.then=null,iV(r)&&(r=r(e))&&(r.then||r===e)&&(e.then=t),i(r),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?n():e._prom=n})},e.kill=function(){ng(this)},t}();rE(nW.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var nH=function(t){function e(e,i){var r;return void 0===e&&(e={}),(r=t.call(this,e)||this).labels={},r.smoothChildTiming=!!e.smoothChildTiming,r.autoRemoveChildren=!!e.autoRemoveChildren,r._sort=iJ(e.sortChildren),iE&&rK(e.parent||iE,id(r),i),e.reversed&&r.reverse(),e.paused&&r.paused(!0),e.scrollTrigger&&r$(id(r),e.scrollTrigger),r}iu(e,t);var i=e.prototype;return i.to=function(t,e,i){return r8(0,arguments,this),this},i.from=function(t,e,i){return r8(1,arguments,this),this},i.fromTo=function(t,e,i,r){return r8(2,arguments,this),this},i.set=function(t,e,i){return e.duration=0,e.parent=this,rG(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new n8(t,e,r4(this,i),1),this},i.call=function(t,e,i){return rK(this,n8.delayedCall(0,t,e),i)},i.staggerTo=function(t,e,i,r,n,a,s){return i.duration=e,i.stagger=i.stagger||r,i.onComplete=a,i.onCompleteParams=s,i.parent=this,new n8(t,i,r4(this,n)),this},i.staggerFrom=function(t,e,i,r,n,a,s){return i.runBackwards=1,rG(i).immediateRender=iJ(i.immediateRender),this.staggerTo(t,e,i,r,n,a,s)},i.staggerFromTo=function(t,e,i,r,n,a,s,o){return r.startAt=i,rG(r).immediateRender=iJ(r.immediateRender),this.staggerTo(t,e,r,n,a,s,o)},i.render=function(t,e,i){var r,n,a,s,o,h,l,d,u,c,f,g,p=this._time,_=this._dirty?this.totalDuration():this._tDur,m=this._dur,v=t<=0?0:rS(t),y=this._zTime<0!=t<0&&(this._initted||!m);if(this!==iE&&v>_&&t>=0&&(v=_),v!==this._tTime||i||y){if(p!==this._time&&m&&(v+=this._time-p,t+=this._time-p),r=v,u=this._start,h=!(d=this._ts),y&&(m||(p=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(f=this._yoyo,o=m+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*o+t,e,i);if(r=rS(v%o),v===_?(s=this._repeat,r=m):((s=~~(c=rS(v/o)))&&s===c&&(r=m,s--),r>m&&(r=m)),c=rX(this._tTime,o),!p&&this._tTime&&c!==s&&this._tTime-c*o-this._dur<=0&&(c=s),f&&1&s&&(r=m-r,g=1),s!==c&&!this._lock){var x=f&&1&c,b=x===(f&&1&s);if(s<c&&(x=!x),p=x?0:v%m?m:v,this._lock=1,this.render(p||(g?0:rS(s*o)),e,!m)._lock=0,this._tTime=v,!e&&this.parent&&nf(this,"onRepeat"),this.vars.repeatRefresh&&!g&&(this.invalidate()._lock=1),p&&p!==this._time||!this._ts!==h||this.vars.onRepeat&&!this.parent&&!this._act||(m=this._dur,_=this._tDur,b&&(this._lock=2,p=x?m:-1e-4,this.render(p,!0),this.vars.repeatRefresh&&!g&&this.invalidate()),this._lock=0,!this._ts&&!h))return this;nD(this,g)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(l=r1(this,rS(p),rS(r)))&&(v-=r-(r=l._start)),this._tTime=v,this._time=r,this._act=!d,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,p=0),!p&&v&&!e&&!c&&(nf(this,"onStart"),this._tTime!==v))return this;if(r>=p&&t>=0)for(n=this._first;n;){if(a=n._next,(n._act||r>=n._start)&&n._ts&&l!==n){if(n.parent!==this)return this.render(t,e,i);if(n.render(n._ts>0?(r-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(r-n._start)*n._ts,e,i),r!==this._time||!this._ts&&!h){l=0,a&&(v+=this._zTime=-1e-8);break}}n=a}else{n=this._last;for(var w=t<0?t:r;n;){if(a=n._prev,(n._act||w<=n._end)&&n._ts&&l!==n){if(n.parent!==this)return this.render(t,e,i);if(n.render(n._ts>0?(w-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(w-n._start)*n._ts,e,i||iM&&rP(n)),r!==this._time||!this._ts&&!h){l=0,a&&(v+=this._zTime=w?-1e-8:1e-8);break}}n=a}}if(l&&!e&&(this.pause(),l.render(r>=p?0:-1e-8)._zTime=r>=p?1:-1,this._ts))return this._start=u,rq(this),this.render(t,e,i);this._onUpdate&&!e&&nf(this,"onUpdate",!0),(v===_&&this._tTime>=this.totalDuration()||!v&&p)&&(u===this._start||Math.abs(d)!==Math.abs(this._ts))&&!this._lock&&((t||!m)&&(v===_&&this._ts>0||!v&&this._ts<0)&&rN(this,1),e||t<0&&!p||!v&&!p&&_||(nf(this,v===_&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(v<_&&this.timeScale()>0)&&this._prom()))}return this},i.add=function(t,e){var i=this;if(iK(e)||(e=r4(this,e,t)),!(t instanceof nW)){if(i2(t))return t.forEach(function(t){return i.add(t,e)}),this;if(iU(t))return this.addLabel(t,e);if(!iV(t))return this;t=n8.delayedCall(0,t)}return this!==t?rK(this,t,e):this},i.getChildren=function(t,e,i,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===r&&(r=-1e8);for(var n=[],a=this._first;a;)a._start>=r&&(a instanceof n8?e&&n.push(a):(i&&n.push(a),t&&n.push.apply(n,a.getChildren(!0,e,i)))),a=a._next;return n},i.getById=function(t){for(var e=this.getChildren(1,1,1),i=e.length;i--;)if(e[i].vars.id===t)return e[i]},i.remove=function(t){return iU(t)?this.removeLabel(t):iV(t)?this.killTweensOf(t):(t.parent===this&&rB(this,t),t===this._recent&&(this._recent=this._last),rz(this))},i.totalTime=function(e,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=rS(nT.time-(this._ts>0?e/this._ts:-((this.totalDuration()-e)/this._ts)))),t.prototype.totalTime.call(this,e,i),this._forcing=0,this):this._tTime},i.addLabel=function(t,e){return this.labels[t]=r4(this,e),this},i.removeLabel=function(t){return delete this.labels[t],this},i.addPause=function(t,e,i){var r=n8.delayedCall(0,e||rs,i);return r.data="isPause",this._hasPause=1,rK(this,r,r4(this,t))},i.removePause=function(t){var e=this._first;for(t=r4(this,t);e;)e._start===t&&"isPause"===e.data&&rN(e),e=e._next},i.killTweensOf=function(t,e,i){for(var r=this.getTweensOf(t,i),n=r.length;n--;)nU!==r[n]&&r[n].kill(t,e);return this},i.getTweensOf=function(t,e){for(var i,r=[],n=ni(t),a=this._first,s=iK(e);a;)a instanceof n8?rT(a._targets,n)&&(s?(!nU||a._initted&&a._ts)&&a.globalTime(0)<=e&&a.globalTime(a.totalDuration())>e:!e||a.isActive())&&r.push(a):(i=a.getTweensOf(n,e)).length&&r.push.apply(r,i),a=a._next;return r},i.tweenTo=function(t,e){e=e||{};var i,r=this,n=r4(r,t),a=e,s=a.startAt,o=a.onStart,h=a.onStartParams,l=a.immediateRender,d=n8.to(r,rE({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:n,overwrite:"auto",duration:e.duration||Math.abs((n-(s&&"time"in s?s.time:r._time))/r.timeScale())||1e-8,onStart:function(){if(r.pause(),!i){var t=e.duration||Math.abs((n-(s&&"time"in s?s.time:r._time))/r.timeScale());d._dur!==t&&r2(d,t,0,1).render(d._time,!0,!0),i=1}o&&o.apply(d,h||[])}},e));return l?d.render(0):d},i.tweenFromTo=function(t,e,i){return this.tweenTo(e,rE({startAt:{time:r4(this,t)}},i))},i.recent=function(){return this._recent},i.nextLabel=function(t){return void 0===t&&(t=this._time),nc(this,r4(this,t))},i.previousLabel=function(t){return void 0===t&&(t=this._time),nc(this,r4(this,t),1)},i.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+1e-8)},i.shiftChildren=function(t,e,i){void 0===i&&(i=0);for(var r,n=this._first,a=this.labels;n;)n._start>=i&&(n._start+=t,n._end+=t),n=n._next;if(e)for(r in a)a[r]>=i&&(a[r]+=t);return rz(this)},i.invalidate=function(e){var i=this._first;for(this._lock=0;i;)i.invalidate(e),i=i._next;return t.prototype.invalidate.call(this,e)},i.clear=function(t){void 0===t&&(t=!0);for(var e,i=this._first;i;)e=i._next,this.remove(i),i=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),rz(this)},i.totalDuration=function(t){var e,i,r,n=0,a=this._last,s=1e8;if(arguments.length)return this.timeScale((this._repeat<0?this.duration():this.totalDuration())/(this.reversed()?-t:t));if(this._dirty){for(r=this.parent;a;)e=a._prev,a._dirty&&a.totalDuration(),(i=a._start)>s&&this._sort&&a._ts&&!this._lock?(this._lock=1,rK(this,a,i-a._delay,1)._lock=0):s=i,i<0&&a._ts&&(n-=i,(!r&&!this._dp||r&&r.smoothChildTiming)&&(this._start+=i/this._ts,this._time-=i,this._tTime-=i),this.shiftChildren(-i,!1,-Infinity),s=0),a._end>n&&a._ts&&(n=a._end),a=e;r2(this,this===iE&&this._time>n?this._time:n,1,1),this._dirty=0}return this._tDur},e.updateRoot=function(t){if(iE._ts&&(rA(iE,rj(t,iE)),iL=nT.frame),nT.frame>=rp){rp+=iN.autoSleep||120;var e=iE._first;if((!e||!e._ts)&&iN.autoSleep&&nT._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||nT.sleep()}}},e}(nW);rE(nH.prototype,{_lock:0,_hasPause:0,_forcing:0});var nY,nX,nj,nq,nU,nV,nK=function(t,e,i,r,n,a,s){var o,h,l,d,u,c,f,g,p=new ad(this._pt,t,e,0,1,an,null,n),_=0,m=0;for(p.b=i,p.e=r,i+="",r+="",(f=~r.indexOf("random("))&&(r=nd(r)),a&&(a(g=[i,r],t,e),i=g[0],r=g[1]),h=i.match(i8)||[];o=i8.exec(r);)d=o[0],u=r.substring(_,o.index),l?l=(l+1)%5:"rgba("===u.substr(-5)&&(l=1),d!==h[m++]&&(c=parseFloat(h[m-1])||0,p._pt={_next:p._pt,p:u||1===m?u:",",s:c,c:"="===d.charAt(1)?rC(c,d)-c:parseFloat(d)-c,m:l&&l<4?Math.round:0},_=i8.lastIndex);return p.c=_<r.length?r.substring(_,r.length):"",p.fp=s,(i6.test(r)||f)&&(p.e=0),this._pt=p,p},n$=function(t,e,i,r,n,a,s,o,h,l){iV(r)&&(r=r(n||0,t,a));var d,u=t[e],c="get"!==i?i:iV(u)?h?t[e.indexOf("set")||!iV(t["get"+e.substr(3)])?e:"get"+e.substr(3)](h):t[e]():u,f=iV(u)?h?n7:n9:n6;if(iU(r)&&(~r.indexOf("random(")&&(r=nd(r)),"="===r.charAt(1)&&((d=rC(c,r)+(r7(c)||0))||0===d)&&(r=d)),!l||c!==r||nV)return isNaN(c*r)||""===r?(u||e in t||rr(e,r),nK.call(this,t,e,c,r,f,o||iN.stringFilter,h)):(d=new ad(this._pt,t,e,+c||0,r-(c||0),"boolean"==typeof u?ar:ai,0,f),h&&(d.fp=h),s&&d.modifier(s,this,t),this._pt=d)},nQ=function(t,e,i,r,n){if(iV(t)&&(t=n5(t,n,e,i,r)),!iQ(t)||t.style&&t.nodeType||i2(t)||i1(t))return iU(t)?n5(t,n,e,i,r):t;var a,s={};for(a in t)s[a]=n5(t[a],n,e,i,r);return s},nJ=function(t,e,i,r,n,a){var s,o,h,l;if(rf[t]&&!1!==(s=new rf[t]).init(n,s.rawVars?e[t]:nQ(e[t],r,n,a,i),i,r,a)&&(i._pt=o=new ad(i._pt,n,t,0,1,s.render,s,0,s.priority),i!==iF))for(h=i._ptLookup[i._targets.indexOf(n)],l=s._props.length;l--;)h[s._props[l]]=o;return s},nZ=function t(e,i,r){var n,a,s,o,h,l,d,u,c,f,g,p,_,m=e.vars,v=m.ease,y=m.startAt,x=m.immediateRender,b=m.lazy,w=m.onUpdate,S=m.runBackwards,C=m.yoyoEase,T=m.keyframes,k=m.autoRevert,P=e._dur,A=e._startAt,M=e._targets,R=e.parent,E=R&&"nested"===R.data?R.vars.targets:M,I="auto"===e._overwrite&&!iA,O=e.timeline;if(!O||T&&v||(v="none"),e._ease=nG(v,iz.ease),e._yEase=C?nO(nG(!0===C?v:C,iz.ease)):0,C&&e._yoyo&&!e._repeat&&(C=e._yEase,e._yEase=e._ease,e._ease=C),e._from=!O&&!!m.runBackwards,!O||T&&!m.stagger){if(p=(u=M[0]?ry(M[0]).harness:0)&&m[u.prop],n=rD(m,rd),A&&(A._zTime<0&&A.progress(1),i<0&&S&&x&&!k?A.render(-1,!0):A.revert(S&&P?rh:ro),A._lazy=0),y){if(rN(e._startAt=n8.set(M,rE({data:"isStart",overwrite:!1,parent:R,immediateRender:!0,lazy:!A&&iJ(b),startAt:null,delay:0,onUpdate:w&&function(){return nf(e,"onUpdate")},stagger:0},y))),e._startAt._dp=0,e._startAt._sat=e,i<0&&(iM||!x&&!k)&&e._startAt.revert(rh),x&&P&&i<=0&&r<=0){i&&(e._zTime=i);return}}else if(S&&P&&!A)if(i&&(x=!1),s=rE({overwrite:!1,data:"isFromStart",lazy:x&&!A&&iJ(b),immediateRender:x,stagger:0,parent:R},n),p&&(s[u.prop]=p),rN(e._startAt=n8.set(M,s)),e._startAt._dp=0,e._startAt._sat=e,i<0&&(iM?e._startAt.revert(rh):e._startAt.render(-1,!0)),e._zTime=i,x){if(!i)return}else t(e._startAt,1e-8,1e-8);for(a=0,e._pt=e._ptCache=0,b=P&&iJ(b)||b&&!P;a<M.length;a++){if(d=(h=M[a])._gsap||rv(M)[a]._gsap,e._ptLookup[a]=f={},rc[d.id]&&ru.length&&rk(),g=E===M?a:E.indexOf(h),u&&!1!==(c=new u).init(h,p||n,e,g,E)&&(e._pt=o=new ad(e._pt,h,c.name,0,1,c.render,c,0,c.priority),c._props.forEach(function(t){f[t]=o}),c.priority&&(l=1)),!u||p)for(s in n)rf[s]&&(c=nJ(s,n,e,g,h,E))?c.priority&&(l=1):f[s]=o=n$.call(e,h,s,"get",n[s],g,E,0,m.stringFilter);e._op&&e._op[a]&&e.kill(h,e._op[a]),I&&e._pt&&(nU=e,iE.killTweensOf(h,f,e.globalTime(i)),_=!e.parent,nU=0),e._pt&&b&&(rc[d.id]=1)}l&&al(e),e._onInit&&e._onInit(e)}e._onUpdate=w,e._initted=(!e._op||e._pt)&&!_,T&&i<=0&&O.render(1e8,!0,!0)},n0=function(t,e,i,r,n,a,s,o){var h,l,d,u,c=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!c)for(c=t._ptCache[e]=[],d=t._ptLookup,u=t._targets.length;u--;){if((h=d[u][e])&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==e&&h.fp!==e;)h=h._next;if(!h)return nV=1,t.vars[e]="+=0",nZ(t,s),nV=0,o?rn(e+" not eligible for reset"):1;c.push(h)}for(u=c.length;u--;)(h=(l=c[u])._pt||l).s=(r||0===r)&&!n?r:h.s+(r||0)+a*h.c,h.c=i-h.s,l.e&&(l.e=rw(i)+r7(l.e)),l.b&&(l.b=h.s+r7(l.b))},n1=function(t,e){var i,r,n,a,s=t[0]?ry(t[0]).harness:0,o=s&&s.aliases;if(!o)return e;for(r in i=rI({},e),o)if(r in i)for(n=(a=o[r].split(",")).length;n--;)i[a[n]]=i[r];return i},n2=function(t,e,i,r){var n,a,s=e.ease||r||"power1.inOut";if(i2(e))a=i[t]||(i[t]=[]),e.forEach(function(t,i){return a.push({t:i/(e.length-1)*100,v:t,e:s})});else for(n in e)a=i[n]||(i[n]=[]),"ease"===n||a.push({t:parseFloat(t),v:e[n],e:s})},n5=function(t,e,i,r,n){return iV(t)?t.call(e,i,r,n):iU(t)&&~t.indexOf("random(")?nd(t):t},n3=rm+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",n4={};rb(n3+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return n4[t]=1});var n8=function(t){function e(e,i,r,n){"number"==typeof i&&(r.duration=i,i=r,r=null);var a,s,o,h,l,d,u,c,f=t.call(this,n?i:rG(i))||this,g=f.vars,p=g.duration,_=g.delay,m=g.immediateRender,v=g.stagger,y=g.overwrite,x=g.keyframes,b=g.defaults,w=g.scrollTrigger,S=g.yoyoEase,C=i.parent||iE,T=(i2(e)||i1(e)?iK(e[0]):"length"in i)?[e]:ni(e);if(f._targets=T.length?rv(T):rn("GSAP target "+e+" not found. https://gsap.com",!iN.nullTargetWarn)||[],f._ptLookup=[],f._overwrite=y,x||v||i0(p)||i0(_)){if(i=f.vars,(a=f.timeline=new nH({data:"nested",defaults:b||{},targets:C&&"nested"===C.data?C.vars.targets:T})).kill(),a.parent=a._dp=id(f),a._start=0,v||i0(p)||i0(_)){if(h=T.length,u=v&&na(v),iQ(v))for(l in v)~n3.indexOf(l)&&(c||(c={}),c[l]=v[l]);for(s=0;s<h;s++)(o=rD(i,n4)).stagger=0,S&&(o.yoyoEase=S),c&&rI(o,c),d=T[s],o.duration=+n5(p,id(f),s,d,T),o.delay=(+n5(_,id(f),s,d,T)||0)-f._delay,!v&&1===h&&o.delay&&(f._delay=_=o.delay,f._start+=_,o.delay=0),a.to(d,o,u?u(s,d,T):0),a._ease=nP.none;a.duration()?p=_=0:f.timeline=0}else if(x){rG(rE(a.vars.defaults,{ease:"none"})),a._ease=nG(x.ease||i.ease||"none");var k,P,A,M=0;if(i2(x))x.forEach(function(t){return a.to(T,t,">")}),a.duration();else{for(l in o={},x)"ease"===l||"easeEach"===l||n2(l,x[l],o,x.easeEach);for(l in o)for(s=0,k=o[l].sort(function(t,e){return t.t-e.t}),M=0;s<k.length;s++)(A={ease:(P=k[s]).e,duration:(P.t-(s?k[s-1].t:0))/100*p})[l]=P.v,a.to(T,A,M),M+=A.duration;a.duration()<p&&a.to({},{duration:p-a.duration()})}}p||f.duration(p=a.duration())}else f.timeline=0;return!0!==y||iA||(nU=id(f),iE.killTweensOf(T),nU=0),rK(C,id(f),r),i.reversed&&f.reverse(),i.paused&&f.paused(!0),(m||!p&&!x&&f._start===rS(C._time)&&iJ(m)&&function t(e){return!e||e._ts&&t(e.parent)}(id(f))&&"nested"!==C.data)&&(f._tTime=-1e-8,f.render(Math.max(0,-_)||0)),w&&r$(id(f),w),f}iu(e,t);var i=e.prototype;return i.render=function(t,e,i){var r,n,a,s,o,h,l,d,u,c=this._time,f=this._tDur,g=this._dur,p=t<0,_=t>f-1e-8&&!p?f:t<1e-8?0:t;if(g){if(_!==this._tTime||!t||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==p||this._lazy){if(r=_,d=this.timeline,this._repeat){if(s=g+this._rDelay,this._repeat<-1&&p)return this.totalTime(100*s+t,e,i);if(r=rS(_%s),_===f?(a=this._repeat,r=g):(a=~~(o=rS(_/s)))&&a===o?(r=g,a--):r>g&&(r=g),(h=this._yoyo&&1&a)&&(u=this._yEase,r=g-r),o=rX(this._tTime,s),r===c&&!i&&this._initted&&a===o)return this._tTime=_,this;a!==o&&(d&&this._yEase&&nD(d,h),this.vars.repeatRefresh&&!h&&!this._lock&&r!==s&&this._initted&&(this._lock=i=1,this.render(rS(s*a),!0).invalidate()._lock=0))}if(!this._initted){if(rQ(this,p?t:r,i,e,_))return this._tTime=0,this;if(c!==this._time&&!(i&&this.vars.repeatRefresh&&a!==o))return this;if(g!==this._dur)return this.render(t,e,i)}if(this._tTime=_,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=l=(u||this._ease)(r/g),this._from&&(this.ratio=l=1-l),!c&&_&&!e&&!o&&(nf(this,"onStart"),this._tTime!==_))return this;for(n=this._pt;n;)n.r(l,n.d),n=n._next;d&&d.render(t<0?t:d._dur*d._ease(r/this._dur),e,i)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(p&&rH(this,t,e,i),nf(this,"onUpdate")),this._repeat&&a!==o&&this.vars.onRepeat&&!e&&this.parent&&nf(this,"onRepeat"),(_===this._tDur||!_)&&this._tTime===_&&(p&&!this._onUpdate&&rH(this,t,!0,!0),(t||!g)&&(_===this._tDur&&this._ts>0||!_&&this._ts<0)&&rN(this,1),!e&&!(p&&!c)&&(_||c||h)&&(nf(this,_===f?"onComplete":"onReverseComplete",!0),this._prom&&!(_<f&&this.timeScale()>0)&&this._prom()))}}else r0(this,t,e,i);return this},i.targets=function(){return this._targets},i.invalidate=function(e){return e&&this.vars.runBackwards||(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(e),t.prototype.invalidate.call(this,e)},i.resetTo=function(t,e,i,r,n){iB||nT.wake(),this._ts||this.play();var a=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return(this._initted||nZ(this,a),n0(this,t,e,i,r,this._ease(a/this._dur),a,n))?this.resetTo(t,e,i,r,1):(rU(this,0),this.parent||rF(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},i.kill=function(t,e){if(void 0===e&&(e="all"),!t&&(!e||"all"===e))return this._lazy=this._pt=0,this.parent?ng(this):this.scrollTrigger&&this.scrollTrigger.kill(!!iM),this;if(this.timeline){var i=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,nU&&!0!==nU.vars.overwrite)._first||ng(this),this.parent&&i!==this.timeline.totalDuration()&&r2(this,this._dur*this.timeline._tDur/i,0,1),this}var r,n,a,s,o,h,l,d=this._targets,u=t?ni(t):d,c=this._ptLookup,f=this._pt;if((!e||"all"===e)&&rL(d,u))return"all"===e&&(this._pt=0),ng(this);for(r=this._op=this._op||[],"all"!==e&&(iU(e)&&(o={},rb(e,function(t){return o[t]=1}),e=o),e=n1(d,e)),l=d.length;l--;)if(~u.indexOf(d[l]))for(o in n=c[l],"all"===e?(r[l]=e,s=n,a={}):(a=r[l]=r[l]||{},s=e),s)(h=n&&n[o])&&("kill"in h.d&&!0!==h.d.kill(o)||rB(this,h,"_pt"),delete n[o]),"all"!==a&&(a[o]=1);return this._initted&&!this._pt&&f&&ng(this),this},e.to=function(t,i){return new e(t,i,arguments[2])},e.from=function(t,e){return r8(1,arguments)},e.delayedCall=function(t,i,r,n){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:i,onReverseComplete:i,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:n})},e.fromTo=function(t,e,i){return r8(2,arguments)},e.set=function(t,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(t,i)},e.killTweensOf=function(t,e,i){return iE.killTweensOf(t,e,i)},e}(nW);rE(n8.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),rb("staggerTo,staggerFrom,staggerFromTo",function(t){n8[t]=function(){var e=new nH,i=nt.call(arguments,0);return i.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,i)}});var n6=function(t,e,i){return t[e]=i},n9=function(t,e,i){return t[e](i)},n7=function(t,e,i,r){return t[e](r.fp,i)},at=function(t,e,i){return t.setAttribute(e,i)},ae=function(t,e){return iV(t[e])?n9:i$(t[e])&&t.setAttribute?at:n6},ai=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},ar=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},an=function(t,e){var i=e._pt,r="";if(!t&&e.b)r=e.b;else if(1===t&&e.e)r=e.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+r,i=i._next;r+=e.c}e.set(e.t,e.p,r,e)},aa=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},as=function(t,e,i,r){for(var n,a=this._pt;a;)n=a._next,a.p===r&&a.modifier(t,e,i),a=n},ao=function(t){for(var e,i,r=this._pt;r;)i=r._next,(r.p!==t||r.op)&&r.op!==t?r.dep||(e=1):rB(this,r,"_pt"),r=i;return!e},ah=function(t,e,i,r){r.mSet(t,e,r.m.call(r.tween,i,r.mt),r)},al=function(t){for(var e,i,r,n,a=t._pt;a;){for(e=a._next,i=r;i&&i.pr>a.pr;)i=i._next;(a._prev=i?i._prev:n)?a._prev._next=a:r=a,(a._next=i)?i._prev=a:n=a,a=e}t._pt=r},ad=function(){function t(t,e,i,r,n,a,s,o,h){this.t=e,this.s=r,this.c=n,this.p=i,this.r=a||ai,this.d=s||this,this.set=o||n6,this.pr=h||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,i){this.mSet=this.mSet||this.set,this.set=ah,this.m=t,this.mt=i,this.tween=e},t}();rb(rm+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return rd[t]=1}),rt.TweenMax=rt.TweenLite=n8,rt.TimelineLite=rt.TimelineMax=nH,iE=new nH({sortChildren:!1,defaults:iz,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),iN.stringFilter=nC;var au=[],ac={},af=[],ag=0,ap=0,a_=function(t){return(ac[t]||af).map(function(t){return t()})},am=function(){var t=Date.now(),e=[];t-ag>2&&(a_("matchMediaInit"),au.forEach(function(t){var i,r,n,a,s=t.queries,o=t.conditions;for(r in s)(i=iI.matchMedia(s[r]).matches)&&(n=1),i!==o[r]&&(o[r]=i,a=1);a&&(t.revert(),n&&e.push(t))}),a_("matchMediaRevert"),e.forEach(function(t){return t.onMatch(t,function(e){return t.add(null,e)})}),ag=t,a_("matchMedia"))},av=function(){function t(t,e){this.selector=e&&nr(e),this.data=[],this._r=[],this.isReverted=!1,this.id=ap++,t&&this.add(t)}var e=t.prototype;return e.add=function(t,e,i){iV(t)&&(i=e,e=t,t=iV);var r=this,n=function(){var t,n=iR,a=r.selector;return n&&n!==r&&n.data.push(r),i&&(r.selector=nr(i)),iR=r,t=e.apply(r,arguments),iV(t)&&r._r.push(t),iR=n,r.selector=a,r.isReverted=!1,t};return r.last=n,t===iV?n(r,function(t){return r.add(null,t)}):t?r[t]=n:n},e.ignore=function(t){var e=iR;iR=null,t(this),iR=e},e.getTweens=function(){var e=[];return this.data.forEach(function(i){return i instanceof t?e.push.apply(e,i.getTweens()):i instanceof n8&&!(i.parent&&"nested"===i.parent.data)&&e.push(i)}),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(t,e){var i=this;if(t){for(var r,n=i.getTweens(),a=i.data.length;a--;)"isFlip"===(r=i.data[a]).data&&(r.revert(),r.getChildren(!0,!0,!1).forEach(function(t){return n.splice(n.indexOf(t),1)}));for(n.map(function(t){return{g:t._dur||t._delay||t._sat&&!t._sat.vars.immediateRender?t.globalTime(0):-1/0,t:t}}).sort(function(t,e){return e.g-t.g||-1/0}).forEach(function(e){return e.t.revert(t)}),a=i.data.length;a--;)(r=i.data[a])instanceof nH?"nested"!==r.data&&(r.scrollTrigger&&r.scrollTrigger.revert(),r.kill()):r instanceof n8||!r.revert||r.revert(t);i._r.forEach(function(e){return e(t,i)}),i.isReverted=!0}else this.data.forEach(function(t){return t.kill&&t.kill()});if(this.clear(),e)for(var s=au.length;s--;)au[s].id===this.id&&au.splice(s,1)},e.revert=function(t){this.kill(t||{})},t}(),ay=function(){function t(t){this.contexts=[],this.scope=t,iR&&iR.data.push(this)}var e=t.prototype;return e.add=function(t,e,i){iQ(t)||(t={matches:t});var r,n,a,s=new av(0,i||this.scope),o=s.conditions={};for(n in iR&&!s.selector&&(s.selector=iR.selector),this.contexts.push(s),e=s.add("onMatch",e),s.queries=t,t)"all"===n?a=1:(r=iI.matchMedia(t[n]))&&(0>au.indexOf(s)&&au.push(s),(o[n]=r.matches)&&(a=1),r.addListener?r.addListener(am):r.addEventListener("change",am));return a&&e(s,function(t){return s.add(null,t)}),this},e.revert=function(t){this.kill(t||{})},e.kill=function(t){this.contexts.forEach(function(e){return e.kill(t,!0)})},t}(),ax={registerPlugin:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(t){return n_(t)})},timeline:function(t){return new nH(t)},getTweensOf:function(t,e){return iE.getTweensOf(t,e)},getProperty:function(t,e,i,r){iU(t)&&(t=ni(t)[0]);var n=ry(t||{}).get,a=i?rR:rM;return"native"===i&&(i=""),t?e?a((rf[e]&&rf[e].get||n)(t,e,i,r)):function(e,i,r){return a((rf[e]&&rf[e].get||n)(t,e,i,r))}:t},quickSetter:function(t,e,i){if((t=ni(t)).length>1){var r=t.map(function(t){return aC.quickSetter(t,e,i)}),n=r.length;return function(t){for(var e=n;e--;)r[e](t)}}t=t[0]||{};var a=rf[e],s=ry(t),o=s.harness&&(s.harness.aliases||{})[e]||e,h=a?function(e){var r=new a;iF._pt=0,r.init(t,i?e+i:e,iF,0,[t]),r.render(1,r),iF._pt&&aa(1,iF)}:s.set(t,o);return a?h:function(e){return h(t,o,i?e+i:e,s,1)}},quickTo:function(t,e,i){var r,n=aC.to(t,rE(((r={})[e]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),a=function(t,i,r){return n.resetTo(e,t,i,r)};return a.tween=n,a},isTweening:function(t){return iE.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=nG(t.ease,iz.ease)),rO(iz,t||{})},config:function(t){return rO(iN,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,r=t.plugins,n=t.defaults,a=t.extendTimeline;(r||"").split(",").forEach(function(t){return t&&!rf[t]&&!rt[t]&&rn(e+" effect requires "+t+" plugin.")}),rg[e]=function(t,e,r){return i(ni(t),rE(e||{},n),r)},a&&(nH.prototype[e]=function(t,i,r){return this.add(rg[e](t,iQ(i)?i:(r=i)&&{},this),r)})},registerEase:function(t,e){nP[t]=nG(e)},parseEase:function(t,e){return arguments.length?nG(t,e):nP},getById:function(t){return iE.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var i,r,n=new nH(t);for(n.smoothChildTiming=iJ(t.smoothChildTiming),iE.remove(n),n._dp=0,n._time=n._tTime=iE._time,i=iE._first;i;)r=i._next,(e||!(!i._dur&&i instanceof n8&&i.vars.onComplete===i._targets[0]))&&rK(n,i,i._start-i._delay),i=r;return rK(iE,n,0),n},context:function(t,e){return t?new av(t,e):iR},matchMedia:function(t){return new ay(t)},matchMediaRefresh:function(){return au.forEach(function(t){var e,i,r=t.conditions;for(i in r)r[i]&&(r[i]=!1,e=1);e&&t.revert()})||am()},addEventListener:function(t,e){var i=ac[t]||(ac[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=ac[t],r=i&&i.indexOf(e);r>=0&&i.splice(r,1)},utils:{wrap:function t(e,i,r){var n=i-e;return i2(e)?nl(e,t(0,e.length),i):r6(r,function(t){return(n+(t-e)%n)%n+e})},wrapYoyo:function t(e,i,r){var n=i-e,a=2*n;return i2(e)?nl(e,t(0,e.length-1),i):r6(r,function(t){return t=(a+(t-e)%a)%a||0,e+(t>n?a-t:t)})},distribute:na,random:nh,snap:no,normalize:function(t,e,i){return nu(t,e,0,1,i)},getUnit:r7,clamp:function(t,e,i){return r6(i,function(i){return r9(t,e,i)})},splitColor:ny,toArray:ni,selector:nr,mapRange:nu,pipe:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return e.reduce(function(t,e){return e(t)},t)}},unitize:function(t,e){return function(i){return t(parseFloat(i))+(e||r7(i))}},interpolate:function t(e,i,r,n){var a=isNaN(e+i)?0:function(t){return(1-t)*e+t*i};if(!a){var s,o,h,l,d,u=iU(e),c={};if(!0===r&&(n=1)&&(r=null),u)e={p:e},i={p:i};else if(i2(e)&&!i2(i)){for(o=1,h=[],d=(l=e.length)-2;o<l;o++)h.push(t(e[o-1],e[o]));l--,a=function(t){var e=Math.min(d,~~(t*=l));return h[e](t-e)},r=i}else n||(e=rI(i2(e)?[]:{},e));if(!h){for(s in i)n$.call(c,e,s,"get",i[s]);a=function(t){return aa(t,c)||(u?e.p:e)}}}return r6(r,a)},shuffle:nn},install:ri,effects:rg,ticker:nT,updateRoot:nH.updateRoot,plugins:rf,globalTimeline:iE,core:{PropTween:ad,globals:ra,Tween:n8,Timeline:nH,Animation:nW,getCache:ry,_removeLinkedListItem:rB,reverting:function(){return iM},context:function(t){return t&&iR&&(iR.data.push(t),t._ctx=iR),iR},suppressOverwrites:function(t){return iA=t}}};rb("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return ax[t]=n8[t]}),nT.add(nH.updateRoot),iF=ax.to({},{duration:0});var ab=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},aw=function(t,e){var i,r,n,a=t._targets;for(i in e)for(r=a.length;r--;)(n=t._ptLookup[r][i])&&(n=n.d)&&(n._pt&&(n=ab(n,i)),n&&n.modifier&&n.modifier(e[i],t,a[r],i))},aS=function(t,e){return{name:t,headless:1,rawVars:1,init:function(t,i,r){r._onInit=function(t){var r,n;if(iU(i)&&(r={},rb(i,function(t){return r[t]=1}),i=r),e){for(n in r={},i)r[n]=e(i[n]);i=r}aw(t,i)}}}},aC=ax.registerPlugin({name:"attr",init:function(t,e,i,r,n){var a,s,o;for(a in this.tween=i,e)o=t.getAttribute(a)||"",(s=this.add(t,"setAttribute",(o||0)+"",e[a],r,n,0,0,a)).op=a,s.b=o,this._props.push(a)},render:function(t,e){for(var i=e._pt;i;)iM?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",headless:1,init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},aS("roundProps",ns),aS("modifiers"),aS("snap",no))||ax;n8.version=nH.version=aC.version="3.13.0",iG=1,iZ()&&nk(),nP.Power0,nP.Power1,nP.Power2,nP.Power3,nP.Power4,nP.Linear,nP.Quad,nP.Cubic,nP.Quart,nP.Quint,nP.Strong,nP.Elastic,nP.Back,nP.SteppedEase,nP.Bounce,nP.Sine,nP.Expo,nP.Circ;var aT,ak,aP,aA,aM,aR,aE,aI={},aO=180/Math.PI,aD=Math.PI/180,aG=Math.atan2,aL=/([A-Z])/g,aF=/(left|right|width|margin|padding|x)/i,aB=/[\s,\(]\S/,aN={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},az=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},aW=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},aH=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},aY=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},aX=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},aj=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},aq=function(t,e,i){return t.style[e]=i},aU=function(t,e,i){return t.style.setProperty(e,i)},aV=function(t,e,i){return t._gsap[e]=i},aK=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},a$=function(t,e,i,r,n){var a=t._gsap;a.scaleX=a.scaleY=i,a.renderTransform(n,a)},aQ=function(t,e,i,r,n){var a=t._gsap;a[e]=i,a.renderTransform(n,a)},aJ="transform",aZ=aJ+"Origin",a0=function t(e,i){var r=this,n=this.target,a=n.style,s=n._gsap;if(e in aI&&a){if(this.tfm=this.tfm||{},"transform"===e)return aN.transform.split(",").forEach(function(e){return t.call(r,e,i)});if(~(e=aN[e]||e).indexOf(",")?e.split(",").forEach(function(t){return r.tfm[t]=sh(n,t)}):this.tfm[e]=s.x?s[e]:sh(n,e),e===aZ&&(this.tfm.zOrigin=s.zOrigin),this.props.indexOf(aJ)>=0)return;s.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(aZ,i,"")),e=aJ}(a||i)&&this.props.push(e,i,a[e])},a1=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},a2=function(){var t,e,i=this.props,r=this.target,n=r.style,a=r._gsap;for(t=0;t<i.length;t+=3)i[t+1]?2===i[t+1]?r[i[t]](i[t+2]):r[i[t]]=i[t+2]:i[t+2]?n[i[t]]=i[t+2]:n.removeProperty("--"===i[t].substr(0,2)?i[t]:i[t].replace(aL,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)a[e]=this.tfm[e];a.svg&&(a.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),(t=aR())&&t.isStart||n[aJ]||(a1(n),a.zOrigin&&n[aZ]&&(n[aZ]+=" "+a.zOrigin+"px",a.zOrigin=0,a.renderTransform()),a.uncache=1)}},a5=function(t,e){var i={target:t,props:[],revert:a2,save:a0};return t._gsap||aC.core.getCache(t),e&&t.style&&t.nodeType&&e.split(",").forEach(function(t){return i.save(t)}),i},a3=function(t,e){var i=aT.createElementNS?aT.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):aT.createElement(t);return i&&i.style?i:aT.createElement(t)},a4=function t(e,i,r){var n=getComputedStyle(e);return n[i]||n.getPropertyValue(i.replace(aL,"-$1").toLowerCase())||n.getPropertyValue(i)||!r&&t(e,a6(i)||i,1)||""},a8="O,Moz,ms,Ms,Webkit".split(","),a6=function(t,e,i){var r=(e||aA).style,n=5;if(t in r&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);n--&&!(a8[n]+t in r););return n<0?null:(3===n?"ms":n>=0?a8[n]:"")+t},a9=function(){"undefined"!=typeof window&&window.document&&(ak=(aT=window.document).documentElement,aA=a3("div")||{style:{}},a3("div"),aZ=(aJ=a6(aJ))+"Origin",aA.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",aE=!!a6("perspective"),aR=aC.core.reverting,aP=1)},a7=function(t){var e,i=t.ownerSVGElement,r=a3("svg",i&&i.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=t.cloneNode(!0);n.style.display="block",r.appendChild(n),ak.appendChild(r);try{e=n.getBBox()}catch(t){}return r.removeChild(n),ak.removeChild(r),e},st=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},se=function(t){var e,i;try{e=t.getBBox()}catch(r){e=a7(t),i=1}return e&&(e.width||e.height)||i||(e=a7(t)),!e||e.width||e.x||e.y?e:{x:+st(t,["x","cx","x1"])||0,y:+st(t,["y","cy","y1"])||0,width:0,height:0}},si=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&se(t))},sr=function(t,e){if(e){var i,r=t.style;e in aI&&e!==aZ&&(e=aJ),r.removeProperty?(("ms"===(i=e.substr(0,2))||"webkit"===e.substr(0,6))&&(e="-"+e),r.removeProperty("--"===i?e:e.replace(aL,"-$1").toLowerCase())):r.removeAttribute(e)}},sn=function(t,e,i,r,n,a){var s=new ad(t._pt,e,i,0,1,a?aj:aX);return t._pt=s,s.b=r,s.e=n,t._props.push(i),s},sa={deg:1,rad:1,turn:1},ss={grid:1,flex:1},so=function t(e,i,r,n){var a,s,o,h,l=parseFloat(r)||0,d=(r+"").trim().substr((l+"").length)||"px",u=aA.style,c=aF.test(i),f="svg"===e.tagName.toLowerCase(),g=(f?"client":"offset")+(c?"Width":"Height"),p="px"===n,_="%"===n;if(n===d||!l||sa[n]||sa[d])return l;if("px"===d||p||(l=t(e,i,r,"px")),h=e.getCTM&&si(e),(_||"%"===d)&&(aI[i]||~i.indexOf("adius")))return a=h?e.getBBox()[c?"width":"height"]:e[g],rw(_?l/a*100:l/100*a);if(u[c?"width":"height"]=100+(p?d:n),s="rem"!==n&&~i.indexOf("adius")||"em"===n&&e.appendChild&&!f?e:e.parentNode,h&&(s=(e.ownerSVGElement||{}).parentNode),s&&s!==aT&&s.appendChild||(s=aT.body),(o=s._gsap)&&_&&o.width&&c&&o.time===nT.time&&!o.uncache)return rw(l/o.width*100);if(_&&("height"===i||"width"===i)){var m=e.style[i];e.style[i]=100+n,a=e[g],m?e.style[i]=m:sr(e,i)}else(_||"%"===d)&&!ss[a4(s,"display")]&&(u.position=a4(e,"position")),s===e&&(u.position="static"),s.appendChild(aA),a=aA[g],s.removeChild(aA),u.position="absolute";return c&&_&&((o=ry(s)).time=nT.time,o.width=s[g]),rw(p?a*l/100:a&&l?100/a*l:0)},sh=function(t,e,i,r){var n;return aP||a9(),e in aN&&"transform"!==e&&~(e=aN[e]).indexOf(",")&&(e=e.split(",")[0]),aI[e]&&"transform"!==e?(n=sx(t,r),n="transformOrigin"!==e?n[e]:n.svg?n.origin:sb(a4(t,aZ))+" "+n.zOrigin+"px"):(!(n=t.style[e])||"auto"===n||r||~(n+"").indexOf("calc("))&&(n=sf[e]&&sf[e](t,e,i)||a4(t,e)||rx(t,e)||+("opacity"===e)),i&&!~(n+"").trim().indexOf(" ")?so(t,e,n,i)+i:n},sl=function(t,e,i,r){if(!i||"none"===i){var n=a6(e,t,1),a=n&&a4(t,n,1);a&&a!==i?(e=n,i=a):"borderColor"===e&&(i=a4(t,"borderTopColor"))}var s,o,h,l,d,u,c,f,g,p,_,m=new ad(this._pt,t.style,e,0,1,an),v=0,y=0;if(m.b=i,m.e=r,i+="","var(--"===(r+="").substring(0,6)&&(r=a4(t,r.substring(4,r.indexOf(")")))),"auto"===r&&(u=t.style[e],t.style[e]=r,r=a4(t,e)||r,u?t.style[e]=u:sr(t,e)),nC(s=[i,r]),i=s[0],r=s[1],h=i.match(i4)||[],(r.match(i4)||[]).length){for(;o=i4.exec(r);)c=o[0],g=r.substring(v,o.index),d?d=(d+1)%5:("rgba("===g.substr(-5)||"hsla("===g.substr(-5))&&(d=1),c!==(u=h[y++]||"")&&(l=parseFloat(u)||0,_=u.substr((l+"").length),"="===c.charAt(1)&&(c=rC(l,c)+_),f=parseFloat(c),p=c.substr((f+"").length),v=i4.lastIndex-p.length,p||(p=p||iN.units[e]||_,v===r.length&&(r+=p,m.e+=p)),_!==p&&(l=so(t,e,u,p)||0),m._pt={_next:m._pt,p:g||1===y?g:",",s:l,c:f-l,m:d&&d<4||"zIndex"===e?Math.round:0});m.c=v<r.length?r.substring(v,r.length):""}else m.r="display"===e&&"none"===r?aj:aX;return i6.test(r)&&(m.e=0),this._pt=m,m},sd={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},su=function(t){var e=t.split(" "),i=e[0],r=e[1]||"50%";return("top"===i||"bottom"===i||"left"===r||"right"===r)&&(t=i,i=r,r=t),e[0]=sd[i]||i,e[1]=sd[r]||r,e.join(" ")},sc=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i,r,n,a=e.t,s=a.style,o=e.u,h=a._gsap;if("all"===o||!0===o)s.cssText="",r=1;else for(n=(o=o.split(",")).length;--n>-1;)aI[i=o[n]]&&(r=1,i="transformOrigin"===i?aZ:aJ),sr(a,i);r&&(sr(a,aJ),h&&(h.svg&&a.removeAttribute("transform"),s.scale=s.rotate=s.translate="none",sx(a,1),h.uncache=1,a1(s)))}},sf={clearProps:function(t,e,i,r,n){if("isFromStart"!==n.data){var a=t._pt=new ad(t._pt,e,i,0,0,sc);return a.u=r,a.pr=-10,a.tween=n,t._props.push(i),1}}},sg=[1,0,0,1,0,0],sp={},s_=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},sm=function(t){var e=a4(t,aJ);return s_(e)?sg:e.substr(7).match(i3).map(rw)},sv=function(t,e){var i,r,n,a,s=t._gsap||ry(t),o=t.style,h=sm(t);return s.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(h=[(n=t.transform.baseVal.consolidate().matrix).a,n.b,n.c,n.d,n.e,n.f]).join(",")?sg:h:(h!==sg||t.offsetParent||t===ak||s.svg||(n=o.display,o.display="block",(i=t.parentNode)&&(t.offsetParent||t.getBoundingClientRect().width)||(a=1,r=t.nextElementSibling,ak.appendChild(t)),h=sm(t),n?o.display=n:sr(t,"display"),a&&(r?i.insertBefore(t,r):i?i.appendChild(t):ak.removeChild(t))),e&&h.length>6?[h[0],h[1],h[4],h[5],h[12],h[13]]:h)},sy=function(t,e,i,r,n,a){var s,o,h,l,d=t._gsap,u=n||sv(t,!0),c=d.xOrigin||0,f=d.yOrigin||0,g=d.xOffset||0,p=d.yOffset||0,_=u[0],m=u[1],v=u[2],y=u[3],x=u[4],b=u[5],w=e.split(" "),S=parseFloat(w[0])||0,C=parseFloat(w[1])||0;i?u!==sg&&(o=_*y-m*v)&&(h=y/o*S+-v/o*C+(v*b-y*x)/o,l=-m/o*S+_/o*C-(_*b-m*x)/o,S=h,C=l):(S=(s=se(t)).x+(~w[0].indexOf("%")?S/100*s.width:S),C=s.y+(~(w[1]||w[0]).indexOf("%")?C/100*s.height:C)),r||!1!==r&&d.smooth?(d.xOffset=g+((x=S-c)*_+(b=C-f)*v)-x,d.yOffset=p+(x*m+b*y)-b):d.xOffset=d.yOffset=0,d.xOrigin=S,d.yOrigin=C,d.smooth=!!r,d.origin=e,d.originIsAbsolute=!!i,t.style[aZ]="0px 0px",a&&(sn(a,d,"xOrigin",c,S),sn(a,d,"yOrigin",f,C),sn(a,d,"xOffset",g,d.xOffset),sn(a,d,"yOffset",p,d.yOffset)),t.setAttribute("data-svg-origin",S+" "+C)},sx=function(t,e){var i=t._gsap||new nz(t);if("x"in i&&!e&&!i.uncache)return i;var r,n,a,s,o,h,l,d,u,c,f,g,p,_,m,v,y,x,b,w,S,C,T,k,P,A,M,R,E,I,O,D,G=t.style,L=i.scaleX<0,F=getComputedStyle(t),B=a4(t,aZ)||"0";return r=n=a=h=l=d=u=c=f=0,s=o=1,i.svg=!!(t.getCTM&&si(t)),F.translate&&(("none"!==F.translate||"none"!==F.scale||"none"!==F.rotate)&&(G[aJ]=("none"!==F.translate?"translate3d("+(F.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==F.rotate?"rotate("+F.rotate+") ":"")+("none"!==F.scale?"scale("+F.scale.split(" ").join(",")+") ":"")+("none"!==F[aJ]?F[aJ]:"")),G.scale=G.rotate=G.translate="none"),_=sv(t,i.svg),i.svg&&(i.uncache?(P=t.getBBox(),B=i.xOrigin-P.x+"px "+(i.yOrigin-P.y)+"px",k=""):k=!e&&t.getAttribute("data-svg-origin"),sy(t,k||B,!!k||i.originIsAbsolute,!1!==i.smooth,_)),g=i.xOrigin||0,p=i.yOrigin||0,_!==sg&&(x=_[0],b=_[1],w=_[2],S=_[3],r=C=_[4],n=T=_[5],6===_.length?(s=Math.sqrt(x*x+b*b),o=Math.sqrt(S*S+w*w),h=x||b?aG(b,x)*aO:0,(u=w||S?aG(w,S)*aO+h:0)&&(o*=Math.abs(Math.cos(u*aD))),i.svg&&(r-=g-(g*x+p*w),n-=p-(g*b+p*S))):(D=_[6],I=_[7],M=_[8],R=_[9],E=_[10],O=_[11],r=_[12],n=_[13],a=_[14],l=(m=aG(D,E))*aO,m&&(k=C*(v=Math.cos(-m))+M*(y=Math.sin(-m)),P=T*v+R*y,A=D*v+E*y,M=-(C*y)+M*v,R=-(T*y)+R*v,E=-(D*y)+E*v,O=-(I*y)+O*v,C=k,T=P,D=A),d=(m=aG(-w,E))*aO,m&&(k=x*(v=Math.cos(-m))-M*(y=Math.sin(-m)),P=b*v-R*y,A=w*v-E*y,O=S*y+O*v,x=k,b=P,w=A),h=(m=aG(b,x))*aO,m&&(k=x*(v=Math.cos(m))+b*(y=Math.sin(m)),P=C*v+T*y,b=b*v-x*y,T=T*v-C*y,x=k,C=P),l&&Math.abs(l)+Math.abs(h)>359.9&&(l=h=0,d=180-d),s=rw(Math.sqrt(x*x+b*b+w*w)),o=rw(Math.sqrt(T*T+D*D)),u=Math.abs(m=aG(C,T))>2e-4?m*aO:0,f=O?1/(O<0?-O:O):0),i.svg&&(k=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!s_(a4(t,aJ)),k&&t.setAttribute("transform",k))),Math.abs(u)>90&&270>Math.abs(u)&&(L?(s*=-1,u+=h<=0?180:-180,h+=h<=0?180:-180):(o*=-1,u+=u<=0?180:-180)),e=e||i.uncache,i.x=r-((i.xPercent=r&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-r)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+"px",i.y=n-((i.yPercent=n&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-n)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+"px",i.z=a+"px",i.scaleX=rw(s),i.scaleY=rw(o),i.rotation=rw(h)+"deg",i.rotationX=rw(l)+"deg",i.rotationY=rw(d)+"deg",i.skewX=u+"deg",i.skewY=c+"deg",i.transformPerspective=f+"px",(i.zOrigin=parseFloat(B.split(" ")[2])||!e&&i.zOrigin||0)&&(G[aZ]=sb(B)),i.xOffset=i.yOffset=0,i.force3D=iN.force3D,i.renderTransform=i.svg?sk:aE?sT:sS,i.uncache=0,i},sb=function(t){return(t=t.split(" "))[0]+" "+t[1]},sw=function(t,e,i){var r=r7(e);return rw(parseFloat(e)+parseFloat(so(t,"x",i+"px",r)))+r},sS=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,sT(t,e)},sC="0deg",sT=function(t,e){var i=e||this,r=i.xPercent,n=i.yPercent,a=i.x,s=i.y,o=i.z,h=i.rotation,l=i.rotationY,d=i.rotationX,u=i.skewX,c=i.skewY,f=i.scaleX,g=i.scaleY,p=i.transformPerspective,_=i.force3D,m=i.target,v=i.zOrigin,y="",x="auto"===_&&t&&1!==t||!0===_;if(v&&(d!==sC||l!==sC)){var b,w=parseFloat(l)*aD,S=Math.sin(w),C=Math.cos(w);a=sw(m,a,-(S*(b=Math.cos(w=parseFloat(d)*aD))*v)),s=sw(m,s,-(-Math.sin(w)*v)),o=sw(m,o,-(C*b*v)+v)}"0px"!==p&&(y+="perspective("+p+") "),(r||n)&&(y+="translate("+r+"%, "+n+"%) "),(x||"0px"!==a||"0px"!==s||"0px"!==o)&&(y+="0px"!==o||x?"translate3d("+a+", "+s+", "+o+") ":"translate("+a+", "+s+") "),h!==sC&&(y+="rotate("+h+") "),l!==sC&&(y+="rotateY("+l+") "),d!==sC&&(y+="rotateX("+d+") "),(u!==sC||c!==sC)&&(y+="skew("+u+", "+c+") "),(1!==f||1!==g)&&(y+="scale("+f+", "+g+") "),m.style[aJ]=y||"translate(0, 0)"},sk=function(t,e){var i,r,n,a,s,o=e||this,h=o.xPercent,l=o.yPercent,d=o.x,u=o.y,c=o.rotation,f=o.skewX,g=o.skewY,p=o.scaleX,_=o.scaleY,m=o.target,v=o.xOrigin,y=o.yOrigin,x=o.xOffset,b=o.yOffset,w=o.forceCSS,S=parseFloat(d),C=parseFloat(u);c=parseFloat(c),f=parseFloat(f),(g=parseFloat(g))&&(f+=g=parseFloat(g),c+=g),c||f?(c*=aD,f*=aD,i=Math.cos(c)*p,r=Math.sin(c)*p,n=-(Math.sin(c-f)*_),a=Math.cos(c-f)*_,f&&(g*=aD,n*=s=Math.sqrt(1+(s=Math.tan(f-g))*s),a*=s,g&&(i*=s=Math.sqrt(1+(s=Math.tan(g))*s),r*=s)),i=rw(i),r=rw(r),n=rw(n),a=rw(a)):(i=p,a=_,r=n=0),(S&&!~(d+"").indexOf("px")||C&&!~(u+"").indexOf("px"))&&(S=so(m,"x",d,"px"),C=so(m,"y",u,"px")),(v||y||x||b)&&(S=rw(S+v-(v*i+y*n)+x),C=rw(C+y-(v*r+y*a)+b)),(h||l)&&(S=rw(S+h/100*(s=m.getBBox()).width),C=rw(C+l/100*s.height)),s="matrix("+i+","+r+","+n+","+a+","+S+","+C+")",m.setAttribute("transform",s),w&&(m.style[aJ]=s)},sP=function(t,e,i,r,n){var a,s,o=iU(n),h=parseFloat(n)*(o&&~n.indexOf("rad")?aO:1)-r,l=r+h+"deg";return o&&("short"===(a=n.split("_")[1])&&(h%=360)!=h%180&&(h+=h<0?360:-360),"cw"===a&&h<0?h=(h+36e9)%360-360*~~(h/360):"ccw"===a&&h>0&&(h=(h-36e9)%360-360*~~(h/360))),t._pt=s=new ad(t._pt,e,i,r,h,aW),s.e=l,s.u="deg",t._props.push(i),s},sA=function(t,e){for(var i in e)t[i]=e[i];return t},sM=function(t,e,i){var r,n,a,s,o,h,l,d=sA({},i._gsap),u=i.style;for(n in d.svg?(a=i.getAttribute("transform"),i.setAttribute("transform",""),u[aJ]=e,r=sx(i,1),sr(i,aJ),i.setAttribute("transform",a)):(a=getComputedStyle(i)[aJ],u[aJ]=e,r=sx(i,1),u[aJ]=a),aI)(a=d[n])!==(s=r[n])&&0>"perspective,force3D,transformOrigin,svgOrigin".indexOf(n)&&(o=r7(a)!==(l=r7(s))?so(i,n,a,l):parseFloat(a),h=parseFloat(s),t._pt=new ad(t._pt,r,n,o,h-o,az),t._pt.u=l||0,t._props.push(n));sA(r,d)};rb("padding,margin,Width,Radius",function(t,e){var i="Right",r="Bottom",n="Left",a=(e<3?["Top",i,r,n]:["Top"+n,"Top"+i,r+i,r+n]).map(function(i){return e<2?t+i:"border"+i+t});sf[e>1?"border"+t:t]=function(t,e,i,r,n){var s,o;if(arguments.length<4)return 5===(o=(s=a.map(function(e){return sh(t,e,i)})).join(" ")).split(s[0]).length?s[0]:o;s=(r+"").split(" "),o={},a.forEach(function(t,e){return o[t]=s[e]=s[e]||s[(e-1)/2|0]}),t.init(e,o,n)}});var sR={name:"css",register:a9,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,r,n){var a,s,o,h,l,d,u,c,f,g,p,_,m,v,y,x,b=this._props,w=t.style,S=i.vars.startAt;for(u in aP||a9(),this.styles=this.styles||a5(t),x=this.styles.props,this.tween=i,e)if("autoRound"!==u&&(s=e[u],!(rf[u]&&nJ(u,e,i,r,t,n)))){if(l=typeof s,d=sf[u],"function"===l&&(l=typeof(s=s.call(i,r,t,n))),"string"===l&&~s.indexOf("random(")&&(s=nd(s)),d)d(this,t,u,s,i)&&(y=1);else if("--"===u.substr(0,2))a=(getComputedStyle(t).getPropertyValue(u)+"").trim(),s+="",nw.lastIndex=0,nw.test(a)||(c=r7(a),f=r7(s)),f?c!==f&&(a=so(t,u,a,f)+f):c&&(s+=c),this.add(w,"setProperty",a,s,r,n,0,0,u),b.push(u),x.push(u,0,w[u]);else if("undefined"!==l){if(S&&u in S?(iU(a="function"==typeof S[u]?S[u].call(i,r,t,n):S[u])&&~a.indexOf("random(")&&(a=nd(a)),r7(a+"")||"auto"===a||(a+=iN.units[u]||r7(sh(t,u))||""),"="===(a+"").charAt(1)&&(a=sh(t,u))):a=sh(t,u),h=parseFloat(a),(g="string"===l&&"="===s.charAt(1)&&s.substr(0,2))&&(s=s.substr(2)),o=parseFloat(s),u in aN&&("autoAlpha"===u&&(1===h&&"hidden"===sh(t,"visibility")&&o&&(h=0),x.push("visibility",0,w.visibility),sn(this,w,"visibility",h?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==u&&"transform"!==u&&~(u=aN[u]).indexOf(",")&&(u=u.split(",")[0])),p=u in aI){if(this.styles.save(u),"string"===l&&"var(--"===s.substring(0,6)&&(o=parseFloat(s=a4(t,s.substring(4,s.indexOf(")"))))),_||((m=t._gsap).renderTransform&&!e.parseTransform||sx(t,e.parseTransform),v=!1!==e.smoothOrigin&&m.smooth,(_=this._pt=new ad(this._pt,w,aJ,0,1,m.renderTransform,m,0,-1)).dep=1),"scale"===u)this._pt=new ad(this._pt,m,"scaleY",m.scaleY,(g?rC(m.scaleY,g+o):o)-m.scaleY||0,az),this._pt.u=0,b.push("scaleY",u),u+="X";else if("transformOrigin"===u){x.push(aZ,0,w[aZ]),s=su(s),m.svg?sy(t,s,0,v,0,this):((f=parseFloat(s.split(" ")[2])||0)!==m.zOrigin&&sn(this,m,"zOrigin",m.zOrigin,f),sn(this,w,u,sb(a),sb(s)));continue}else if("svgOrigin"===u){sy(t,s,1,v,0,this);continue}else if(u in sp){sP(this,m,u,h,g?rC(h,g+s):s);continue}else if("smoothOrigin"===u){sn(this,m,"smooth",m.smooth,s);continue}else if("force3D"===u){m[u]=s;continue}else if("transform"===u){sM(this,s,t);continue}}else u in w||(u=a6(u)||u);if(p||(o||0===o)&&(h||0===h)&&!aB.test(s)&&u in w)c=(a+"").substr((h+"").length),o||(o=0),f=r7(s)||(u in iN.units?iN.units[u]:c),c!==f&&(h=so(t,u,a,f)),this._pt=new ad(this._pt,p?m:w,u,h,(g?rC(h,g+o):o)-h,!p&&("px"===f||"zIndex"===u)&&!1!==e.autoRound?aY:az),this._pt.u=f||0,c!==f&&"%"!==f&&(this._pt.b=a,this._pt.r=aH);else if(u in w)sl.call(this,t,u,a,g?g+s:s);else if(u in t)this.add(t,u,a||t[u],g?g+s:s,r,n);else if("parseTransform"!==u){rr(u,s);continue}p||(u in w?x.push(u,0,w[u]):"function"==typeof t[u]?x.push(u,2,t[u]()):x.push(u,1,a||t[u])),b.push(u)}}y&&al(this)},render:function(t,e){if(e.tween._time||!aR())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:sh,aliases:aN,getSetter:function(t,e,i){var r=aN[e];return r&&0>r.indexOf(",")&&(e=r),e in aI&&e!==aZ&&(t._gsap.x||sh(t,"x"))?i&&aM===i?"scale"===e?aK:aV:(aM=i||{},"scale"===e?a$:aQ):t.style&&!i$(t.style[e])?aq:~e.indexOf("-")?aU:ae(t,e)},core:{_removeProperty:sr,_getMatrix:sv}};aC.utils.checkPrefix=a6,aC.core.getStyleSaver=a5,a=rb("x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+(n="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(t){aI[t]=1}),rb(n,function(t){iN.units[t]="deg",sp[t]=1}),aN[a[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+n,rb("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(t){var e=t.split(":");aN[e[1]]=a[e[0]]}),rb("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){iN.units[t]="px"}),aC.registerPlugin(sR);var sE=aC.registerPlugin(sR)||aC;sE.core.Tween;let sI="undefined"!=typeof document?it.useLayoutEffect:it.useEffect,sO=t=>t&&!Array.isArray(t)&&"object"==typeof t,sD=[],sG={},sL=sE,sF=(t,e=sD)=>{let i=sG;sO(t)?(i=t,t=null,e="dependencies"in i?i.dependencies:sD):sO(e)&&(e="dependencies"in(i=e)?i.dependencies:sD),t&&"function"!=typeof t&&console.warn("First parameter must be a function or config object");let{scope:r,revertOnUpdate:n}=i,a=(0,it.useRef)(!1),s=(0,it.useRef)(sL.context(()=>{},r)),o=(0,it.useRef)(t=>s.current.add(null,t)),h=e&&e.length&&!n;return h&&sI(()=>(a.current=!0,()=>s.current.revert()),sD),sI(()=>{if(t&&s.current.add(t,r),!h||!a.current)return()=>s.current.revert()},e),{context:s.current,contextSafe:o.current}};sF.register=t=>{sL=t},sF.headless=!0;var sB=((s=sB||{})[s.GridWalker=0]="GridWalker",s[s.GridPoint=1]="GridPoint",s),sN=((o=sN||{})[o.Up=0]="Up",o[o.Down=1]="Down",o[o.Left=2]="Left",o[o.Right=3]="Right",o),sz=((h=sz||{})[h.NoExtantWalker=0]="NoExtantWalker",h[h.AtLeastOneExtantWalker=1]="AtLeastOneExtantWalker",h[h.GridWalkerRemoval=2]="GridWalkerRemoval",h[h.Running=3]="Running",h[h.Paused=4]="Paused",h);function sW(t,e){var i,r;return i=t.valueOf(),(r=e.valueOf())<0n&&(i=-i,r=-r),i>=0n?i/r:(i-r+1n)/r}function sH(t,e){return Number(t)/Number(e)}function sY(t,e){return ir(t.valueOf(),-e.valueOf())}function sX(t,e){return ir(t.valueOf(),e.valueOf())}function sj(t){return Number(t)}function sq(t,e){return Array.from(function(t,e,i){let r="bigint"==typeof i||"number"==typeof i?{step:i}:i??{},{excludeEnd:n=!1,excludes:a,excludeStart:s=!1}=r,o=a instanceof Set?a:new Set(a);if(n&&o.add(e),s&&o.add(t),"bigint"==typeof t&&"bigint"==typeof e){if(void 0!==r.step&&!("bigint"==typeof r.step&&r.step>0n))throw RangeError(`\`${r.step}\` (parameter \`options.step\`) is not a bigint which is > 0!`);return io(t,e,{excludes:o,step:r.step??1n})}if("number"==typeof t&&"number"==typeof e){if(void 0!==r.step&&!("number"==typeof r.step&&r.step>0))throw RangeError(`\`${r.step}\` (parameter \`options.step\`) is not a number which is > 0!`);return io(t,e,{excludes:o,step:r.step??1})}if("string"==typeof t&&"string"==typeof e){let i=is("start",t),n=is("end",e);if(void 0!==r.step&&!("number"==typeof r.step&&Number.isSafeInteger(r.step)&&r.step>0))throw RangeError(`\`${r.step}\` (parameter \`options.step\`) is not a number which is integer, safe, and > 0!`);return function*(t,e,i){let{excludes:r}=i;for(let n of io(t,e,{...i,excludes:new Set})){let t=String.fromCodePoint(n);r.has(t)||(yield t)}}(i,n,{excludes:o,step:r.step??1})}throw TypeError("Parameters `start` and `end` are not bigints, numbers, or strings (character)!")}(sU.valueOf(),t.valueOf(),{excludeEnd:!0})).map(e)}let sU=0n,sV=sW(1000n,50n),sK=sW(500n,50n),s$=Math.min(sH(50n,10n),sH(50n,10n)),sQ=sH(1n,sV),sJ=sH(1n,sK),sZ=sq(sV,t=>ia(50n.valueOf(),t.valueOf())),s0=sq(sV,t=>Number(t)*sQ*sj(500n)+15),s1=sq(sK,t=>ia(50n.valueOf(),t.valueOf())),s2=sq(sK,t=>Number(t)*sJ*sj(500n)+15),s5="#000000";function s3(t,e){let{widthIntervalIndex:i,heightIntervalIndex:r}=t,{widthIntervalIndex:n,heightIntervalIndex:a}=e;return`${i}_${r}_${n}_${a}`}function s4(){let[t,e]=(0,it.useState)(0),{addToCollection:i,removeFromCollection:r,removeFirstFoundFromCollection:n,clearCollection:a,collection:s}=(0,ii.default)(),[o,h]=(0,it.useState)(void 0),{addToCollection:d,removeFromCollection:u,removeFirstFoundFromCollection:c,clearCollection:f,collection:g}=(0,ii.default)(),{add:p,clear:_,queue:m}=il(),{add:v,clear:y,queue:x}=il(),[b,w]=(0,it.useState)(void 0),[S,C]=(0,it.useState)(!1),T=(0,it.useRef)(null),k=t=>{let{onGridAt:e,walkerColor:i}=t,r=(({widthIntervalIndex:t,heightIntervalIndex:e},i)=>{let r=[{nextStep:{widthIntervalIndex:sY(t,1n),heightIntervalIndex:e},nextStepDir:2},{nextStep:{widthIntervalIndex:sX(t,1n),heightIntervalIndex:e},nextStepDir:3},{nextStep:{widthIntervalIndex:t,heightIntervalIndex:sY(e,1n)},nextStepDir:0},{nextStep:{widthIntervalIndex:t,heightIntervalIndex:sX(e,1n)},nextStepDir:1}].filter(({nextStep:{widthIntervalIndex:t,heightIntervalIndex:e}})=>!g.returnFirstOccurrenceIfFound(({stepFrom:{widthIntervalIndex:r,heightIntervalIndex:n},lineColor:a})=>t===r&&e===n&&a===i)&&t>=sU&&t.valueOf()<sV.valueOf()&&e>=sU&&e.valueOf()<sK.valueOf());return r[Math.floor(Math.random()*r.length)]})(e,i);if(r){let{nextStep:t,nextStepDir:n}=r;return{stepFrom:e,stepTo:t,lineColor:i,stepDir:n}}};return(0,it.useEffect)(()=>{if(T.current){let i=s0.length<s2.length?s0.map((t,e)=>sq(sK,t=>{let i=Number(t);return{pointX:Number(sZ[e]),pointY:Number(s1[i]),scaledPointX:s0[e],scaledPointY:s2[i],pointIndices:{widthIntervalIndex:BigInt(e).valueOf(),heightIntervalIndex:t.valueOf()}}})).flat():s2.map((t,e)=>sq(sV,t=>{let i=Number(t);return{pointX:Number(sZ[i]),pointY:Number(s1[e]),scaledPointX:s0[i],scaledPointY:s2[e],pointIndices:{widthIntervalIndex:t,heightIntervalIndex:BigInt(e).valueOf()}}})).flat(),r=new ie.default(new Set(i)),o=new e7.Stage({container:"stageContainer",width:Number(1000n),height:Number(500n)}),l=new e7.Layer;o.add(l);let m=g.filter(t=>!("stepFinishedAnimatingAt"in t)),x=sE.timeline();m.forEach(t=>{let{stepFrom:e,stepTo:i,lineColor:r}=t,{widthIntervalIndex:n,heightIntervalIndex:a}=e,{widthIntervalIndex:s,heightIntervalIndex:o}=i,h=s0[sj(n)],f=s0[sj(s)],g=s2[sj(a)],p=s2[sj(o)],_=new e7.Circle({x:h,y:g,radius:s$,fill:r,stroke:s5,opacity:.5});l.add(_);let m=S?[h,g,h,g]:[h,g,f,p],v=new e7.Line({points:m,stroke:r,opacity:.5});if(l.add(v),v.moveToTop(),_.moveToTop(),S){let r=sE.to(_,{duration:1.5,startAt:{x:h,y:g},x:f,y:p,ease:"expo.inOut",onUpdate:()=>{v.points([h,g,_.x(),_.y()])},onComplete:()=>{u(t);let r={...t,stepFinishedAnimatingAt:Date.now()},n=s3(e,i),a=s3(i,e);c(({stepFrom:t,stepTo:e})=>s3(t,e)===n),c(({stepFrom:t,stepTo:e})=>s3(e,t)===a),d(r)}});x.add(r,"<")}}),g.filter(t=>"stepFinishedAnimatingAt"in t).forEach(t=>{let{stepFrom:e,stepTo:i,lineColor:r}=t,{widthIntervalIndex:n,heightIntervalIndex:a}=e,{widthIntervalIndex:o,heightIntervalIndex:h}=i,d=s0[sj(n)],u=s0[sj(o)],c=s2[sj(a)],f=s2[sj(h)],g=new e7.Line({points:[d,c,u,f],stroke:r});l.add(g),g.moveToBottom(),s.returnFirstOccurrenceIfFound(({onGridAt:{widthIntervalIndex:t,heightIntervalIndex:e},walkerColor:i})=>n===t&&a===e&&r===i)&&S&&v(t)}),r.forEach(({scaledPointX:i,scaledPointY:r,pointIndices:a})=>{let{widthIntervalIndex:o,heightIntervalIndex:d}=a,u=s.returnFirstOccurrenceIfFound(({onGridAt:{widthIntervalIndex:t,heightIntervalIndex:e}})=>o===t&&d==e),[c,f]=u?[0,u.walkerColor]:[1,"#FFFFFF"],g=b&&b.widthIntervalIndex===o&&b.heightIntervalIndex===d,p=new e7.Circle({x:i,y:r,radius:s$,fill:f,stroke:2===t&&g?"#FF0000":s5});p.on("click",()=>{((i,r)=>{if(0===t||1===t||2===t)if(0===i)if(t>=2){if(b){let{widthIntervalIndex:t,heightIntervalIndex:i}=b,{widthIntervalIndex:a,heightIntervalIndex:o}=r;t===a&&i===o&&(n(({onGridAt:{widthIntervalIndex:t,heightIntervalIndex:e}})=>a===t&&o===e),w(void 0),e(+(1!==s.size())))}}else e(2),w(r);else 1===i&&(h({onGridAt:r,walkerColor:(0,ih.default)(),finishedWalk:!1}),w(r))})(c,a)}),l.add(p),p.moveToBottom()});let T=({key:i})=>{let r=s.isNonEmpty();switch(i.toLowerCase()){case"s":1===t&&(C(!0),s.forEach(t=>p(t)),e(3));break;case"p":3===t&&(C(!1),e(4));break;case"r":4===t&&(C(!0),e(3));break;case"e":0!==t&&2!==t&&(w(void 0),a(),f(),_(),y(),e(0));break;case"escape":2===t&&e(+!!r)}};return window.addEventListener("keydown",T),()=>{o.destroyChildren(),o.off("dblclick"),o.destroy(),l.destroy(),window.removeEventListener("keydown",T)}}},[s,g,t]),(0,it.useEffect)(()=>{if(o){let{onGridAt:{widthIntervalIndex:r,heightIntervalIndex:a}}=o;n(({onGridAt:{widthIntervalIndex:t,heightIntervalIndex:e}})=>r===t&&a===e),i(o),h(void 0),0===t&&e(1)}return()=>{}},[o]),(0,it.useEffect)(()=>{if(m.length>0){for(let t of m){let e=k(t);e?d(e):(r(t),i({...t,finishedWalk:!0}))}_()}},[m]),(0,it.useEffect)(()=>{if(x.length>0){for(let t of x){let{stepFrom:e,stepTo:n,lineColor:a}=t;r({onGridAt:e,walkerColor:a,finishedWalk:!1});let s={onGridAt:n,walkerColor:a,finishedWalk:!1};i(s),p(s)}y()}},[x]),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{ref:T,id:"stageContainer"}),(0,l.jsx)("div",{children:function(t){switch(t){case 0:return"Click on a point to add a walker.";case 3:return"Press P to pause.\nPress E to reset.";case 4:return"Press R to resume.\nPress E to reset.";case 1:return"To add another walker, click on a point.\nTo delete the walker just added, click on the same point again.\nPress S to start walking.\nPress E to reset.";case 2:return"Click on the point again to delete the walker.\nPress ESC to cancel."}}(t)}),t>=3&&(0,l.jsxs)("div",{children:[s.filter(({finishedWalk:t})=>!t).size()," walkers active."]})]})}sE.registerPlugin(sF),t.s(["default",()=>s4],77585)}]);